LavaPack.loadBundle([[6584,{"../../app/scripts/lib/util":237,"../../shared/lib/asset-utils":5288,"../helpers/utils/isOriginalNativeTokenSymbol":6496,"../selectors":7345,"../selectors/multichain":7354,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsOriginalNativeTokenSymbol=function(e,t,n,u=""){const[d,m]=(0,a.useState)(!1),p=(0,r.useSelector)(o.useSafeChainsListValidationSelector),f=(0,i.isEvmChainId)(e),g=(0,r.useSelector)(s.getMultichainCurrentNetwork);return(0,a.useEffect)(()=>{!async function(e){if(f)try{if((e=>{const t=(0,l.getValidUrl)(e);return null!==t&&("localhost"===t.hostname||"127.0.0.1"===t.hostname)})(u))return void m(!0);const n=await(0,c.isOriginalNativeTokenSymbol)({ticker:t,chainId:e,useAPICall:p});m(n)}catch(e){m(!1)}else m(t===(null==g?void 0:g.ticker))}(e)},[d,e,t,n,u,p,f,null==g?void 0:g.ticker]),d};var a=e("react"),r=e("react-redux"),o=e("../selectors"),s=e("../selectors/multichain"),i=e("../../shared/lib/asset-utils"),l=e("../../app/scripts/lib/util"),c=e("../helpers/utils/isOriginalNativeTokenSymbol")}}},{package:"$root$",file:"ui/hooks/useIsOriginalNativeTokenSymbol.ts"}],[6585,{"../selectors":7345,"../store/actions":7369,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsOriginalTokenSymbol=function(e,t){const[n,i]=(0,a.useState)(null),l=(0,r.useSelector)(s.getTokenList);return(0,a.useEffect)(()=>{!async function(e){var n,a;let r=null===(n=l[null==e?void 0:e.toLowerCase()])||void 0===n?void 0:n.symbol;r||(r=await(0,o.getTokenSymbol)(e)),i((null===(a=r)||void 0===a?void 0:a.toLowerCase())===(null==t?void 0:t.toLowerCase()))}(e)},[e,t]),n};var a=e("react"),r=e("react-redux"),o=e("../store/actions"),s=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useIsOriginalTokenSymbol.js"}],[6586,{"../store/actions":7369,loglevel:4370,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDisableMetametrics=function(){const e=(0,o.useDispatch)(),[t,n]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null);return{disableMetametrics:(0,r.useCallback)(async()=>{n(!0),e((0,i.showLoadingIndication)()),s(null);try{await e((0,i.setParticipateInMetaMetrics)(!1))}catch(e){throw s(e instanceof Error?e.message:"An unexpected error occurred"),e}finally{n(!1),e((0,i.hideLoadingIndication)())}e((0,i.hideLoadingIndication)())},[e]),loading:t,error:a}},n.useEnableMetametrics=function(){const e=(0,o.useDispatch)(),[t,n]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null);return{enableMetametrics:(0,r.useCallback)(async()=>{n(!0),e((0,i.showLoadingIndication)()),l(null);try{await e((0,i.setParticipateInMetaMetrics)(!0))}catch(e){throw l(e instanceof Error?e.message:"An unexpected error occurred"),s.default.error(e),e}finally{n(!1),e((0,i.hideLoadingIndication)())}e((0,i.hideLoadingIndication)())},[e]),loading:t,error:a}};var a,r=e("react"),o=e("react-redux"),s=(a=e("loglevel"))&&a.__esModule?a:{default:a},i=e("../store/actions")}}},{package:"$root$",file:"ui/hooks/useMetametrics.ts"}],[6587,{"../store/actions":7369,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useModalProps=function(){const e=(0,a.useSelector)(e=>{var t;return null===(t=e.appState.modal.modalState)||void 0===t?void 0:t.props}),t=(0,a.useDispatch)();return{props:e,hideModal:()=>t((0,r.hideModal)())}};var a=e("react-redux"),r=e("../store/actions")}}},{package:"$root$",file:"ui/hooks/useModalProps.ts"}],[6588,{react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("react");n.default=e=>{const t=(0,a.useRef)(new Map);(0,a.useEffect)(()=>{for(const n of e.input){const a=JSON.stringify(n);t.current.has(a)||e.startPolling(n).then(e=>t.current.set(a,e))}for(const[n,a]of t.current.entries()){e.input.some(e=>n===JSON.stringify(e))||(e.stopPollingByPollingToken(a),t.current.delete(n))}},[e.input&&JSON.stringify(e.input)]),(0,a.useEffect)(()=>()=>{for(const n of t.current.values())e.stopPollingByPollingToken(n)},[])}}}},{package:"$root$",file:"ui/hooks/useMultiPolling.ts"}],[6589,{"../../shared/constants/multichain/assets":5260,"../helpers/utils/confirm-tx.util":6486,"../helpers/utils/token-util":6510,"../selectors/multichain":7354,"./useAccountTotalFiatBalance":6564,"./useMultichainSelector":6592,"@metamask/keyring-api":1914,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainAccountTotalFiatBalance=n.EMPTY_VALUES=void 0;var a=e("react-redux"),r=e("@metamask/keyring-api"),o=e("../selectors/multichain"),s=e("../helpers/utils/confirm-tx.util"),i=e("../../shared/constants/multichain/assets"),l=e("../helpers/utils/token-util"),c=e("./useMultichainSelector"),u=e("./useAccountTotalFiatBalance");const d=n.EMPTY_VALUES={formattedFiat:"0",totalFiatBalance:"0",totalWeiBalance:"0",tokensWithBalances:[],loading:!1,orderedTokenList:[]};n.useMultichainAccountTotalFiatBalance=(e,t=!1)=>{var n;if((0,r.isEvmAccountType)(e.type))return(0,u.useAccountTotalFiatBalance)(e,t);const m=(0,c.useMultichainSelector)(o.getMultichainCurrentCurrency,e),{network:p}=(0,c.useMultichainSelector)(o.getMultichainNetwork,e),{ticker:f}=p,g=(0,c.useMultichainSelector)(o.getMultichainConversionRate,e),h=(0,c.useMultichainSelector)(o.getMultichainCurrencyImage,e),y=(0,a.useSelector)(o.getMultichainBalances),v=i.MULTICHAIN_NATIVE_CURRENCY_TO_CAIP19[f];if(null==y||null===(n=y[e.id])||void 0===n||!n[v])return d;const{amount:k}=y[e.id][v],b=(0,l.getTokenFiatAmount)(1,Number(g),m,k,f,!1,!1)??"0",T={iconUrl:h,symbol:f,fiatBalance:b};return{formattedFiat:(0,s.formatCurrency)(b,m),totalFiatBalance:b,totalBalance:k,tokensWithBalances:[],loading:!1,orderedTokenList:[T]}}}}},{package:"$root$",file:"ui/hooks/useMultichainAccountTotalFiatBalance.ts"}],[6590,{"../ducks/metamask/metamask":6445,"../selectors":7345,"../store/controller-actions/multichain-asset-rates-controller":7371,"./usePolling":6601,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../ducks/metamask/metamask"),s=e("../selectors"),i=e("../store/controller-actions/multichain-asset-rates-controller"),l=(a=e("./usePolling"))&&a.__esModule?a:{default:a};n.default=()=>{const e=(()=>{const e=(0,r.useSelector)(o.getCompletedOnboarding),t=(0,r.useSelector)(o.getIsUnlocked),n=(0,r.useSelector)(s.getUseCurrencyRateCheck);return e&&t&&n})(),t=(()=>{const e=(0,r.useSelector)(s.getSelectedInternalAccount);return(null==e?void 0:e.id)??""})();(0,l.default)({startPolling:i.multichainAssetsRatesStartPolling,stopPollingByPollingToken:i.multichainAssetsRatesStopPollingByPollingToken,input:t,enabled:e})}}}},{package:"$root$",file:"ui/hooks/useMultichainAssetsRatesPolling.ts"}],[6591,{"../../shared/constants/transaction":5279,"../selectors/assets":7338,"../selectors/multichain":7354,"../selectors/selectors":7361,"./useMultichainSelector":6592,"@metamask/utils":2632,"bignumber.js":3481,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainBalances=void 0;var a=e("react"),r=e("react-redux"),o=e("@metamask/utils"),s=e("bignumber.js"),i=e("../selectors/assets"),l=e("../selectors/multichain"),c=e("../../shared/constants/transaction"),u=e("../selectors/selectors"),d=e("./useMultichainSelector");n.useMultichainBalances=e=>{const t=(0,r.useSelector)(u.getSelectedEvmInternalAccount),n=(0,r.useSelector)(t=>(0,u.getInternalAccount)(t,e??"")),m=e?n:t,p=(0,r.useSelector)(e=>(0,i.getTokenBalancesEvm)(e,null==m?void 0:m.address)),f=(0,r.useSelector)(l.getLastSelectedNonEvmAccount),g=(e=>{const t=(0,r.useSelector)(i.getAccountAssets),n=(0,r.useSelector)(i.getAssetsMetadata),u=(0,d.useMultichainSelector)(l.getMultichainBalances),m=(0,r.useSelector)(i.getAssetsRates);return(0,a.useMemo)(()=>{if(!e)return[];const a=null==t?void 0:t[e],r=null==u?void 0:u[e];return r&&a?a.filter(e=>n[e]).map(e=>{var t,a,i,l,u,d,p;const{chainId:f,assetReference:g,assetNamespace:h}=(0,o.parseCaipAssetType)(e);return{chainId:f,symbol:(null===(t=n[e])||void 0===t?void 0:t.symbol)??"",assetId:e,address:g,string:(null===(a=r[e])||void 0===a?void 0:a.amount)??"0",balance:(null===(i=r[e])||void 0===i?void 0:i.amount)??"0",decimals:null===(l=n[e])||void 0===l||null===(l=l.units[0])||void 0===l?void 0:l.decimals,image:(null===(u=n[e])||void 0===u?void 0:u.iconUrl)??"",type:"token"===h?c.AssetType.token:c.AssetType.native,tokenFiatAmount:new s.BigNumber((null===(d=r[e])||void 0===d?void 0:d.amount)??"1").times((null==m||null===(p=m[e])||void 0===p?void 0:p.rate)??"1").toNumber()}}).filter(Boolean):[]},[n,m,t,e,u])})(e??(null==f?void 0:f.id));return{assetsWithBalance:(0,a.useMemo)(()=>[...p,...g].map(e=>({...e,type:e.isNative?c.AssetType.native:c.AssetType.token})).sort((e,t)=>(t.tokenFiatAmount??0)-(e.tokenFiatAmount??0)),[p,g]),balanceByChainId:(0,a.useMemo)(()=>[...p,...g].reduce((e,t)=>(e[t.chainId]||(e[t.chainId]=0),e[t.chainId]+=t.tokenFiatAmount??0,e),{}),[p,g])}}}}},{package:"$root$",file:"ui/hooks/useMultichainBalances.ts"}],[6592,{"../selectors":7345,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainSelector=function(e,t){return(0,a.useSelector)(n=>e(n,t||(0,r.getSelectedInternalAccount)(n)))};var a=e("react-redux"),r=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useMultichainSelector.ts"}],[6593,{"../../shared/constants/transaction":5279,"../components/app/assets/util/formatWithThreshold":5463,"../ducks/locale/locale":6444,"./useI18nContext":6583,"@metamask/keyring-api":1914,"@metamask/multichain-network-controller":2006,"@metamask/transaction-controller":2587,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KEYRING_TRANSACTION_STATUS_KEY=void 0,n.useMultichainTransactionDisplay=function(e,t){const n=(0,s.useSelector)(l.getIntlLocale),{chainId:r}=t,i=o.MULTICHAIN_NETWORK_DECIMAL_PLACES[r],c=(0,u.useI18nContext)(),m=d(e.from,!0,n,i),p=d(e.to,e.type===a.TransactionType.Send,n,i),f=d((e.fees||[]).filter(e=>"base"===e.type),!0,n),g=d((e.fees||[]).filter(e=>"priority"===e.type),!0,n),h={[a.TransactionType.Send]:c("sent"),[a.TransactionType.Receive]:c("received"),[a.TransactionType.Swap]:`${c("swap")} ${null==m?void 0:m.unit} ${c("to").toLowerCase()} ${null==p?void 0:p.unit}`,[a.TransactionType.Unknown]:c("interaction")};return{...e,title:h[e.type],from:m,to:p,baseFee:f,priorityFee:g,isRedeposit:0===e.to.length&&e.type===a.TransactionType.Send}};var a=e("@metamask/keyring-api"),r=e("@metamask/transaction-controller"),o=e("@metamask/multichain-network-controller"),s=e("react-redux"),i=e("../components/app/assets/util/formatWithThreshold"),l=e("../ducks/locale/locale"),c=e("../../shared/constants/transaction"),u=e("./useI18nContext");n.KEYRING_TRANSACTION_STATUS_KEY={[a.TransactionStatus.Failed]:r.TransactionStatus.failed,[a.TransactionStatus.Confirmed]:r.TransactionStatus.confirmed,[a.TransactionStatus.Unconfirmed]:c.TransactionGroupStatus.pending,[a.TransactionStatus.Submitted]:r.TransactionStatus.submitted};function d(e,t,n,a){const r={};for(const t of e){if(null==t||!t.asset.fungible)continue;const e=t.asset.type;r[e]?r[e].amount+=parseFloat(t.asset.amount):r[e]={amount:parseFloat(t.asset.amount),address:t.address,unit:t.asset.unit}}return Object.entries(r).map(([e,r])=>function(e,t,n,a){const r=1/10**(a||8),o=(0,i.formatWithThreshold)(e.amount,r,t,{minimumFractionDigits:0,maximumFractionDigits:a||8});let s=o;n&&(s=`-${o}`);return{...e,amount:s}}(r,n,t,a))[0]}}}},{package:"$root$",file:"ui/hooks/useMultichainTransactionDisplay.ts"}],[6594,{"../selectors":7345,"@metamask/name-controller":2014,lodash:4362,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useName=function(e,t,n){return i([{value:e,type:t,variation:n}])[0]},n.useNames=i;var a=e("@metamask/name-controller"),r=e("react-redux"),o=e("lodash"),s=e("../selectors");function i(e){const t=(0,r.useSelector)(s.getNames,o.isEqual);return e.map(({value:e,type:n,variation:r})=>{var o;const s=function(e,t){if(t===a.NameType.ETHEREUM_ADDRESS)return e.toLowerCase();return e}(e,n),i=(null===(o=t[n])||void 0===o?void 0:o[s])??{},l=i[r],c=i[a.FALLBACK_VARIATION],u=null!=l&&l.name||!c?l??{}:c,{name:d=null,sourceId:m=null,origin:p=null,proposedNames:f={}}=u;return{name:d,sourceId:m,proposedNames:f,origin:p}})}}}},{package:"$root$",file:"ui/hooks/useName.ts"}],[6595,{"../../shared/constants/transaction":5279,"../store/actions":7369,"./useAsync":6567},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNftCollectionsMetadata=function(e){const{value:t}=(0,o.useAsyncResult)(()=>async function(e){const t=e.reduce((e,{chainId:t,contractAddress:n})=>(e[t]=[...e[t]??[],n.toLowerCase()],e),{}),n=Object.keys(t),a=await Promise.all(n.map(e=>async function(e,t){const n=await Promise.all(e.map(e=>(0,r.getTokenStandardAndDetails)(e,t))),a=e.filter((e,t)=>s.includes(n[t].standard));if(0===a.length)return{};const o=await(0,r.getNFTContractInfo)(a,t);return o.collections.reduce((e,t,n)=>(e[a[n]]={name:null==t?void 0:t.name,image:null==t?void 0:t.image,isSpam:null==t?void 0:t.isSpam},e),{})}(t[e],e)));return n.reduce((e,t,n)=>(e[t]=a[n],e),{})}(e),[JSON.stringify(e)]);return t??{}};var a=e("../../shared/constants/transaction"),r=e("../store/actions"),o=e("./useAsync");const s=[a.TokenStandard.ERC721]}}},{package:"$root$",file:"ui/hooks/useNftCollectionsMetadata.ts"}],[6596,{"../../shared/lib/trace":5342,"../../shared/modules/selectors/networks":5371,"../ducks/metamask/metamask":6445,"../selectors":7345,"../selectors/multichain/networks":7355,"./useI18nContext":6583,"./usePrevious":6602,lodash:4362,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNfts=function({overridePopularNetworkFilter:e=!1}={}){const t=(0,m.useI18nContext)(),n=(0,r.useSelector)(s.getAllNfts),{address:p}=(0,r.useSelector)(i.getSelectedInternalAccount),f=(0,r.useSelector)(c.getCurrentChainId),g=(0,r.useSelector)(i.getAllChainsToPoll),h=(0,r.useSelector)(i.getIsTokenNetworkFilterEqualCurrentNetwork),y=(0,r.useSelector)(l.getEnabledNetworksByNamespace),v=(0,a.useMemo)(()=>{if(i.isGlobalNetworkSelectorRemoved){const t={};return e?(null==n?void 0:n[f])??[]:(Object.entries(n??{}).forEach(([e,n])=>{null!=y&&y[e]&&Array.isArray(n)&&(t[e]=n)}),t)}(0,u.trace)({name:u.TraceName.LoadCollectibles});const t=h||e?(null==n?void 0:n[f])??[]:n;return(0,u.endTrace)({name:u.TraceName.LoadCollectibles}),t},[h,e,n,f,y]),k=(0,r.useSelector)(s.getNftContracts),b=t("nftsPreviouslyOwned"),T=t("unknownCollection"),[x,C]=(0,a.useState)([]),[S,w]=(0,a.useState)([]),[E,_]=(0,a.useState)(()=>(null==v?void 0:v.length)>=0),I=(0,d.usePrevious)(v),M=(0,d.usePrevious)(g),A=(0,d.usePrevious)(p);return(0,a.useEffect)(()=>{(0,o.isEqual)(I,v)&&(0,o.isEqual)(A,p)&&(0,o.isEqual)(M,f)||(()=>{if(_(!0),p===undefined||g===undefined)return;const e=[],t=[];Object.values(v).flat().forEach(n=>{!1===(null==n?void 0:n.isCurrentlyOwned)?e.push(n):t.push(n)}),w(e),C(t),_(!1)})()},[v,I,k,_,f,M,p,A,b,T,g]),{loading:E,currentlyOwnedNfts:x,previouslyOwnedNfts:S}};var a=e("react"),r=e("react-redux"),o=e("lodash"),s=e("../ducks/metamask/metamask"),i=e("../selectors"),l=e("../selectors/multichain/networks"),c=e("../../shared/modules/selectors/networks"),u=e("../../shared/lib/trace"),d=e("./usePrevious"),m=e("./useI18nContext")}}},{package:"$root$",file:"ui/hooks/useNfts.ts"}],[6597,{"../../shared/modules/selectors/networks":5371,"../ducks/metamask/metamask":6445,"../helpers/utils/nfts":6501,"../selectors":7345,"../selectors/multichain/networks":7355,"./useI18nContext":6583,"./usePrevious":6602,lodash:4362,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNftsCollections=function(){const e=(0,m.useI18nContext)(),t=e("nftsPreviouslyOwned"),n=e("unknownCollection"),[p,f]=(0,a.useState)({}),[g,h]=(0,a.useState)({collectionName:t,nfts:[]}),y=(0,r.useSelector)(i.getIsTokenNetworkFilterEqualCurrentNetwork),v=(0,r.useSelector)(s.getAllNfts),k=(0,r.useSelector)(l.getEnabledNetworksByNamespace),{address:b}=(0,r.useSelector)(i.getSelectedInternalAccount),T=(0,r.useSelector)(c.getCurrentChainId),x=(0,a.useMemo)(()=>{if(i.isGlobalNetworkSelectorRemoved){const e={};return Object.entries(v??{}).forEach(([t,n])=>{null!=k&&k[t]&&Array.isArray(n)&&(e[t]=n)}),e}return y?(null==v?void 0:v[T])??[]:v},[y,v,T,k]),[C,S]=(0,a.useState)(()=>(null==x?void 0:x.length)>=0),w=(0,r.useSelector)(s.getNftContracts),E=(0,d.usePrevious)(x),_=(0,d.usePrevious)(T),I=(0,d.usePrevious)(b);return(0,a.useEffect)(()=>{(0,o.isEqual)(E,x)&&(0,o.isEqual)(I,b)&&(0,o.isEqual)(_,T)||(()=>{if(S(!0),b===undefined||T===undefined)return;const e={},a={collectionName:t,nfts:[]};Object.values(x).flat().forEach(t=>{if(!1===(null==t?void 0:t.isCurrentlyOwned))a.nfts.push(t);else if(e[t.address])e[t.address].nfts.push(t);else{const a=w.find(({address:e})=>e===t.address);e[t.address]={collectionName:(null==a?void 0:a.name)||n,collectionImage:(null==a?void 0:a.logo)||(0,u.getNftImage)(t.image),nfts:[t]}}}),f(e),h(a),S(!1)})()},[x,E,w,S,T,_,b,I,t,n]),{nftsLoading:C,collections:p,previouslyOwnedCollection:g}};var a=e("react"),r=e("react-redux"),o=e("lodash"),s=e("../ducks/metamask/metamask"),i=e("../selectors"),l=e("../selectors/multichain/networks"),c=e("../../shared/modules/selectors/networks"),u=e("../helpers/utils/nfts"),d=e("./usePrevious"),m=e("./useI18nContext")}}},{package:"$root$",file:"ui/hooks/useNftsCollections.js"}],[6598,{"../helpers/constants/notifications":6461,"../store/actions":7369,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapNotificationTimeouts=void 0;var a=e("react-redux"),r=e("../store/actions"),o=e("../helpers/constants/notifications");n.useSnapNotificationTimeouts=()=>{const e=(0,a.useDispatch)();return{setNotificationTimeout:t=>{setTimeout(()=>{e((0,r.deleteNotificationsById)([t]))},o.NOTIFICATIONS_EXPIRATION_DELAY)}}}}}},{package:"$root$",file:"ui/hooks/useNotificationTimeouts.ts"}],[6599,{"../selectors":7345,"@metamask/permission-controller":2090,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginMetadata=function(e){const t=(0,r.useSelector)(t=>(0,o.getTargetSubjectMetadata)(t,e));if(!e)return null;let n=null;try{const t=new URL(e);n={host:t.host,hostname:t.hostname,origin:e,subjectType:a.SubjectType.Unknown}}catch(e){}if(t&&n)return{...n,...t};if(t)return t;return n};var a=e("@metamask/permission-controller"),r=e("react-redux"),o=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useOriginMetadata.js"}],[6600,{"../selectors/selectors":7361,"./useTrustSignals":6620,"@metamask/phishing-controller":2103,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginTrustSignals=function(e){let t;if(e)try{const n=new URL(e);t=n.hostname}catch(e){t=undefined}const n=(0,r.useSelector)(e=>(0,o.getUrlScanCacheResult)(e,t));return{state:i(n),label:null}};var a=e("@metamask/phishing-controller"),r=e("react-redux"),o=e("../selectors/selectors"),s=e("./useTrustSignals");function i(e){var t;const n=null==e||null===(t=e.result)||void 0===t?void 0:t.recommendedAction;if(!n)return s.TrustSignalDisplayState.Unknown;switch(n){case a.RecommendedAction.Block:return s.TrustSignalDisplayState.Malicious;case a.RecommendedAction.Warn:return s.TrustSignalDisplayState.Warning;case a.RecommendedAction.Verified:return s.TrustSignalDisplayState.Verified;case a.RecommendedAction.None:default:return s.TrustSignalDisplayState.Unknown}}}}},{package:"$root$",file:"ui/hooks/useOriginTrustSignals.ts"}],[6601,{react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("react");n.default=e=>{const t=(0,a.useRef)(null),n=(0,a.useRef)(null);let r=!1;(0,a.useEffect)(()=>{if(!1===e.enabled)return()=>{};r=!0;const a=()=>{var a;t.current&&(e.stopPollingByPollingToken(t.current),null===(a=n.current)||void 0===a||a.call(n,t.current))};return e.startPolling(e.input).then(o=>{var s;t.current=o,n.current=(null===(s=e.callback)||void 0===s?void 0:s.call(e,o))||null,r||a()}),()=>{r=!1,a()}},[e.input&&JSON.stringify(e.input),e.enabled])}}}},{package:"$root$",file:"ui/hooks/usePolling.ts"}],[6602,{react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.usePrevious=function(e){const t=(0,a.useRef)();return(0,a.useEffect)(()=>{t.current=e},[e]),t.current};var a=e("react")}}},{package:"$root$",file:"ui/hooks/usePrevious.ts"}],[6603,{"./usePrevious":6602,lodash:4362,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useScrollRequired=void 0;var a=e("react"),r=e("lodash"),o=e("./usePrevious");n.useScrollRequired=(e=[],{offsetPxFromBottom:t=16}={})=>{var n,s;const i=(0,a.useRef)(null),l=(0,o.usePrevious)(null===(n=i.current)||void 0===n?void 0:n.offsetHeight),[c,u]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),g=()=>{if(!i.current)return;const e=i.current&&i.current.scrollHeight>i.current.clientHeight,n=e&&Math.round(i.current.scrollTop)+i.current.offsetHeight+t>=i.current.scrollHeight;e!==d&&(u(!1),m(e)),f(!e||n),e&&!n||u(!0)};(0,a.useEffect)(g,[i,...e]),(0,a.useEffect)(()=>{var e;l!==(null===(e=i.current)||void 0===e?void 0:e.offsetHeight)&&g()},[null===(s=i.current)||void 0===s?void 0:s.offsetHeight]);return{isScrollable:d,isScrolledToBottom:p,hasScrolledToBottom:c,scrollToBottom:()=>{f(!0),u(!0),i.current&&i.current.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})},setHasScrolledToBottom:u,ref:i,onScroll:(0,r.debounce)(g,25)}}}}},{package:"$root$",file:"ui/hooks/useScrollRequired.js"}],[6604,{"../helpers/constants/routes":6463,"../selectors":7345,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSegmentContext=function(){const e=(0,r.useRouteMatch)({path:(0,o.getPaths)(),exact:!0,strict:!0}),t=((0,a.useSelector)(s.txDataSelector)||{}).origin,n=t?{url:t}:undefined;return{page:e?{path:e.path,title:o.PATH_NAME_MAP.get(e.path),url:e.path}:undefined,referrer:n}};var a=e("react-redux"),r=e("react-router-dom"),o=e("../helpers/constants/routes"),s=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useSegmentContext.js"}],[6605,{"../ducks/app/app":6430,"./useGasFeeEstimates":6580,lodash:4362,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldAnimateGasEstimations=function(){const{isGasEstimatesLoading:e,gasFeeEstimates:t}=(0,i.useGasFeeEstimates)(),n=(0,r.useDispatch)(),l=(0,r.useSelector)(s.getGasLoadingAnimationIsShowing),c=(0,a.useRef)(t),u=!(0,o.isEqual)(c.current,t),d=(0,o.isEqual)(c.current,{});u&&(c.current=t);const m=e||u&&!d;(0,a.useEffect)(()=>{!1===l&&!0===m&&n((0,s.toggleGasLoadingAnimation)(!0))},[n,l,m]),(0,a.useEffect)(()=>{let e;return l&&!m&&(e=setTimeout(()=>{n((0,s.toggleGasLoadingAnimation)(!1))},2e3)),()=>{e&&clearTimeout(e)}},[n,l,m])};var a=e("react"),r=e("react-redux"),o=e("lodash"),s=e("../ducks/app/app"),i=e("./useGasFeeEstimates")}}},{package:"$root$",file:"ui/hooks/useShouldAnimateGasEstimations.js"}],[6606,{"../../shared/constants/time":5277,"../../shared/modules/selectors/networks":5371,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShouldShowSpeedUp=function(e,t){const{transactions:n,hasRetried:i}=e,l=(0,r.useSelector)(s.getCurrentChainId),[c={}]=n,u=c.chainId===l,{submittedTime:d}=c,[m,p]=(0,a.useState)(()=>Date.now()-d>5e3&&t&&!i&&u);return(0,a.useEffect)(()=>{let e;return i||!t||m||(Date.now()-d>5*o.SECOND?p(!0):e=setTimeout(()=>{p(!0),clearTimeout(e)},5001-(Date.now()-d))),()=>{e&&clearTimeout(e)}},[d,m,i,t]),m};var a=e("react"),r=e("react-redux"),o=e("../../shared/constants/time"),s=e("../../shared/modules/selectors/networks")}}},{package:"$root$",file:"ui/hooks/useShouldShowSpeedUp.js"}],[6607,{"../../shared/lib/transactions-controller-utils":5344,"../../shared/modules/selectors/networks":5371,"../../shared/modules/swaps.utils":5376,"./useTokenFiatAmount":6614,"@metamask/transaction-controller":2587,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSwappedTokenValue=function(e,t){const{symbol:n,decimals:c,address:u}=t,{primaryTransaction:d,initialTransaction:m}=e,{type:p}=m,{from:f}=m.txParams||{},g=(0,a.useSelector)(i.getCurrentChainId),h=p===r.TransactionType.swap&&((null==t?void 0:t.symbol)===d.destinationTokenSymbol||(0,s.isSwapsDefaultTokenAddress)(t.address,g)&&(0,s.isSwapsDefaultTokenSymbol)(d.destinationTokenSymbol,g)),y=[r.TransactionType.swap].includes(p)&&h?(0,o.getSwapsTokensReceivedFromTxMeta)(d.destinationTokenSymbol,m,u,f,c,null,g):[r.TransactionType.swap,r.TransactionType.swapAndSend].includes(p)&&d.swapTokenValue,v="string"==typeof y&&-1===Math.sign(y),k=(0,l.useTokenFiatAmount)(u,y||"",n),b=(0,l.useTokenFiatAmount)(d.sourceTokenAddress,y,d.sourceTokenSymbol);let T;y&&(h?T=k:p===r.TransactionType.swapAndSend&&(T=b));return{swapTokenValue:y,swapTokenFiatAmount:T,isViewingReceivedTokenFromSwap:h,isNegative:v}};var a=e("react-redux"),r=e("@metamask/transaction-controller"),o=e("../../shared/lib/transactions-controller-utils"),s=e("../../shared/modules/swaps.utils"),i=e("../../shared/modules/selectors/networks"),l=e("./useTokenFiatAmount")}}},{package:"$root$",file:"ui/hooks/useSwappedTokenValue.js"}],[6608,{"../../shared/constants/preferences":5267,"../selectors":7345,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTheme=function(){const e=(0,r.useSelector)(o.getTheme),[t,n]=(0,a.useState)(e);return(0,a.useEffect)(()=>{const t=e&&e!==s.ThemeType.os?e:document.documentElement.getAttribute("data-theme");i.includes(t)||(console.warn(`useTheme: Invalid theme resolved to "${t}". Defaulting to "${s.ThemeType.light}".`),n(s.ThemeType.light)),n(t)},[e]),t};var a=e("react"),r=e("react-redux"),o=e("../selectors"),s=e("../../shared/constants/preferences");const i=Object.values(s.ThemeType).filter(e=>e!==s.ThemeType.os)}}},{package:"$root$",file:"ui/hooks/useTheme.ts"}],[6609,{react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTimeout=function(e,t,n=!0){const r=(0,a.useRef)(),[o,s]=(0,a.useState)(null);(0,a.useEffect)(()=>{r.current=e},[e]),(0,a.useEffect)(()=>{if("start"!==o)return undefined;const e=setTimeout(()=>{r.current()},t);return s(e),()=>{clearTimeout(o)}},[t,o]);const i=(0,a.useCallback)(()=>{clearTimeout(o),s("start")},[o]);n&&i();return i};var a=e("react")}}},{package:"$root$",file:"ui/hooks/useTimeout.js"}],[6610,{"../../shared/modules/conversion.utils":5354,"../ducks/metamask/metamask":6445,"../selectors/multichain/networks":7355,"../store/actions":7369,"./useMultiPolling":6588,"bn.js":3529,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyBalance=m,n.useTokenTracker=n.useTokenBalances=void 0;var a=e("react-redux"),r=u(e("bn.js")),o=e("../store/actions"),s=e("../ducks/metamask/metamask"),i=e("../../shared/modules/conversion.utils"),l=e("../selectors/multichain/networks"),c=u(e("./useMultiPolling"));function u(e){return e&&e.__esModule?e:{default:e}}const d=({chainIds:e}={})=>{const t=(0,a.useSelector)(s.getTokenBalances),n=(0,a.useSelector)(l.getEnabledChainIds),r=e&&e.length>0?e:n;return(0,c.default)({startPolling:o.tokenBalancesStartPolling,stopPollingByPollingToken:o.tokenBalancesStopPollingByPollingToken,input:[r]}),{tokenBalances:t}};n.useTokenBalances=d;function m(e,t,n=5){if(e.eq(new r.default(0)))return"0";const a=parseInt(t.toString(),10);if(0===a)return e.toString();let o=e.toString(),s=o.length,i=s-a,l="";if(i<=0){for(;l.length<=-1*i;)l+="0",s+=1;o=l+o,i=1}const c=o.substr(0,s-a);if(0===n)return c;const u=o.substr(i,n);if(/0+$/u.test(u)){let e=o.substr(i).replace(/0+$/u,"");return e.length>0&&(e=`.${e}`),`${c}${e}`}return`${c}.${u}`}n.useTokenTracker=({chainId:e,tokens:t,address:n,hideZeroBalanceTokens:a})=>{const{tokenBalances:o}=d({chainIds:[e]});return{tokensWithBalances:t.reduce((t,s)=>{var l;const c=(null===(l=o[n])||void 0===l||null===(l=l[e])||void 0===l?void 0:l[s.address])??"0x0";if("0x0"!==c||!a){const e=(0,i.hexToDecimal)(c);t.push({address:s.address,symbol:s.symbol,decimals:s.decimals,balance:e,balanceError:null,string:m(new r.default(e),new r.default(s.decimals))})}return t},[])}}}}},{package:"$root$",file:"ui/hooks/useTokenBalances.ts"}],[6611,{"../../shared/modules/transaction.utils":5377,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenData=function(e,t=!0){return(0,a.useMemo)(()=>t&&e?(0,r.parseStandardTokenTransactionData)(e):null,[t,e])};var a=e("react"),r=e("../../shared/modules/transaction.utils")}}},{package:"$root$",file:"ui/hooks/useTokenData.js"}],[6612,{"../ducks/metamask/metamask":6445,"../selectors":7345,"../selectors/multichain/networks":7355,"../store/actions":7369,"./useMultiPolling":6588,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../selectors"),s=e("../selectors/multichain/networks"),i=e("../store/actions"),l=e("../ducks/metamask/metamask"),c=(a=e("./useMultiPolling"))&&a.__esModule?a:{default:a};n.default=()=>{const e=(0,r.useSelector)(o.getUseTokenDetection),t=(0,r.useSelector)(l.getCompletedOnboarding),n=(0,r.useSelector)(l.getIsUnlocked),a=(0,r.useSelector)(o.getChainIdsToPoll),u=(0,r.useSelector)(s.getEnabledChainIds),d=t&&n&&e,m=o.isGlobalNetworkSelectorRemoved?u:a;return(0,c.default)({startPolling:i.tokenDetectionStartPolling,stopPollingByPollingToken:i.tokenDetectionStopPollingByPollingToken,input:d?[m]:[]}),{}}}}},{package:"$root$",file:"ui/hooks/useTokenDetectionPolling.ts"}],[6613,{"../../shared/lib/metamask-controller-utils":5329,"../../shared/lib/transactions-controller-utils":5344,"./useTokenData":6611,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenDisplayValue=function(e,t,n=!0){const i=(0,s.useTokenData)(e,n),l=(0,r.getTokenValueParam)(i),c=Boolean(n&&e&&t&&null!==t.decimals&&t.decimals!==undefined&&l);return(0,a.useMemo)(()=>c?(0,o.calcTokenAmount)(l,t.decimals).toString(10):null,[c,l,t])};var a=e("react"),r=e("../../shared/lib/metamask-controller-utils"),o=e("../../shared/lib/transactions-controller-utils"),s=e("./useTokenData")}}},{package:"$root$",file:"ui/hooks/useTokenDisplayValue.js"}],[6615,{"../ducks/metamask/metamask":6445,"../selectors":7345,"../selectors/multichain/networks":7355,"../selectors/selectors":7361,"../store/actions":7369,"./useMultiPolling":6588,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../selectors"),s=e("../selectors/multichain/networks"),i=e("../store/actions"),l=e("../ducks/metamask/metamask"),c=e("../selectors/selectors"),u=(a=e("./useMultiPolling"))&&a.__esModule?a:{default:a};n.default=()=>{const e=(0,r.useSelector)(o.getUseTokenDetection),t=(0,r.useSelector)(o.getUseTransactionSimulations),n=(0,r.useSelector)(l.getCompletedOnboarding),a=(0,r.useSelector)(l.getIsUnlocked),d=(0,r.useSelector)(o.getUseExternalServices),m=(0,r.useSelector)(o.getChainIdsToPoll),p=(0,r.useSelector)(s.getEnabledChainIds),f=n&&a&&d&&(e||t),g=c.isGlobalNetworkSelectorRemoved?p:m;return(0,u.default)({startPolling:i.tokenListStartPolling,stopPollingByPollingToken:i.tokenListStopPollingByPollingToken,input:f?g:[]}),{}}}}},{package:"$root$",file:"ui/hooks/useTokenListPolling.ts"}],[6616,{"../ducks/metamask/metamask":6445,"../selectors":7345,"../selectors/multichain/networks":7355,"../selectors/selectors":7361,"../store/actions":7369,"./useMultiPolling":6588,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("../selectors"),s=e("../selectors/multichain/networks"),i=e("../store/actions"),l=e("../ducks/metamask/metamask"),c=e("../selectors/selectors"),u=(a=e("./useMultiPolling"))&&a.__esModule?a:{default:a};n.default=()=>{const e=(0,r.useSelector)(l.getCompletedOnboarding),t=(0,r.useSelector)(l.getIsUnlocked),n=(0,r.useSelector)(o.getUseCurrencyRateCheck),a=(0,r.useSelector)(o.getChainIdsToPoll),d=(0,r.useSelector)(s.getEnabledChainIds),m=(0,r.useSelector)(o.getTokenExchangeRates),p=(0,r.useSelector)(o.getTokensMarketData),f=(0,r.useSelector)(o.getMarketData),g=e&&t&&n,h=c.isGlobalNetworkSelectorRemoved?d:a;return(0,u.default)({startPolling:i.tokenRatesStartPolling,stopPollingByPollingToken:i.tokenRatesStopPollingByPollingToken,input:g?[h]:[]}),{tokenExchangeRates:m,tokensMarketData:p,marketData:f}}}}},{package:"$root$",file:"ui/hooks/useTokenRatesPolling.ts"}],[6617,{"../../shared/constants/time":5277,"../../shared/modules/selectors/networks":5371,"../../shared/modules/string-utils":5375,"../selectors":7345,"./useEqualityCheck":6576,"@metamask/eth-token-tracker":1812,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenTracker=function({tokens:e,address:t,includeFailedTokens:n=!1,hideZeroBalanceTokens:a=!1}){const{chainId:m,rpcUrl:p}=(0,s.useSelector)(l.getProviderConfig),{address:f}=(0,s.useSelector)(i.getSelectedInternalAccount,s.shallowEqual),g=t??f,[h,y]=(0,r.useState)(()=>(null==e?void 0:e.length)>=0),[v,k]=(0,r.useState)([]),[b,T]=(0,r.useState)(null),x=(0,r.useRef)(null),C=(0,d.useEqualityCheck)(e),S=(0,r.useCallback)(e=>{const t=(a?e.filter(e=>Number(e.balance)>0):e).map(e=>{const t=C.find(t=>(0,u.isEqualCaseInsensitive)(t.address,e.address));return{...e,isERC721:null==t?void 0:t.isERC721,image:null==t?void 0:t.image}});k(t),y(!1),T(null)},[a,C]),w=(0,r.useCallback)(e=>{T(e),y(!1)},[]),E=(0,r.useCallback)(()=>{x.current&&(x.current.stop(),x.current.removeAllListeners("update"),x.current.removeAllListeners("error"),x.current=null)},[]),_=(0,r.useCallback)((e,t)=>{E(),x.current=new o.default({userAddress:e,provider:global.ethereumProvider,tokens:t,includeFailedTokens:n,pollingInterval:8*c.SECOND,balanceDecimals:5}),x.current.on("update",S),x.current.on("error",w),x.current.updateBalances()},[S,n,w,E]);return(0,r.useEffect)(()=>E,[E]),(0,r.useEffect)(()=>{y(!0),g&&m!==undefined&&global.ethereumProvider?(0===C.length&&S([]),_(g,C)):E()},[g,E,m,p,C,S,_]),{loading:h,tokensWithBalances:v,error:b}};var a,r=e("react"),o=(a=e("@metamask/eth-token-tracker"))&&a.__esModule?a:{default:a},s=e("react-redux"),i=e("../selectors"),l=e("../../shared/modules/selectors/networks"),c=e("../../shared/constants/time"),u=e("../../shared/modules/string-utils"),d=e("./useEqualityCheck")}}},{package:"$root$",file:"ui/hooks/useTokenTracker.js"}],[6618,{"../../shared/constants/network":5262,"../../shared/constants/swaps":5275,"../../shared/modules/hexstring-utils":5360,"../../shared/modules/selectors/networks":5371,"../../shared/modules/swaps.utils":5376,"../ducks/metamask/metamask":6445,"../ducks/swaps/swaps":6454,"../helpers/utils/token-util":6510,"../selectors":7345,"./useEqualityCheck":6576,"@metamask/assets-controllers":1076,"bignumber.js":3481,lodash:4362,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRenderableTokenData=k,n.useTokensToSearch=function({usersTokens:e=[],topTokens:t={},shuffledTokensList:n,tokenBucketPriority:a=h.TokenBucketPriority.owned}){const l=(0,o.useSelector)(d.getCurrentChainId),c=(0,o.useSelector)(u.getTokenExchangeRates,i.isEqual),g=(0,o.useSelector)(m.getConversionRate),y=(0,o.useSelector)(m.getCurrentCurrency),b=(0,o.useSelector)(u.getSwapsDefaultToken,o.shallowEqual),T=(0,o.useSelector)(u.getTokenList,i.isEqual),x=(0,v.useEqualityCheck)(t),C=(0,v.useEqualityCheck)(e),S=k(b,c,g,y,l,T),w=(0,v.useEqualityCheck)(S),E=(0,o.useSelector)(p.getSwapsTokens,i.isEqual)||[],_=E.length?E:[w,...n.filter(e=>e.symbol!==w.symbol)],I=(0,v.useEqualityCheck)(_);return(0,r.useMemo)(()=>{const e=C.reduce((e,t)=>({...e,[t.address.toLowerCase()]:t}),{}),t={owned:[],top:[],others:[]};return(0,i.uniqBy)([w,...I,...C],e=>e.address.toLowerCase()).forEach(n=>{const r=k({...e[n.address.toLowerCase()],...n},c,g,y,l,T);a===h.TokenBucketPriority.owned?(0,f.isSwapsDefaultTokenSymbol)(r.symbol,l)||e[n.address.toLowerCase()]?t.owned.push(r):x[n.address.toLowerCase()]?t.top[x[n.address.toLowerCase()].index]=r:t.others.push(r):x[n.address.toLowerCase()]?t.top[x[n.address.toLowerCase()].index]=r:(0,f.isSwapsDefaultTokenSymbol)(r.symbol,l)||e[n.address.toLowerCase()]?t.owned.push(r):t.others.push(r)}),t.owned=t.owned.sort(({rawFiat:e},{rawFiat:t})=>new s.default(e||0).gt(t||0)?-1:1),t.top=t.top.filter(Boolean),a===h.TokenBucketPriority.owned?[...t.owned,...t.top,...t.others]:[...t.top,...t.owned,...t.others]},[I,C,x,c,g,y,w,l,T,a])};var a,r=e("react"),o=e("react-redux"),s=(a=e("bignumber.js"))&&a.__esModule?a:{default:a},i=e("lodash"),l=e("@metamask/assets-controllers"),c=e("../helpers/utils/token-util"),u=e("../selectors"),d=e("../../shared/modules/selectors/networks"),m=e("../ducks/metamask/metamask"),p=e("../ducks/swaps/swaps"),f=e("../../shared/modules/swaps.utils"),g=e("../../shared/modules/hexstring-utils"),h=e("../../shared/constants/swaps"),y=e("../../shared/constants/network"),v=e("./useEqualityCheck");function k(e,t,n,a,r,o){var i,u;const{symbol:d,name:m,address:p,iconUrl:h,string:v,balance:k,decimals:b}=e;let T;(0,f.isSwapsDefaultTokenSymbol)(d,r)?T=1:v&&n>0&&(T=t[(0,g.toChecksumHexAddress)(p)]);const x=(0,c.getTokenFiatAmount)(T,n,a,v,d,!0)||"",C=x?(0,c.getTokenFiatAmount)(T,n,a,v,d,!1):"",S=r===y.CHAIN_IDS.SEPOLIA?y.CHAIN_IDS.MAINNET:r,w=(d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.MAINNET||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.SEPOLIA||d===y.CURRENCY_SYMBOLS.BNB&&r===y.CHAIN_IDS.BSC||d===y.CURRENCY_SYMBOLS.MATIC&&r===y.CHAIN_IDS.POLYGON||d===y.CURRENCY_SYMBOLS.AVALANCHE&&r===y.CHAIN_IDS.AVALANCHE||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.OPTIMISM||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.ARBITRUM||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.LINEA_MAINNET||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.ZKSYNC_ERA||d===y.CURRENCY_SYMBOLS.ETH&&r===y.CHAIN_IDS.BASE?h:(0,l.formatIconUrlWithProxy)({chainId:S,tokenAddress:p||""}))||(null==e?void 0:e.image);return{...e,primaryLabel:d,secondaryLabel:m||(null===(i=o[null==p?void 0:p.toLowerCase()])||void 0===i?void 0:i.name),rightPrimaryLabel:v&&`${new s.default(v).round(6).toString()} ${d}`,rightSecondaryLabel:x,iconUrl:w,identiconAddress:w?null:p,balance:k,decimals:b,name:m||(null===(u=o[null==p?void 0:p.toLowerCase()])||void 0===u?void 0:u.name),rawFiat:C,image:e.image||e.iconUrl}}}}},{package:"$root$",file:"ui/hooks/useTokensToSearch.js"}],[6619,{"../../shared/constants/bridge":5246,"../../shared/constants/transaction":5279,"../../shared/lib/metamask-controller-utils":5329,"../../shared/lib/transactions-controller-utils":5344,"../../shared/modules/string-utils":5375,"../ducks/bridge-status/selectors":6432,"../ducks/locale/locale":6444,"../ducks/metamask/metamask":6445,"../helpers/constants/common":6456,"../helpers/constants/transactions":6469,"../helpers/utils/common.util":6485,"../helpers/utils/token-util":6510,"../helpers/utils/transactions.util":6511,"../helpers/utils/util":6514,"../pages/bridge/hooks/useBridgeTokenDisplayData":6644,"../pages/confirmations/components/simulation-details/formatAmount":6884,"../selectors/selectors":7361,"../store/actions":7369,"./bridge/useBridgeChainInfo":6519,"./useCurrencyDisplay":6572,"./useCurrentAsset":6574,"./useI18nContext":6583,"./useSwappedTokenValue":6607,"./useTokenData":6611,"./useTokenDisplayValue":6613,"./useTokenFiatAmount":6614,"./useUserPreferencedCurrency":6621,"@metamask/transaction-controller":2587,"bignumber.js":3481,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionDisplayData=function(e){var t,n,N,R,F,j,L,$,W;const q=(0,a.useDispatch)(),U=(0,a.useSelector)(T.getIntlLocale),G=(0,O.useCurrentAsset)(),H=(0,a.useSelector)(i.getAllTokens),V=(0,a.useSelector)(i.getSelectedAddress),z=(0,a.useSelector)(f.getNfts),Q=(0,a.useSelector)(i.getAllDetectedTokens),Y=(0,a.useSelector)(i.selectERC20TokensByChain),K=(0,w.useI18nContext)(),J=e.initialTransaction.id,X=(0,a.useSelector)(e=>(0,S.selectBridgeHistoryItemForTxMetaId)(e,J)),{destNetwork:Z}=(0,D.default)({bridgeHistoryItem:X,srcTxMeta:e.initialTransaction}),ee=x.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==Z?void 0:Z.chainId],{initialTransaction:te,primaryTransaction:ne}=e,{transferInformation:ae,type:re}=te,{from:oe,to:se}=te.txParams||{},ie=[o.TransactionType.swap,o.TransactionType.bridge].includes(re)&&Boolean(X),le=(0,a.useSelector)(e=>{var t;return(0,i.getKnownMethodData)(e,null==te||null===(t=te.txParams)||void 0===t?void 0:t.data)})||{},ce=(0,l.getStatusKey)(ne),ue=ce in p.PENDING_STATUS_HASH,de=ce===o.TransactionStatus.submitted,me=(0,r.useRef)(!0),pe=null===(t=ne.txParams)||void 0===t?void 0:t.value,fe=(0,m.formatDateWithYearContext)(te.time);let ge,he="-",ye=!1,ve=se;const ke=oe,be=null==te||null===(n=te.txParams)||void 0===n?void 0:n.data,Te=p.TOKEN_CATEGORY_HASH[re];let xe=null;const[Ce,Se]=(0,r.useState)(null);var we,Ee,_e,Ie,Me,Ae;Te&&(xe=(null==H||null===(we=H[null==e||null===(Ee=e.initialTransaction)||void 0===Ee?void 0:Ee.chainId])||void 0===we||null===(we=we[V])||void 0===we?void 0:we.find(({address:e})=>(0,y.isEqualCaseInsensitive)(e,ve)))||(null==Q||null===(_e=Q[null==e||null===(Ie=e.initialTransaction)||void 0===Ie?void 0:Ie.chainId])||void 0===_e||null===(_e=_e[V])||void 0===_e?void 0:_e.find(({address:e})=>(0,y.isEqualCaseInsensitive)(e,ve)))||(null==Y||null===(Me=Y[null==e||null===(Ae=e.initialTransaction)||void 0===Ae?void 0:Ae.chainId])||void 0===Me||null===(Me=Me.data)||void 0===Me?void 0:Me[ve.toLowerCase()]));(0,r.useEffect)(()=>()=>{me.current=!1},[]),(0,r.useEffect)(()=>{!async function(){if(Te&&!xe)try{const e=await(0,d.getAssetDetails)(ve,ke,be,z);!0===me.current&&Se(e)}catch(e){console.warn("Unable to set asset details",{error:e,transactionData:be})}}()},[Te,xe,ve,ke,z,me,be]),Ce&&(xe={address:Ce.toAddress,symbol:Ce.symbol,decimals:Ce.decimals});const Pe=(0,A.useTokenData)(be,Te),Oe=(0,d.getTokenIdParam)(Pe)??(0,v.getTokenValueParam)(Pe),De=Te&&z.find(({address:e,tokenId:t})=>(0,y.isEqualCaseInsensitive)(e,ve)&&t===Oe);let Ne=(0,M.useTokenDisplayValue)(be,xe,Te);null!=ae&&ae.decimals&&(Ne=(0,C.calcTokenAmount)(ae.amount,ae.decimals).toString(10));const Be=(0,E.useTokenFiatAmount)(null===(N=xe)||void 0===N?void 0:N.address,Ne,null===(R=xe)||void 0===R?void 0:R.symbol,undefined,!0),Re=(0,m.stripHttpSchemes)(te.origin||(null===(F=te.msgParams)||void 0===F?void 0:F.origin)||"");let Fe,je,Le=Te?null===(j=xe)||void 0===j?void 0:j.symbol:undefined,$e=Te?Ne:undefined,We=Te?Be:undefined;const{swapTokenValue:qe,isNegative:Ue,swapTokenFiatAmount:Ge,isViewingReceivedTokenFromSwap:He}=(0,P.useSwappedTokenValue)(e,G),Ve=(0,k.useBridgeTokenDisplayData)(e);if(B.includes(re))Fe=g.TransactionGroupCategory.signatureRequest,je=K("signatureRequest"),ge=Re,ye=!0;else if(re===o.TransactionType.swap){Fe=g.TransactionGroupCategory.swap,je=K("swapTokenToToken",[Ve.sourceTokenSymbol??te.sourceTokenSymbol,Ve.destinationTokenSymbol??te.destinationTokenSymbol]),ge=Re,ye=!0;const e=Ve.sourceTokenSymbol??te.sourceTokenSymbol;Le=He?G.symbol:e;const t=Ve.sourceTokenAmountSent??qe;$e=t?(0,b.formatAmount)(U,new s.default(t)):undefined,We=Ve.displayCurrencyAmount??Ge,he=Ue?"":He?"+":"-"}else if(re===o.TransactionType.swapAndSend){const e=te.swapAndSendRecipient===ke;ve=te.swapAndSendRecipient,Fe=g.TransactionGroupCategory.swapAndSend,je=K("sentTokenAsToken",[te.sourceTokenSymbol,te.destinationTokenSymbol]),ge=Re,ye=!0,Le=He&&e?G.symbol:te.sourceTokenSymbol,$e=qe,We=Ge,he=Ue?"":He&&e?"+":"-"}else if(re===o.TransactionType.swapApproval)Fe=g.TransactionGroupCategory.approval,je=K("swapApproval",[Ve.sourceTokenSymbol??ne.sourceTokenSymbol]),ge=Re,ye=!0,Le=Ve.sourceTokenSymbol??ne.sourceTokenSymbol;else if(re===o.TransactionType.tokenMethodApprove){var ze;Fe=g.TransactionGroupCategory.approval,he="",je=K("approveSpendingCap",[(null===(ze=xe)||void 0===ze?void 0:ze.symbol)||K("token").toLowerCase()]),ge=Re,ye=!0}else if(re===o.TransactionType.tokenMethodSetApprovalForAll){var Qe,Ye,Ke;const e=!(null!=Pe&&null!==(Qe=Pe.args)&&void 0!==Qe&&Qe[1]);Fe=g.TransactionGroupCategory.approval,he="",je=e?K("revokePermissionTitle",[(null===(Ye=xe)||void 0===Ye?void 0:Ye.symbol)||(null==De?void 0:De.name)||K("token")]):K("setApprovalForAllTitle",[(null===(Ke=xe)||void 0===Ke?void 0:Ke.symbol)||K("token")]),ge=Re,ye=!0}else if(re===o.TransactionType.tokenMethodIncreaseAllowance){var Je;Fe=g.TransactionGroupCategory.approval,he="",je=K("approveIncreaseAllowance",[(null===(Je=xe)||void 0===Je?void 0:Je.symbol)||K("token")]),ge=Re,ye=!0}else if(re===o.TransactionType.contractInteraction||re===o.TransactionType.batch||re===o.TransactionType.revokeDelegation){Fe=g.TransactionGroupCategory.interaction;const e=(0,l.getTransactionTypeTitle)(K,re);je=(null==le?void 0:le.name)&&(0,c.camelCaseToCapitalize)(le.name)||e,ge=Re,ye=!0}else if(re===o.TransactionType.deployContract)Fe=g.TransactionGroupCategory.interaction,je=(0,l.getTransactionTypeTitle)(K,re),ge=Re,ye=!0;else if(re===o.TransactionType.incoming)Fe=g.TransactionGroupCategory.receive,je=K("received"),he="",ge=K("fromAddress",[(0,m.shortenAddress)(ke)]);else if(re===o.TransactionType.tokenMethodTransferFrom||re===o.TransactionType.tokenMethodTransfer){var Xe;Fe=g.TransactionGroupCategory.send,je=K("sentSpecifiedTokens",[(null===(Xe=xe)||void 0===Xe?void 0:Xe.symbol)||(null==De?void 0:De.name)||K("token")]),ve=(0,d.getTokenAddressParam)(Pe),ge=K("toAddress",[(0,m.shortenAddress)(ve)])}else re===o.TransactionType.tokenMethodSafeTransferFrom?(Fe=g.TransactionGroupCategory.send,je=K("safeTransferFrom"),ve=(0,d.getTokenAddressParam)(Pe),ge=K("toAddress",[(0,m.shortenAddress)(ve)])):re===o.TransactionType.simpleSend?(Fe=g.TransactionGroupCategory.send,je=K("sent"),ge=K("toAddress",[(0,m.shortenAddress)(ve)])):re===o.TransactionType.bridgeApproval?(Fe=g.TransactionGroupCategory.approval,je=K("bridgeApproval",[Ve.sourceTokenSymbol]),ge=Re,ye=!0,Le=Ve.sourceTokenSymbol):re===o.TransactionType.bridge?(je=ee?K("bridgedToChain",[ee]):K("bridged"),Fe=Ve.category,Le=Ve.sourceTokenSymbol,$e=(0,b.formatAmount)(U,new s.default(Ve.sourceTokenAmountSent??0)),We=Ve.displayCurrencyAmount):q((0,h.captureSingleException)(`useTransactionDisplayData does not recognize transaction type. Type received is: ${re}`));const Ze=je,et=(0,_.useUserPreferencedCurrency)(u.PRIMARY,{},null==e||null===(L=e.initialTransaction)||void 0===L?void 0:L.chainId),tt=(0,_.useUserPreferencedCurrency)(u.SECONDARY),[nt]=(0,I.useCurrencyDisplay)(pe,{prefix:he,displayValue:$e,suffix:Le,...et},null==e||null===($=e.initialTransaction)||void 0===$?void 0:$.chainId),[at]=(0,I.useCurrencyDisplay)(pe,{prefix:he,displayValue:ie?Ve.displayCurrencyAmount:We,hideLabel:Te||Boolean(qe),...tt},null==e||null===(W=e.initialTransaction)||void 0===W?void 0:W.chainId);!ve&&ae&&(ve=se);return{title:je,category:Fe,date:fe,subtitle:ge,subtitleContainsOrigin:ye,primaryCurrency:re===o.TransactionType.swap&&ue?"":nt,senderAddress:ke,recipientAddress:ve,secondaryCurrency:Te&&!Be||!ie&&[o.TransactionType.swap,o.TransactionType.swapAndSend].includes(re)&&!Ge||ie&&!at?undefined:at,displayedStatusKey:ce,isPending:ue,isSubmitted:de,detailsTitle:Ze}};var a=e("react-redux"),r=e("react"),o=e("@metamask/transaction-controller"),s=N(e("bignumber.js")),i=e("../selectors/selectors"),l=e("../helpers/utils/transactions.util"),c=e("../helpers/utils/common.util"),u=e("../helpers/constants/common"),d=e("../helpers/utils/token-util"),m=e("../helpers/utils/util"),p=e("../helpers/constants/transactions"),f=e("../ducks/metamask/metamask"),g=e("../../shared/constants/transaction"),h=e("../store/actions"),y=e("../../shared/modules/string-utils"),v=e("../../shared/lib/metamask-controller-utils"),k=e("../pages/bridge/hooks/useBridgeTokenDisplayData"),b=e("../pages/confirmations/components/simulation-details/formatAmount"),T=e("../ducks/locale/locale"),x=e("../../shared/constants/bridge"),C=e("../../shared/lib/transactions-controller-utils"),S=e("../ducks/bridge-status/selectors"),w=e("./useI18nContext"),E=e("./useTokenFiatAmount"),_=e("./useUserPreferencedCurrency"),I=e("./useCurrencyDisplay"),M=e("./useTokenDisplayValue"),A=e("./useTokenData"),P=e("./useSwappedTokenValue"),O=e("./useCurrentAsset"),D=N(e("./bridge/useBridgeChainInfo"));function N(e){return e&&e.__esModule?e:{default:e}}const B=[null,undefined,o.TransactionType.sign,o.TransactionType.personalSign,o.TransactionType.signTypedData,o.TransactionType.ethDecrypt,o.TransactionType.ethGetEncryptionPublicKey]}}},{package:"$root$",file:"ui/hooks/useTransactionDisplayData.js"}],[6620,{"../../app/scripts/lib/trust-signals/types":236,"../selectors":7345,"@metamask/name-controller":2014,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrustSignalDisplayState=void 0,n.useTrustSignal=function(e,t){return l([{value:e,type:t}])[0]},n.useTrustSignals=l;var a=e("react-redux"),r=e("@metamask/name-controller"),o=e("../selectors"),s=e("../../app/scripts/lib/trust-signals/types");let i=n.TrustSignalDisplayState=function(e){return e.Loading="loading",e.Malicious="malicious",e.Petname="petname",e.Verified="verified",e.Warning="warning",e.Recognized="recognized",e.Unknown="unknown",e}({});function l(e){return(0,a.useSelector)(t=>e.map(({value:e,type:n})=>{if(n!==r.NameType.ETHEREUM_ADDRESS)return{state:i.Unknown,label:null};const a=(0,o.getAddressSecurityAlertResponse)(t,e);if(!a)return{state:i.Unknown,label:null};const l=a.label||null,c=function(e){if(!e.result_type)return i.Unknown;switch(e.result_type){case s.ResultType.Loading:return i.Loading;case s.ResultType.Malicious:return i.Malicious;case s.ResultType.Warning:return i.Warning;case s.ResultType.Trusted:return i.Verified;case s.ResultType.Benign:case s.ResultType.ErrorResult:default:return i.Unknown}}(a);return{state:c,label:l}}))}}}},{package:"$root$",file:"ui/hooks/useTrustSignals.ts"}],[6621,{"../../shared/constants/common":5247,"../../shared/constants/network":5262,"../constants":6413,"../helpers/constants/common":6456,"../selectors":7345,"../selectors/multichain":7354,"./useMultichainSelector":6592,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUserPreferencedCurrency=function(e,t={},n=null){const d=(0,a.useSelector)(r.getSelectedInternalAccount),m=t.account??d,p=(0,u.useMultichainSelector)(o.getMultichainNativeCurrency,m),{showNativeTokenAsMainBalance:f}=(0,a.useSelector)(r.getPreferences,a.shallowEqual),g=(0,u.useMultichainSelector)(o.getMultichainShouldShowFiat,m),h={currency:(0,u.useMultichainSelector)(o.getMultichainCurrentCurrency,m),numberOfDecimals:t.numberOfDecimals||2},y={currency:n?c.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[n]||p||i.EtherDenomination.ETH:p||i.EtherDenomination.ETH,numberOfDecimals:t.numberOfDecimals||t.ethNumberOfDecimals||l.ETH_DEFAULT_DECIMALS};if(t.showNativeOverride)return y;if(t.showFiatOverride)return h;if(!g)return y;if(t.shouldCheckShowNativeToken&&f||!t.shouldCheckShowNativeToken)return e===s.PRIMARY?y:h;return e===s.PRIMARY?h:y};var a=e("react-redux"),r=e("../selectors"),o=e("../selectors/multichain"),s=e("../helpers/constants/common"),i=e("../../shared/constants/common"),l=e("../constants"),c=e("../../shared/constants/network"),u=e("./useMultichainSelector")}}},{package:"$root$",file:"ui/hooks/useUserPreferencedCurrency.js"}],[6622,{react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useWindowFocus=void 0;var a=e("react");n.useWindowFocus=()=>{const[e,t]=(0,a.useState)(document.hasFocus());return(0,a.useEffect)(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("focus",e),window.addEventListener("blur",n),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",n)}},[]),e}}}},{package:"$root$",file:"ui/hooks/useWindowFocus.ts"}],[6623,{"../app/scripts/constants/sentry-state":7,"../app/scripts/lib/util":237,"../shared/constants/alerts":5242,"../shared/constants/app":5244,"../shared/constants/copy":5248,"../shared/lib/error-utils":5323,"../shared/lib/promise-with-resolvers":5335,"../shared/lib/sentry":5336,"../shared/lib/switch-direction":5340,"../shared/lib/trace":5342,"../shared/modules/object.utils":5365,"../shared/modules/selectors/networks":5371,"./constants":6413,"./ducks/alerts":6427,"./ducks/metamask/metamask":6445,"./helpers/utils/critical-startup-error-handler":6487,"./helpers/utils/display-critical-error":6488,"./helpers/utils/tags":6509,"./helpers/utils/tx-helper":6513,"./pages":7075,"./selectors":7345,"./store/actions":7369,"./store/background-connection":7370,"./store/store":7374,"@metamask/chain-agnostic-permission":1204,"copy-to-clipboard":3659,loglevel:4370,react:4789,"react-dom":4683,"webextension-polyfill":5227},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CriticalErrorTranslationKey",{enumerable:!0,get:function(){return P.CriticalErrorTranslationKey}}),Object.defineProperty(n,"CriticalStartupErrorHandler",{enumerable:!0,get:function(){return A.CriticalStartupErrorHandler}}),n.connectToBackground=void 0,n.default=async function(e){const{backgroundConnection:t,traceContext:n}=e,a=await(0,v.trace)({name:v.TraceName.GetState,parentContext:n},t.getState.bind(t)),i=await async function(e,t){const{traceContext:n}=t,a=(0,I.getStartupTraceTags)({metamask:e}),i=await(0,v.trace)({name:v.TraceName.SetupStore,parentContext:n,tags:a},()=>B(e,t.activeTab));return global.metamask={updateCurrentLocale:e=>{i.dispatch(b.updateCurrentLocale(e))},setFeatureFlag:(e,t)=>{i.dispatch(b.setFeatureFlag(e,t))}},await(0,v.trace)({name:v.TraceName.InitialActions,parentContext:n},()=>async function(e){const t=e.getState(),n=(0,x.getNetworkToAutomaticallySwitchTo)(t);n&&await e.dispatch(b.automaticallySwitchNetwork(n));if((0,u.getEnvironmentType)()===f.ENVIRONMENT_TYPE_POPUP){const t=Date.now();global.metamask.id=t,await e.dispatch(b.setCurrentExtensionPopupId(t))}try{const n=async t=>{(0,S.getIsUnlocked)(t)&&await e.dispatch(b.checkIsSeedlessPasswordOutdated())};await n(t),setInterval(()=>{const t=e.getState();n(t)},M.SEEDLESS_PASSWORD_OUTDATED_CHECK_INTERVAL_MS)}catch(e){r.default.error("[Metamask] checkIsSeedlessPasswordOutdated error",e)}}(i)),(0,v.trace)({name:v.TraceName.FirstRender,parentContext:n},()=>(0,s.render)(o.default.createElement(w.default,{store:i}),t.container)),i}(a,e);return await t.startPatches(),function(e){0;window.stateHooks.getCleanAppState=async function(){return R(e)},window.stateHooks.getSentryAppState=function(){const t=e.getState();return(0,m.maskObject)(t,p.SENTRY_UI_STATE)},window.stateHooks.getLogs=function(){const t=e.getState(),{logs:n}=t.metamask;return Object.values(n).sort((e,t)=>e.timestamp-t.timestamp)}}(i),i},Object.defineProperty(n,"displayCriticalError",{enumerable:!0,get:function(){return P.displayCriticalError}}),n.getCleanAppState=R,n.setupInitialStore=B;var a=D(e("copy-to-clipboard")),r=D(e("loglevel")),o=D(e("react")),s=e("react-dom"),i=D(e("webextension-polyfill")),l=e("@metamask/chain-agnostic-permission"),c=(e("../shared/lib/sentry"),e("../shared/lib/promise-with-resolvers")),u=e("../app/scripts/lib/util"),d=e("../shared/constants/alerts"),m=e("../shared/modules/object.utils"),p=e("../app/scripts/constants/sentry-state"),f=e("../shared/constants/app"),g=e("../shared/constants/copy"),h=e("../shared/lib/switch-direction"),y=e("../shared/lib/error-utils"),v=e("../shared/lib/trace"),k=e("../shared/modules/selectors/networks"),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("./store/actions")),T=D(e("./store/store")),x=e("./selectors"),C=e("./ducks/alerts"),S=e("./ducks/metamask/metamask"),w=D(e("./pages")),E=D(e("./helpers/utils/tx-helper")),_=e("./store/background-connection"),I=e("./helpers/utils/tags"),M=e("./constants"),A=e("./helpers/utils/critical-startup-error-handler"),P=e("./helpers/utils/display-critical-error");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function D(e){return e&&e.__esModule?e:{default:e}}r.default.setLevel(global.METAMASK_DEBUG?"debug":"warn",!1);const N=(0,c.withResolvers)();async function B(e,t){e.featureFlags||(e.featureFlags={});const{currentLocaleMessages:n,enLocaleMessages:a}=await(0,y.setupLocale)(e.currentLocale);"rtl"===e.textDirection&&(0,h.switchDirection)("rtl");const r={activeTab:t,metamask:e,appState:{},localeMessages:{currentLocale:e.currentLocale,current:n,en:a}};if((0,u.getEnvironmentType)()===f.ENVIRONMENT_TYPE_POPUP){const{origin:e}=r.activeTab,t=(0,x.getAllPermittedAccountsForCurrentTab)(r),n=(0,x.getSelectedInternalAccount)(r),a=n&&(0,l.isInternalAccountInPermittedAccountIds)(n,t),o=(0,S.getUnconnectedAccountAlertShown)(r),s=(0,S.getUnconnectedAccountAlertEnabledness)(r);e&&s&&!o[e]&&t.length>0&&!a&&(r[d.AlertTypes.unconnectedAccount]={state:C.ALERT_STATE.OPEN},b.setUnconnectedAccountAlertShown(e))}const o=(0,T.default)(r);N.resolve(o);const s=(0,x.getUnapprovedTransactions)(e),i=(0,E.default)(s,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.networkId,(0,k.getCurrentChainId)({metamask:e}));return i.length>0&&o.dispatch(b.showConfTxPage({id:i[0].id})),o}async function R(e){const t={...e.getState()};return t.version=global.platform.getVersion(),t.browser=window.navigator.userAgent,t.metamask={...t.metamask,socialLoginEmail:undefined},t}n.connectToBackground=(e,t)=>{(0,_.setBackgroundConnection)(e),e.onNotification(async e=>{const{method:n}=e;if("sendUpdate"===n){(await N.promise).dispatch(b.updateMetamaskState(e.params[0]))}else{if("startUISync"!==n)throw new Error(`Internal JSON-RPC Notification Not Handled:\n\n ${JSON.stringify(e)}`);await t()}})},window.logStateString=async function(e){const t=await window.stateHooks.getCleanAppState(),n=window.stateHooks.getLogs();i.default.runtime.getPlatformInfo().then(a=>{t.platform=a,t.logs=n;const r=JSON.stringify(t,null,2);e(null,r)}).catch(t=>{e(t)})},window.logState=function(e){return window.logStateString((t,n)=>{t?console.error(t.message):e?((0,a.default)(n,g.COPY_OPTIONS),console.log("State log copied")):console.log(n)})}}}},{package:"$root$",file:"ui/index.js"}],[6624,{"../../../shared/modules/string-utils":5375,"../../components/app/assets/nfts/nft-details/nft-details":5440,"../../ducks/metamask/metamask":6445,"../../helpers/constants/routes":6463,"../../selectors/assets":7338,"./components/native-asset":6634,"./components/token-asset":6635,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("../../../shared/modules/string-utils"),i=p(e("../../components/app/assets/nfts/nft-details/nft-details")),l=e("../../ducks/metamask/metamask"),c=e("../../helpers/constants/routes"),u=e("../../selectors/assets"),d=p(e("./components/native-asset")),m=p(e("./components/token-asset"));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,o.useParams)(),{chainId:t,asset:n,id:p}=e,f=n?decodeURIComponent(n):undefined,g=(0,r.useSelector)(e=>(0,l.getNFTsByChainId)(e,t)),h=(0,r.useSelector)(e=>(0,u.getTokenByAccountAndAddressAndChainId)(e,undefined,f,t)),y=g.find(({address:e,tokenId:t})=>(0,s.isEqualCaseInsensitive)(e,f)&&p===t.toString());(0,a.useEffect)(()=>{const e=document.querySelector(".app");null==e||e.scroll(0,0)},[]);const v=(()=>{if(y)return a.default.createElement(i.default,{nft:y});if(!h||!t)return a.default.createElement(o.Redirect,{to:{pathname:c.DEFAULT_ROUTE}});return!h.isNative&&h.address?a.default.createElement(m.default,{chainId:t,token:h}):a.default.createElement(d.default,{chainId:t,token:h})})();return a.default.createElement("div",{className:"main-container asset__container"},v)}}}},{package:"$root$",file:"ui/pages/asset/asset.tsx"}],[6625,{"../../../../app/scripts/lib/util":237,"../../../../shared/constants/transaction":5279,"../../../../shared/lib/asset-utils":5288,"../../../components/component-library":5919,"../../../ducks/metamask/metamask":6445,"../../../helpers/constants/design-system":6458,"../../../helpers/utils/confirm-tx.util":6486,"../../../hooks/useI18nContext":6583,"../../../hooks/useMultichainSelector":6592,"../../../selectors/assets":7338,"../../../selectors/multichain":7354,"../../../selectors/selectors":7361,"../util":6641,"bignumber.js":3481,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetMarketDetails=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("react-redux"),s=e("bignumber.js"),i=e("../../../helpers/utils/confirm-tx.util"),l=e("../util"),c=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=e("../../../hooks/useI18nContext"),m=e("../../../ducks/metamask/metamask"),p=e("../../../hooks/useMultichainSelector"),f=e("../../../selectors/multichain"),g=e("../../../selectors/assets"),h=e("../../../selectors/selectors"),y=e("../../../../shared/constants/transaction"),v=e("../../../../app/scripts/lib/util"),k=e("../../../../shared/lib/asset-utils");function b(e,t){return r.default.createElement(c.Box,{display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween},r.default.createElement(c.Text,{color:u.TextColor.textAlternative,variant:u.TextVariant.bodyMdMedium},e),t)}n.AssetMarketDetails=({asset:e,address:t})=>{var n,a,T,x,C;const S=(0,d.useI18nContext)(),w=(0,o.useSelector)(m.getCurrentCurrency),E=(0,p.useMultichainSelector)(f.getMultichainConversionRate),_=(0,o.useSelector)(h.getMarketData),I=(0,o.useSelector)(h.getCurrencyRates),M=(0,o.useSelector)(g.getAssetsRates),A=(0,k.isEvmChainId)(e.chainId),P=(0,p.useMultichainSelector)(f.getMultichainNativeCurrency),{type:O,symbol:D,chainId:N}=e,B=O===y.AssetType.native?null===(n=I[D])||void 0===n?void 0:n.conversionRate:(null===(a=I[P])||void 0===a?void 0:a.conversionRate)||0,R=(null==M||null===(T=M[t])||void 0===T?void 0:T.rate)||0,F=A?B:R,j=(0,v.getConversionRatesForNativeAsset)({conversionRates:M,chainId:N}),L=O===y.AssetType.native?null==j?void 0:j.marketData:null==M||null===(x=M[t])||void 0===x?void 0:x.marketData,$=A?null===(C=_[N])||void 0===C?void 0:C[t]:L;if(!(E>0&&$&&($.marketCap>0||$.totalVolume>0||$.circulatingSupply>0||$.allTimeHigh>0||$.allTimeLow>0)))return null;const W=e=>e?new s.BigNumber("string"==typeof e?e:e.toString()).toNumber():0;let q=W($.marketCap),U=W($.totalVolume),G=W($.circulatingSupply),H=W($.allTimeHigh),V=W($.allTimeLow);return A&&(q*=F,U*=F,G*=F,H*=F,V*=F),r.default.createElement(c.Box,null,r.default.createElement(c.Box,{marginBottom:2,borderColor:u.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),r.default.createElement(c.Text,{variant:u.TextVariant.headingSm,paddingInline:4,paddingTop:2,paddingBottom:2},S("marketDetails")),r.default.createElement(c.Box,{paddingInline:4,display:u.Display.Flex,flexDirection:u.FlexDirection.Column,gap:2},q>0&&b(S("marketCap"),r.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium,"data-testid":"asset-market-cap"},(0,l.localizeLargeNumber)(S,q))),U>0&&b(S("totalVolume"),r.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},(0,l.localizeLargeNumber)(S,U))),G>0&&b(S("circulatingSupply"),r.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},(0,l.localizeLargeNumber)(S,G))),H>0&&b(S("allTimeHigh"),r.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},(0,i.formatCurrency)(`${H}`,w,(0,l.getPricePrecision)(H)))),V>0&&b(S("allTimeLow"),r.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},(0,i.formatCurrency)(`${V}`,w,(0,l.getPricePrecision)(V))))))}}}},{package:"$root$",file:"ui/pages/asset/components/asset-market-details.tsx"}],[6626,{"../../../components/component-library":5919,"../../../components/ui/menu":6357,"../../../contexts/i18n":6416,"../../../helpers/constants/design-system":6458,"../../../helpers/constants/routes":6463,"../../../selectors":7345,"prop-types":4605,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=(a=e("prop-types"))&&a.__esModule?a:{default:a},s=e("react-router-dom"),i=e("react-redux"),l=e("../../../contexts/i18n"),c=e("../../../components/ui/menu"),u=e("../../../selectors"),d=e("../../../helpers/constants/routes"),m=e("../../../components/component-library"),p=e("../../../helpers/constants/design-system");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const g=({onRemove:e,onClickBlockExplorer:t,onViewTokenDetails:n,tokenSymbol:a,isNativeAsset:o,isEvm:f})=>{const g=(0,r.useContext)(l.I18nContext),[h,y]=(0,r.useState)(!1),v=(0,s.useHistory)(),k=(0,i.useSelector)(u.getBlockExplorerLinkText),b=(0,r.useRef)(!1),T=f&&!o;return r.default.createElement("div",{ref:b},r.default.createElement(m.ButtonIcon,{className:"asset-options__button","data-testid":"asset-options__button",onClick:()=>y(!0),ariaLabel:g("assetOptions"),iconName:m.IconName.MoreVertical,color:p.Color.textDefault,size:m.ButtonIconSize.Sm}),h?r.default.createElement(c.Menu,{anchorElement:b.current,onHide:()=>y(!1)},r.default.createElement(c.MenuItem,{iconName:m.IconName.Export,"data-testid":"asset-options__etherscan",onClick:"addBlockExplorer"===k.firstPart?()=>{v.push(`${d.NETWORKS_ROUTE}#blockExplorerUrl`)}:()=>{y(!1),t()}},g(k.firstPart,""===k.secondPart?null:[g("blockExplorerAssetAction")])),T&&r.default.createElement(c.MenuItem,{iconName:m.IconName.Trash,"data-testid":"asset-options__hide",onClick:()=>{y(!1),e()}},g("hideTokenSymbol",[a])),o||!n?null:r.default.createElement(c.MenuItem,{iconName:m.IconName.Info,"data-testid":"asset-options__token-details",onClick:()=>{y(!1),n()}},g("tokenDetails"))):null)};g.propTypes={isNativeAsset:o.default.bool,isEvm:o.default.bool,onClickBlockExplorer:o.default.func.isRequired,onRemove:e=>{if(!1===e.isNativeAsset&&"function"!=typeof e.onRemove)throw new Error("When isNativeAsset is true, onRemove is a required prop")},onViewTokenDetails:o.default.func,tokenSymbol:e=>{if(!1===e.isNativeAsset&&"string"!=typeof e.tokenSymbol)throw new Error("When isNativeAsset is true, tokenSymbol is a required prop")}};n.default=g}}},{package:"$root$",file:"ui/pages/asset/components/asset-options.js"}],[6627,{"../../../../shared/constants/transaction":5279,"../../../../shared/lib/asset-utils":5288,"../../../../shared/lib/trace":5342,"../../../../shared/modules/conversion.utils":5354,"../../../../shared/modules/hexstring-utils":5360,"../../../components/app/assets/hooks/useMultichainAssets":5431,"../../../components/app/assets/token-cell":5455,"../../../components/app/assets/util/calculateTokenBalance":5459,"../../../components/app/transaction-list":5832,"../../../components/app/transaction-list/unified-transaction-list.component":5835,"../../../components/app/wallet-overview/coin-buttons":5842,"../../../components/component-library":5919,"../../../components/multichain":6142,"../../../ducks/metamask/metamask":6445,"../../../ducks/ramps":6447,"../../../helpers/constants/design-system":6458,"../../../helpers/constants/routes":6463,"../../../helpers/utils/portfolio":6505,"../../../hooks/useI18nContext":6583,"../../../hooks/useMultichainSelector":6592,"../../../hooks/useTokenBalances":6610,"../../../selectors":7345,"../../../selectors/assets":7338,"../../../selectors/multichain":7354,"../../../selectors/multichain-accounts/account-tree":7349,"../../settings/networks-tab/networks-form/use-safe-chains":7232,"../hooks/useCurrentPrice":6638,"./asset-market-details":6625,"./chart/asset-chart":6631,"./token-buttons":6636,"@metamask/assets-controllers":1076,"@metamask/bridge-controller":1147,"@metamask/keyring-api":1914,"@metamask/utils":2632,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/assets-controllers"),r=e("@metamask/bridge-controller"),o=e("@metamask/keyring-api"),s=e("@metamask/utils"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=W(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),l=e("react-redux"),c=e("react-router-dom"),u=e("../../../../shared/constants/transaction"),d=e("../../../../shared/lib/asset-utils"),m=e("../../../../shared/lib/trace"),p=e("../../../../shared/modules/conversion.utils"),f=e("../../../../shared/modules/hexstring-utils"),g=$(e("../../../components/app/assets/hooks/useMultichainAssets")),h=$(e("../../../components/app/assets/token-cell")),y=e("../../../components/app/assets/util/calculateTokenBalance"),v=$(e("../../../components/app/transaction-list")),k=$(e("../../../components/app/transaction-list/unified-transaction-list.component")),b=$(e("../../../components/app/wallet-overview/coin-buttons")),T=e("../../../components/component-library"),x=e("../../../components/multichain"),C=e("../../../ducks/metamask/metamask"),S=e("../../../ducks/ramps"),w=e("../../../helpers/constants/design-system"),E=e("../../../helpers/constants/routes"),_=e("../../../helpers/utils/portfolio"),I=e("../../../hooks/useI18nContext"),M=e("../../../hooks/useMultichainSelector"),A=e("../../../hooks/useTokenBalances"),P=e("../../../selectors"),O=e("../../../selectors/assets"),D=e("../../../selectors/multichain"),N=e("../../../selectors/multichain-accounts/account-tree"),B=e("../../settings/networks-tab/networks-form/use-safe-chains"),R=e("../hooks/useCurrentPrice"),F=e("./asset-market-details"),j=$(e("./chart/asset-chart")),L=$(e("./token-buttons"));function $(e){return e&&e.__esModule?e:{default:e}}function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(W=function(e){return e?n:t})(e)}function q(e,t){return i.default.createElement(T.Box,{display:w.Display.Flex,justifyContent:w.JustifyContent.spaceBetween},i.default.createElement(T.Text,{color:w.TextColor.textAlternative,variant:w.TextVariant.bodyMdMedium},e),i.default.createElement(T.Text,{variant:w.TextVariant.bodyMdMedium},t))}n.default=({asset:e,optionsButton:t})=>{var n;const $=(0,I.useI18nContext)(),W=(0,c.useHistory)(),U=(0,l.useSelector)(C.getCurrentCurrency),G=(0,l.useSelector)(S.getIsNativeTokenBuyable),H=(0,d.isEvmChainId)(e.chainId),V=(0,l.useSelector)(O.getMultichainNativeAssetType),z=(0,l.useSelector)(P.getIsMultichainAccountsState2Enabled),Q=(0,l.useSelector)(O.getAssetsBySelectedAccountGroup),Y=(0,s.isCaipChainId)(e.chainId)?e.chainId:(0,r.formatChainIdToCaip)(e.chainId),K=(0,l.useSelector)(e=>(0,N.getInternalAccountBySelectedAccountGroupAndCaip)(e,Y));(0,i.useEffect)(()=>{(0,m.endTrace)({name:m.TraceName.AssetDetails})},[]);const{chainId:J,type:X,symbol:Z,name:ee,image:te,decimals:ne}=e,ae=X===u.AssetType.native,re=(0,l.useSelector)(e=>(0,P.getIsSwapsChain)(e,J)),oe=(0,l.useSelector)(e=>(0,P.getIsBridgeChain)(e,J)),se=K.methods.includes(o.EthMethod.SignTransaction)||K.methods.includes(o.EthMethod.SignUserOperation)||K.methods.includes(o.SolMethod.SignTransaction)||K.methods.includes(o.BtcMethod.SignPsbt),ie=(0,M.useMultichainSelector)(D.getMultichainIsTestnet),le=(0,M.useMultichainSelector)(D.getMultichainShouldShowFiat),ce=!ie,ue=(0,l.useSelector)(P.getShowFiatInTestnets),de=le&&(ce||ie&&ue),me=(0,l.useSelector)(P.getSelectedAccountNativeTokenCachedBalanceByChainId),{tokenBalances:pe}=(0,A.useTokenBalances)({chainIds:[J]}),fe=pe[K.address],ge=(0,g.default)().filter(e=>e.chainId===J&&e.address!==undefined).find(t=>{switch(X){case u.AssetType.native:return t.isNative;case u.AssetType.token:return t.address===e.address;default:return!1}})??{address:"",chainId:"",symbol:"",title:"",image:"",tokenFiatAmount:0,string:"",decimals:0,aggregators:[],isNative:!1,primary:"",secondary:0},he=(0,l.useSelector)(P.getParticipateInMetaMetrics),ye=(0,l.useSelector)(P.getDataCollectionForMarketing),ve=(0,l.useSelector)(P.getMetaMetricsId);let ke=(X===u.AssetType.token?H?(0,f.toChecksumHexAddress)(e.address):e.address:H?(0,a.getNativeTokenAddress)(J):V)??"";const be=X===u.AssetType.token,Te=be?H?(0,f.toChecksumHexAddress)(e.address):(0,s.parseCaipAssetType)(ke).assetReference:"",{currentPrice:xe}=(0,R.useCurrentPrice)(e);let Ce,Se,we;if(z){var Ee,_e;const t=null===(Ee=Q[J])||void 0===Ee?void 0:Ee.find(e=>e.assetId.toLowerCase()===ke.toLowerCase()||!ke&&!H&&e.isNative);we=(null==t?void 0:t.assetId)||"",ke=(null==t?void 0:t.assetId)||"",Ce=(null==t?void 0:t.balance)??"0",Se=(null==t||null===(_e=t.fiat)||void 0===_e?void 0:_e.balance)??0;const n=null==t?void 0:t.rawBalance;e.balance={value:(0,p.hexToDecimal)(n),display:Ce,fiat:String(Se)}}else{var Ie;const t=null==fe||null===(Ie=fe[J])||void 0===Ie?void 0:Ie[ke];Ce=(0,y.calculateTokenBalance)({isNative:ae,chainId:J,address:ke,decimals:ne,nativeBalances:me,selectedAccountTokenBalancesAcrossChains:fe}),Se=xe?xe*parseFloat(String(Ce)):0,e.balance={value:(0,p.hexToDecimal)(t),display:String(Ce),fiat:String(Se)}}const Me=H,Ae=(0,i.useMemo)(()=>(0,_.getPortfolioUrl)("","asset_page",ve,he,ye,K.address,"spending-caps"),[K.address,ye,he,ve]),Pe=null===(n=(0,l.useSelector)(D.getMultichainNetworkConfigurationsByChainId)[J])||void 0===n?void 0:n.name,Oe=(0,D.getImageForChainId)(J),De=H||z?{address:H?ke:we,chainId:J,symbol:Z,image:te,title:ee??Z,tokenFiatAmount:de?Se:null,string:Ce?Ce.toString():"",decimals:e.decimals,aggregators:X===u.AssetType.token&&e.aggregators?e.aggregators:[],isNative:X===u.AssetType.native,primary:Ce?Ce.toString():"",secondary:Ce?Number(Ce):0}:ge,{safeChains:Ne}=(0,B.useSafeChains)(),Be=(0,l.useSelector)(P.getIsMultichainAccountsState2Enabled);return i.default.createElement(T.Box,{marginLeft:"auto",marginRight:"auto",marginTop:4,className:"asset__content"},i.default.createElement(T.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Row,justifyContent:w.JustifyContent.spaceBetween,paddingTop:1,paddingBottom:3,paddingLeft:2,paddingRight:4},i.default.createElement(T.Box,{display:w.Display.Flex},i.default.createElement(T.ButtonIcon,{color:w.IconColor.iconAlternative,marginRight:1,size:T.ButtonIconSize.Sm,ariaLabel:$("back"),iconName:T.IconName.ArrowLeft,onClick:()=>W.push(E.DEFAULT_ROUTE)})),t),i.default.createElement(T.Box,{paddingLeft:4},i.default.createElement(T.Text,{"data-testid":"asset-name",variant:w.TextVariant.bodyMdMedium,color:w.TextColor.textAlternative},ee&&Z&&ee!==Z?`${ee} (${Z})`:ee??Z)),i.default.createElement(j.default,{chainId:J,address:ke,currentPrice:xe,currency:U,asset:De}),i.default.createElement(T.Box,{marginTop:4,paddingLeft:4,paddingRight:4},X===u.AssetType.native?i.default.createElement(b.default,{account:K,trackingLocation:"asset-page",isBuyableChain:G,isSigningEnabled:se,isSwapsChain:re,isBridgeChain:oe,chainId:J}):i.default.createElement(L.default,{token:e,account:K})),i.default.createElement(T.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,paddingTop:3},i.default.createElement(T.Text,{variant:w.TextVariant.headingSm,paddingBottom:1,paddingTop:1,paddingLeft:4},$("yourBalance")),[u.AssetType.token,u.AssetType.native].includes(X)&&i.default.createElement(h.default,{key:`${Z}-${ke}`,token:De,disableHover:!0,safeChains:Ne}),i.default.createElement(T.Box,{marginTop:2,marginBottom:2,borderColor:w.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),i.default.createElement(T.Box,{marginTop:2,display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:4},[u.AssetType.token,u.AssetType.native].includes(X)&&i.default.createElement(T.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,paddingLeft:4,paddingRight:4},i.default.createElement(T.Text,{variant:w.TextVariant.headingSm,paddingBottom:2},$("tokenDetails")),i.default.createElement(T.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:2},q($("network"),i.default.createElement(T.Text,{variant:w.TextVariant.bodyMdMedium,display:w.Display.Flex,alignItems:w.AlignItems.center,gap:2,"data-testid":"asset-network"},i.default.createElement(T.AvatarNetwork,{src:Oe,name:Pe,size:T.AvatarNetworkSize.Xs}),Pe)),be&&i.default.createElement(T.Box,null,q($("contractAddress"),i.default.createElement(x.AddressCopyButton,{address:Te,shorten:!0})),i.default.createElement(T.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:2},e.decimals!==undefined&&q($("tokenDecimal"),i.default.createElement(T.Text,{variant:w.TextVariant.bodyMdMedium},e.decimals)),e.aggregators&&e.aggregators.length>0&&i.default.createElement(T.Box,null,i.default.createElement(T.Text,{variant:w.TextVariant.bodyMdMedium,color:w.TextColor.textAlternative},$("tokenList")),i.default.createElement(T.Text,{variant:w.TextVariant.bodyMdMedium},e.aggregators.map(e=>e.replace(/^metamask$/iu,"MetaMask")).join(", "))))),Me&&q($("spendingCaps"),i.default.createElement(T.ButtonLink,{className:"asset-page__spending-caps mm-text--body-md-medium",href:Ae,target:"_blank",rel:"noopener noreferrer"},$("editInPortfolio"))))),i.default.createElement(F.AssetMarketDetails,{asset:e,address:ke}),i.default.createElement(T.Box,{borderColor:w.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),i.default.createElement(T.Box,{marginBottom:4},i.default.createElement(T.Text,{paddingInline:4,variant:w.TextVariant.headingSm},$("yourActivity")),Be?i.default.createElement(k.default,{tokenAddress:ke,hideNetworkFilter:!0,tokenChainIdOverride:J}):i.default.createElement(v.default,{tokenAddress:ke,hideNetworkFilter:!0,overrideFilterForCurrentChain:X===u.AssetType.native})))))}}}},{package:"$root$",file:"ui/pages/asset/components/asset-page.tsx"}],[6628,{"../../../../components/component-library":5919,"../../../../helpers/constants/design-system":6458,"../../../../hooks/useI18nContext":6583,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetChartEmptyState=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../../components/component-library"),o=e("../../../../helpers/constants/design-system"),s=e("../../../../hooks/useI18nContext");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}n.AssetChartEmptyState=()=>{const e=(0,s.useI18nContext)();return a.createElement(r.Box,{className:"asset-chart__empty-or-loading-state-container"},a.createElement(r.Box,{className:"asset-chart__empty-state-content"},a.createElement("img",{src:"./images/asset-chart-empty-state-illustration.png",className:"asset-chart__empty-state-illustration"}),a.createElement(r.Text,{textAlign:o.TextAlign.Center,variant:o.TextVariant.bodySmMedium,color:o.TextColor.textAlternative,fontWeight:o.FontWeight.Medium,paddingTop:4,paddingRight:2,paddingBottom:4,paddingLeft:2,width:o.BlockSize.Full},e("assetChartNoHistoricalPrices"))))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-empty-state.tsx"}],[6629,{"../../../../components/component-library":5919,"../../../../components/component-library/skeleton":5965,"../../../../helpers/constants/design-system":6458,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetChartLoading=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../../components/component-library/skeleton"),o=e("../../../../components/component-library"),s=e("../../../../helpers/constants/design-system");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}n.AssetChartLoading=()=>a.createElement(o.Box,{className:"asset-chart__empty-or-loading-state-container","data-testid":"asset-chart-loading"},a.createElement(r.Skeleton,{className:"asset-chart__skeleton",borderRadius:s.BorderRadius.LG}))}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-loading.tsx"}],[6630,{"../../../../components/app/assets/token-cell/cells":5450,"../../../../components/component-library":5919,"../../../../components/component-library/skeleton":5965,"../../../../helpers/constants/design-system":6458,"../../../../helpers/formatters":6471,"../../util":6641,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../../helpers/constants/design-system"),o=e("../../../../components/component-library"),s=e("../../util"),i=e("../../../../helpers/formatters"),l=e("../../../../components/component-library/skeleton"),c=e("../../../../components/app/assets/token-cell/cells");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=()=>a.default.createElement(l.Skeleton,{width:"25%",marginBottom:1,borderRadius:r.BorderRadius.LG},a.default.createElement(o.Text,{variant:r.TextVariant.displayMd},"")),m=()=>a.default.createElement(o.Text,{variant:r.TextVariant.displayMd,marginBottom:1},""),p=()=>a.default.createElement(l.Skeleton,{width:"33%",borderRadius:r.BorderRadius.LG},a.default.createElement(o.Text,{variant:r.TextVariant.bodyMdMedium},"")),f=()=>a.default.createElement(o.Text,{variant:r.TextVariant.bodyMdMedium},""),g=(0,a.forwardRef)((e,t)=>{const[{price:n,date:l},u]=(0,a.useState)({price:e.price,date:e.date});(0,a.useImperativeHandle)(t,()=>({setPrice:u}));const{formatCurrencyTokenPrice:g}=(0,i.useFormatters)(),{loading:h,currency:y,comparePrice:v}=e,k=n!==undefined&&v!==undefined?n-v:undefined,b=h&&n===undefined,T=!h&&n===undefined,x=h&&n!==undefined,C=!h&&n!==undefined,S=h&&k===undefined,w=!h&&k===undefined,E=h&&k!==undefined&&v!==undefined,_=!h&&k!==undefined&&v!==undefined;return a.default.createElement(o.Box,{marginLeft:4,marginRight:4},b&&a.default.createElement(d,null),T&&a.default.createElement(m,null),(C||x)&&a.default.createElement(o.Text,{"data-testid":"asset-hovered-price",variant:r.TextVariant.displayMd,fontWeight:r.FontWeight.Medium,borderRadius:r.BorderRadius.LG,marginBottom:1,style:{opacity:x?s.loadingOpacity:1}},g(n,y)),S&&a.default.createElement(p,null),w&&a.default.createElement(f,null),(_||E)&&a.default.createElement(o.Box,{style:{opacity:h?s.loadingOpacity:1},display:r.Display.Flex,flexDirection:r.FlexDirection.Row},e.asset&&a.default.createElement(c.TokenCellPercentChange,{token:e.asset}),a.default.createElement(o.Text,{display:r.Display.InlineBlock,variant:r.TextVariant.bodyMdMedium,color:r.TextColor.textAlternative,marginLeft:2},(0,s.getShortDateFormatter)().format(l))))});n.default=g}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-price.tsx"}],[6631,{"../../../../components/component-library":5919,"../../../../helpers/constants/design-system":6458,"../../../../hooks/useI18nContext":6583,"../../../../hooks/useTheme":6608,"../../hooks/useChartTimeRanges":6637,"../../hooks/useHistoricalPrices":6639,"../../util":6641,"./asset-chart-empty-state":6628,"./asset-chart-loading":6629,"./asset-chart-price":6630,"./chart-tooltip":6632,"./crosshair-plugin":6633,"@metamask/design-tokens":1589,"chart.js":3615,classnames:3623,lodash:4362,luxon:4373,react:4789,"react-chartjs-2":4679},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("chart.js"),o=e("react-chartjs-2"),s=x(e("classnames")),i=e("@metamask/design-tokens"),l=e("lodash"),c=e("luxon"),u=e("../../../../hooks/useTheme"),d=e("../../../../helpers/constants/design-system"),m=e("../../../../components/component-library"),p=e("../../../../hooks/useI18nContext"),f=e("../../hooks/useHistoricalPrices"),g=e("../../util"),h=e("../../hooks/useChartTimeRanges"),y=x(e("./chart-tooltip")),v=e("./crosshair-plugin"),k=e("./asset-chart-empty-state"),b=e("./asset-chart-loading"),T=x(e("./asset-chart-price"));function x(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}r.Chart.register(r.LinearScale,r.PointElement,r.LineElement,r.Filler,r.Decimation,v.CrosshairPlugin);const S={normalized:!0,parsing:!1,aspectRatio:2.6,layout:{autoPadding:!1,padding:0},animation:{duration:0},fill:!0,backgroundColor:({chart:e})=>{const t=e.ctx.createLinearGradient(0,0,0,e.height);return t.addColorStop(0,`${e.options.borderColor}60`),t.addColorStop(1,`${e.options.borderColor}00`),t},elements:{line:{borderWidth:1.5},point:{pointStyle:!1}},plugins:{decimation:{algorithm:"lttb",samples:150,threshold:150,enabled:!0}}};n.default=({chainId:e,address:t,currentPrice:n,currency:r,asset:v})=>{var x;const C=(0,p.useI18nContext)(),w=(0,u.useTheme)(),E=(0,h.useChartTimeRanges)(t,r),[_,I]=(0,a.useState)(E[0]??"P1D"),{loading:M,data:{prices:A,metadata:{minPricePoint:P,maxPricePoint:O,xMin:D,xMax:N,yMin:B,yMax:R}}}=(0,f.useHistoricalPrices)({chainId:e,address:t,currency:r,timeRange:_}),F=M&&0===A.length,j=!M&&0===A.length,L=M&&A.length>0,$=!M&&A.length>0,W={...S,borderColor:"dark"===w?i.brandColor.blue400:i.brandColor.blue500,scales:{x:{min:D,max:N,display:!1,type:"linear"},y:{min:B,max:R,display:!1}}},q=(0,a.useRef)(),U=(0,a.useRef)();return(0,a.useEffect)(()=>{var e;null==U||null===(e=U.current)||void 0===e||e.setPrice({price:n,date:Date.now()})},[n]),a.default.createElement(m.Box,{borderRadius:d.BorderRadius.LG,display:d.Display.Flex,flexDirection:d.FlexDirection.Column},a.default.createElement(T.default,{ref:U,loading:M,currency:r,price:n,date:Date.now(),comparePrice:null==A||null===(x=A[0])||void 0===x?void 0:x.y,asset:v}),a.default.createElement(m.Box,{"data-testid":"asset-price-chart",marginTop:4,backgroundColor:M&&!A?d.BackgroundColor.backgroundSection:d.BackgroundColor.transparent,borderRadius:d.BorderRadius.LG,display:d.Display.Flex,flexDirection:d.FlexDirection.Column},F&&a.default.createElement(b.AssetChartLoading,null),j&&a.default.createElement(k.AssetChartEmptyState,null),($||L)&&a.default.createElement(m.Box,{style:{opacity:L?g.loadingOpacity:1}},a.default.createElement(y.default,{point:O,xMin:D,xMax:N,currency:r}),a.default.createElement(m.Box,{style:{aspectRatio:`${W.aspectRatio}`},display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:n?d.JustifyContent.flexEnd:d.JustifyContent.flexStart},a.default.createElement(o.Line,{ref:q,data:{datasets:[{data:A}]},options:W,updateMode:"none",onMouseMove:e=>{var t;const n=null==q||null===(t=q.current)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.datasets)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.data;if(n){const t=e.target,r=n[Math.max(0,Math.min(n.length-1,Math.round(e.nativeEvent.offsetX/t.clientWidth*n.length)))];var a;if(r)null==U||null===(a=U.current)||void 0===a||a.setPrice({price:r.y,date:r.x})}},onMouseOut:()=>{var e;null==U||null===(e=U.current)||void 0===e||e.setPrice({price:n,date:Date.now()})}})),a.default.createElement(y.default,{point:P,xMin:D,xMax:N,currency:r})),a.default.createElement(m.Box,{style:A?undefined:{visibility:"hidden"},display:d.Display.Flex,justifyContent:d.JustifyContent.spaceBetween,marginTop:2,marginLeft:3,marginRight:3},E.map(e=>a.default.createElement(m.ButtonBase,{key:e,className:(0,s.default)("time-range-button",{"time-range-button__selected":e===_}),onClick:()=>I(e),variant:d.TextVariant.bodyXsMedium,size:m.ButtonBaseSize.Sm,paddingLeft:2,paddingRight:2,backgroundColor:d.BackgroundColor.transparent,color:d.TextColor.textAlternative},((e,t)=>{const{years:n,months:a,weeks:r,days:o,hours:s,minutes:i,seconds:u,milliseconds:d}=c.Duration.fromISO(t,{locale:"en"}).normalize().rescale().toObject();return n&&n>100?`${e("all")}`:(0,l.trim)(`${n?`${n}${e("durationSuffixYear")} `:""}${a?`${a}${e("durationSuffixMonth")} `:""}${r?`${r}${e("durationSuffixWeek")} `:""}${o?`${o}${e("durationSuffixDay")} `:""}${s?`${s}${e("durationSuffixHour")} `:""}${i?`${i}${e("durationSuffixMinute")} `:""}${u?`${u}${e("durationSuffixSecond")} `:""}${d?`${d}${e("durationSuffixMillisecond")}`:""}`)})(C,e))))))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart.tsx"}],[6632,{"../../../../components/component-library":5919,"../../../../helpers/constants/design-system":6458,"../../../../helpers/formatters":6471,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../../components/component-library"),s=e("../../../../helpers/formatters"),i=e("../../../../helpers/constants/design-system");n.default=({point:e,xMin:t,xMax:n,currency:a})=>{const{formatCurrencyTokenPrice:l}=(0,s.useFormatters)(),c=e&&t&&n?(e.x-t)/(n-t):0;return r.default.createElement(o.Box,{style:{...c<.5?{paddingRight:100-200*c+"%"}:{paddingLeft:100-2*(100-100*c)+"%"},direction:c<.5?o.TextDirection.LeftToRight:o.TextDirection.RightToLeft}},r.default.createElement(o.Text,{marginLeft:4,marginRight:4,marginBottom:1,marginTop:1,variant:i.TextVariant.bodyXsMedium,color:i.TextColor.textAlternative,textAlign:i.TextAlign.Center},(null==e?void 0:e.y)===undefined?"":l(null==e?void 0:e.y,a)))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/chart-tooltip.tsx"}],[6633,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CrosshairPlugin=void 0;n.CrosshairPlugin={id:"crosshair",afterEvent(e,{event:t}){e.crosshairX="mouseout"===t.type?undefined:t.x??undefined,e.draw()},afterDraw(e){if(e.crosshairX!==undefined){const t=e.data.datasets[0].data,n=t[Math.max(0,Math.min(t.length-1,Math.round(e.crosshairX/e.width*t.length)))];if(n){const{x:t,y:a}=e.scales,r=t.getPixelForValue(n.x),o=a.getPixelForValue(n.y);e.ctx.lineWidth=1,e.ctx.strokeStyle="#BBC0C5",e.ctx.beginPath(),e.ctx.moveTo(r,0),e.ctx.lineTo(r,e.height),e.ctx.stroke(),e.ctx.beginPath(),e.ctx.arc(r,o,3,0,2*Math.PI),e.ctx.fillStyle=e.options.borderColor,e.ctx.fill()}}}}}}},{package:"$root$",file:"ui/pages/asset/components/chart/crosshair-plugin.ts"}],[6634,{"../../../../shared/constants/metametrics":5259,"../../../../shared/constants/transaction":5279,"../../../../shared/lib/asset-utils":5288,"../../../../shared/modules/selectors/networks":5371,"../../../contexts/metametrics":6421,"../../../helpers/utils/multichain/blockExplorer":6499,"../../../helpers/utils/util":6514,"../../../hooks/useIsOriginalNativeTokenSymbol":6584,"../../../hooks/useMultichainSelector":6592,"../../../selectors":7345,"../../../selectors/multichain":7354,"./asset-options":6626,"./asset-page":6627,"@metamask/etherscan-link":1827,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("@metamask/etherscan-link"),s=e("../../../selectors"),i=e("../../../../shared/modules/selectors/networks"),l=e("../../../../shared/constants/transaction"),c=e("../../../hooks/useIsOriginalNativeTokenSymbol"),u=e("../../../../shared/constants/metametrics"),d=e("../../../helpers/utils/util"),m=e("../../../contexts/metametrics"),p=e("../../../helpers/utils/multichain/blockExplorer"),f=e("../../../hooks/useMultichainSelector"),g=e("../../../selectors/multichain"),h=e("../../../../shared/lib/asset-utils"),y=k(e("./asset-options")),v=k(e("./asset-page"));function k(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}n.default=({token:e,chainId:t})=>{const{symbol:n}=e,k=(0,s.getNativeCurrencyForChain)(t),{type:b}=(0,r.useSelector)(i.getProviderConfig)??{},{address:T}=(0,r.useSelector)(s.getSelectedInternalAccount),x=(0,r.useSelector)(s.getRpcPrefsForCurrentProvider),C=(0,r.useSelector)(s.getSelectedAccount),S=(0,f.useMultichainSelector)(g.getMultichainNetwork,C),w=(0,h.isEvmChainId)(t),E=(0,p.getMultichainAccountUrl)(C.address,S),_=w?(0,o.getAccountLink)(T,t,x):E,I=(0,a.useContext)(m.MetaMetricsContext),M=(0,c.useIsOriginalNativeTokenSymbol)(t,n,b);return a.default.createElement(v.default,{asset:{chainId:t,type:l.AssetType.native,symbol:n,image:k,decimals:e.decimals,isOriginalNativeSymbol:!0===M},optionsButton:a.default.createElement(y.default,{isNativeAsset:!0,isEvm:w,onClickBlockExplorer:()=>{I({event:"Clicked Block Explorer Link",category:u.MetaMetricsEventCategory.Navigation,properties:{link_type:"Account Tracker",action:"Asset Options",block_explorer_domain:(0,d.getURLHostName)(_)}}),global.platform.openTab({url:_})}})})}}}},{package:"$root$",file:"ui/pages/asset/components/native-asset.tsx"}],[6635,{"../../../../shared/constants/metametrics":5259,"../../../../shared/constants/transaction":5279,"../../../../shared/lib/asset-utils":5288,"../../../../shared/modules/selectors/networks":5371,"../../../../shared/modules/string-utils":5375,"../../../contexts/metametrics":6421,"../../../helpers/utils/multichain/blockExplorer":6499,"../../../helpers/utils/util":6514,"../../../hooks/useMultichainSelector":6592,"../../../hooks/useTokenFiatAmount":6614,"../../../hooks/useTokenTracker":6617,"../../../selectors":7345,"../../../selectors/multichain":7354,"../../../selectors/multichain-accounts/account-tree":7349,"../../../store/actions":7369,"./asset-options":6626,"./asset-page":6627,"@metamask/bridge-controller":1147,"@metamask/etherscan-link":1827,"@metamask/utils":2632,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/etherscan-link"),r=e("@metamask/utils"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),i=e("react-router-dom"),l=e("@metamask/bridge-controller"),c=e("../../../../shared/constants/metametrics"),u=e("../../../../shared/constants/transaction"),d=e("../../../../shared/modules/selectors/networks"),m=e("../../../../shared/modules/string-utils"),p=e("../../../contexts/metametrics"),f=e("../../../helpers/utils/util"),g=e("../../../hooks/useTokenFiatAmount"),h=e("../../../hooks/useTokenTracker"),y=e("../../../selectors"),v=e("../../../store/actions"),k=e("../../../helpers/utils/multichain/blockExplorer"),b=e("../../../hooks/useMultichainSelector"),T=e("../../../selectors/multichain"),x=e("../../../selectors/multichain-accounts/account-tree"),C=e("../../../../shared/lib/asset-utils"),S=E(e("./asset-options")),w=E(e("./asset-page"));function E(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}n.default=({token:e,chainId:t})=>{var n,E,_;const{address:I,symbol:M,isERC721:A,image:P}=e,O=(0,s.useSelector)(y.getTokenList),D=(0,s.useSelector)(d.getNetworkConfigurationsByChainId),N=null===(n=D[t])||void 0===n?void 0:n.defaultBlockExplorerUrlIndex,B=N===undefined?null:null===(E=D[t])||void 0===E?void 0:E.blockExplorerUrls[N],R=(0,r.isCaipChainId)(t)?t:(0,l.formatChainIdToCaip)(t),F=(0,s.useSelector)(e=>(0,x.getInternalAccountBySelectedAccountGroupAndCaip)(e,R)),{address:j}=F,L=(0,s.useSelector)(y.selectERC20TokensByChain),$=(0,b.useMultichainSelector)(T.getMultichainNetwork,F),W=(0,C.isEvmChainId)(t),q=(0,i.useHistory)(),U=(0,s.useDispatch)(),G=(0,o.useContext)(p.MetaMetricsContext),H=Object.values(O).find(e=>(0,m.isEqualCaseInsensitive)(e.symbol,M)&&(0,m.isEqualCaseInsensitive)(e.address,I)),V=null==L||null===(_=L[t])||void 0===_||null===(_=_.data)||void 0===_?void 0:_[I.toLowerCase()],z=(null==H?void 0:H.name)||(null==V?void 0:V.name)||M,Q=(null==H?void 0:H.iconUrl)||(null==V?void 0:V.iconUrl)||P||"",Y=null==H?void 0:H.aggregators,{tokensWithBalances:K}=(0,h.useTokenTracker)({tokens:[e],address:undefined}),J=null==K?void 0:K[0],X=(0,g.useTokenFiatAmount)(I,null==J?void 0:J.string,M,{},!1),Z=(0,a.getTokenTrackerLink)(e.address,t,"",j,{blockExplorerUrl:B??""}),ee=W?Z:(0,k.getMultichainAccountUrl)((0,r.parseCaipAssetType)(I).assetReference,$);return o.default.createElement(w.default,{asset:{chainId:t,type:u.AssetType.token,address:I,symbol:M,name:z,decimals:e.decimals,image:Q,aggregators:Y,balance:{value:null==J?void 0:J.balance,display:`${(0,f.roundToDecimalPlacesRemovingExtraZeroes)(null==J?void 0:J.string,5)}`,fiat:X},isERC721:A},optionsButton:o.default.createElement(S.default,{isNativeAsset:!1,isEvm:W,onRemove:()=>U((0,v.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:e,history:q})),onClickBlockExplorer:()=>{G({event:"Clicked Block Explorer Link",category:c.MetaMetricsEventCategory.Navigation,properties:{link_type:"Token Tracker",action:"Token Options",block_explorer_domain:(0,f.getURLHostName)(Z)}}),global.platform.openTab({url:ee})},tokenSymbol:e.symbol})})}}}},{package:"$root$",file:"ui/pages/asset/components/token-asset.tsx"}],[6636,{"../../../../shared/constants/metametrics":5259,"../../../../shared/constants/multichain/networks":5261,"../../../../shared/constants/transaction":5279,"../../../../shared/lib/asset-utils":5288,"../../../../shared/modules/selectors/networks":5371,"../../../components/app/wallet-overview/hooks/useHandleSendNonEvm":5845,"../../../components/component-library":5919,"../../../components/ui/icon-button/icon-button":6327,"../../../contexts/i18n":6416,"../../../contexts/metametrics":6421,"../../../ducks/bridge/selectors":6435,"../../../ducks/ramps":6447,"../../../ducks/send":6450,"../../../ducks/swaps/swaps":6454,"../../../helpers/constants/design-system":6458,"../../../helpers/constants/error-keys":6459,"../../../helpers/constants/routes":6463,"../../../helpers/utils/hardware":6492,"../../../hooks/bridge/useBridging":6523,"../../../hooks/ramps/useRamps/useRamps":6552,"../../../selectors":7345,"../../../selectors/multichain":7354,"../../../store/actions":7369,"../../confirmations/hooks/useRedesignedSendFlow":7023,"../../confirmations/utils/send":7052,"@metamask/keyring-api":1914,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("@metamask/keyring-api"),i=e("../../../contexts/i18n"),l=e("../../../helpers/constants/routes"),c=e("../../../ducks/send"),u=e("../../../helpers/utils/hardware"),d=e("../../../ducks/swaps/swaps"),m=O(e("../../../hooks/ramps/useRamps/useRamps")),p=e("../../../selectors"),f=O(e("../../../hooks/bridge/useBridging")),g=e("../../../helpers/constants/error-keys"),h=e("../../../store/actions"),y=e("../../../contexts/metametrics"),v=e("../../../../shared/constants/metametrics"),k=e("../../../../shared/constants/transaction"),b=e("../../../helpers/constants/design-system"),T=O(e("../../../components/ui/icon-button/icon-button")),x=e("../../../components/component-library"),C=e("../../../ducks/ramps"),S=e("../../../selectors/multichain"),w=e("../../../components/app/wallet-overview/hooks/useHandleSendNonEvm"),E=e("../../../../shared/constants/multichain/networks"),_=e("../../../../shared/modules/selectors/networks"),I=e("../../../ducks/bridge/selectors"),M=e("../../confirmations/utils/send"),A=e("../../../../shared/lib/asset-utils"),P=e("../../confirmations/hooks/useRedesignedSendFlow");function O(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}n.default=({token:e,account:t})=>{const n=(0,r.useDispatch)(),O=(0,a.useContext)(i.I18nContext),D=(0,a.useContext)(y.MetaMetricsContext),N=(0,o.useHistory)(),B=(0,r.useSelector)(p.getCurrentKeyring),R=(0,u.isHardwareKeyring)(B.type),F=(0,A.isEvmChainId)(e.chainId),j=(0,r.useSelector)(p.getIsMultichainAccountsState2Enabled),{enabled:L}=(0,P.useRedesignedSendFlow)(),{chainId:$}=(0,r.useSelector)(p.getSelectedMultichainNetworkConfiguration),W=(0,r.useSelector)(_.getCurrentChainId),q=j?e.chainId:F?W:$,U=(0,r.useSelector)(p.getNetworkConfigurationIdByChainId),G=(0,r.useSelector)(e=>(0,p.getIsSwapsChain)(e,q)),H=(0,r.useSelector)(e=>(0,p.getIsBridgeChain)(e,q)),V=(0,r.useSelector)(C.getIsNativeTokenBuyable),{openBuyCryptoInPdapp:z}=(0,m.default)(),{openBridgeExperience:Q}=(0,f.default)(),Y=(0,w.useHandleSendNonEvm)(e.address),K=(0,r.useSelector)(e=>(0,I.getIsUnifiedUIEnabled)(e,q));(0,a.useEffect)(()=>{e.isERC721&&n((0,h.showModal)({name:"CONVERT_TOKEN_TO_NFT",tokenAddress:e.address}))},[e.isERC721,e.address,n]);const J=(0,a.useCallback)(async()=>{if(W!==e.chainId&&$!==e.chainId&&!j)try{const t=U[e.chainId];await n((0,h.setActiveNetworkWithError)(t))}catch(t){throw console.error(`Failed to switch chains.\n        Target chainId: ${e.chainId}, Current chainId: ${W}.\n        ${t}`),t}},[j,W,$,U,e.chainId,n]),X=(0,a.useCallback)(()=>{z(),D({event:v.MetaMetricsEventName.NavBuyButtonClicked,category:v.MetaMetricsEventCategory.Navigation,properties:{location:"Token Overview",text:"Buy",chain_id:q,token_symbol:e.symbol}})},[q,e.symbol,D,z]),Z=(0,a.useCallback)(async()=>{if(D({event:v.MetaMetricsEventName.NavSendButtonClicked,category:v.MetaMetricsEventCategory.Navigation,properties:{token_symbol:e.symbol,location:v.MetaMetricsSwapsEventSource.TokenView,text:"Send",chain_id:e.chainId}},{excludeMetaMetricsId:!1}),(0,s.isEvmAccountType)(t.type)||L)try{await J(),await n((0,c.startNewDraftTransaction)({type:k.AssetType.token,details:e})),(0,M.navigateToSendRoute)(N,L,{address:e.address,chainId:e.chainId})}catch(e){if(!e.message.includes(g.INVALID_ASSET_TYPE))throw e}else await Y()},[D,n,N,e,J,t,Y,L]),ee=(0,r.useSelector)(S.getMultichainIsTestnet),te=(0,a.useCallback)(async t=>{await J(),Q(v.MetaMetricsSwapsEventSource.TokenView,e,t)},[e,J,Q]),ne=(0,a.useCallback)(async()=>{var t,a,r,o,s;$!==E.MultichainNetworks.SOLANA?K?te(!0):(await J(),D({event:v.MetaMetricsEventName.NavSwapButtonClicked,category:v.MetaMetricsEventCategory.Swaps,properties:{token_symbol:e.symbol,location:v.MetaMetricsSwapsEventSource.TokenView,text:"Swap",chain_id:W}}),n((0,d.setSwapsFromToken)({...e,address:null===(t=e.address)||void 0===t?void 0:t.toLowerCase(),iconUrl:e.image,balance:null==e||null===(a=e.balance)||void 0===a?void 0:a.value,string:null==e||null===(r=e.balance)||void 0===r?void 0:r.display})),R?null===(o=(s=global.platform).openExtensionInBrowser)||void 0===o||o.call(s,l.PREPARE_SWAP_ROUTE,undefined,!1):N.push(l.PREPARE_SWAP_ROUTE)):te(!0)},[W,D,n,N,e,R,J,te,$,K]);return a.default.createElement(x.Box,{display:b.Display.Flex,gap:3,justifyContent:b.JustifyContent.spaceEvenly},a.default.createElement(T.default,{className:"token-overview__button",Icon:a.default.createElement(x.Icon,{name:x.IconName.Dollar,color:b.IconColor.iconAlternative,size:x.IconSize.Md}),label:O("buy"),"data-testid":"token-overview-buy",onClick:X,disabled:e.isERC721||!V}),a.default.createElement(T.default,{className:"token-overview__button",onClick:Z,Icon:a.default.createElement(x.Icon,{name:x.IconName.Send,color:b.IconColor.iconAlternative,size:x.IconSize.Md}),label:O("send"),"data-testid":"eth-overview-send",disabled:e.isERC721}),a.default.createElement(T.default,{className:"token-overview__button",Icon:a.default.createElement(x.Icon,{name:x.IconName.SwapVertical,color:b.IconColor.iconAlternative,size:x.IconSize.Md}),onClick:ne,label:O("swap"),disabled:!G}),!K&&!ee&&H&&a.default.createElement(T.default,{className:"token-overview__button","data-testid":"token-overview-bridge",Icon:a.default.createElement(x.Icon,{name:x.IconName.Bridge,color:b.IconColor.iconAlternative,size:x.IconSize.Md}),label:O("bridge"),onClick:()=>te(!1),disabled:!H}))}}}},{package:"$root$",file:"ui/pages/asset/components/token-buttons.tsx"}],[6637,{"../../../selectors/assets":7338,"../../../selectors/multichain":7354,"@metamask/utils":2632,lodash:4362,luxon:4373,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useChartTimeRanges=void 0;var a=e("@metamask/utils"),r=e("lodash"),o=e("luxon"),s=e("react-redux"),i=e("../../../selectors/assets"),l=e("../../../selectors/multichain");n.useChartTimeRanges=(e,t)=>{var n;const c=["P1D","P1W","P1M","P3M","P1Y","P1000Y"],u=(0,s.useSelector)(l.getMultichainIsEvm),d=(0,s.useSelector)(i.getHistoricalPrices);if(u)return c;(0,a.assert)(e,"caipAssetType is required on non-EVM chains"),(0,a.assert)(t,"currency is required on non-EVM chains");const m=null===(n=d[e])||void 0===n||null===(n=n[t])||void 0===n?void 0:n.intervals;return m?(0,r.chain)(m).keys().map(e=>o.Duration.fromISO(e)).filter(e=>e.isValid).sortBy(e=>e.toMillis()).map(e=>e.toISO()).filter(e=>null!==e).uniq().value():c}}}},{package:"$root$",file:"ui/pages/asset/hooks/useChartTimeRanges.ts"}],[6638,{"../../../../shared/lib/asset-utils":5288,"../../../../shared/modules/hexstring-utils":5360,"../../../selectors":7345,"../../../selectors/assets":7338,"@metamask/bridge-controller":1147,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCurrentPrice=void 0;var a=e("@metamask/bridge-controller"),r=e("react-redux"),o=e("../../../../shared/modules/hexstring-utils"),s=e("../../../selectors"),i=e("../../../selectors/assets"),l=e("../../../../shared/lib/asset-utils");n.useCurrentPrice=e=>{var t;const n=(0,l.isEvmChainId)(e.chainId),c=(0,r.useSelector)(s.getMarketData),u=(0,r.useSelector)(s.getCurrencyRates),d=(0,r.useSelector)(i.getAssetsRates),{chainId:m,type:p}=e;if(n){var f,g,h,y;if(p===a.AssetType.native)return{currentPrice:null===(y=u[e.symbol])||void 0===y?void 0:y.conversionRate};const t=(0,o.toChecksumHexAddress)(e.address),n=null===(f=c[m])||void 0===f||null===(f=f[t])||void 0===f?void 0:f.price,r=null===(h=u[null===(g=c[m])||void 0===g||null===(g=g[t])||void 0===g?void 0:g.currency])||void 0===h?void 0:h.conversionRate;return{currentPrice:r!==undefined&&n!==undefined?r*n:undefined}}const v=p===a.AssetType.token?e.address:(0,a.getNativeAssetForChainId)(m).assetId,k=null==d||null===(t=d[v])||void 0===t?void 0:t.rate;return{currentPrice:k?parseFloat(k):undefined}}}}},{package:"$root$",file:"ui/pages/asset/hooks/useCurrentPrice.ts"}],[6639,{"../../../../shared/constants/time":5277,"../../../../shared/lib/asset-utils":5288,"../../../../shared/lib/fetch-with-cache":5324,"../../../../shared/lib/trace":5342,"../../../selectors":7345,"../../../selectors/assets":7338,"../../../store/actions":7369,"../util":6641,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHistoricalPrices=n.DEFAULT_USE_HISTORICAL_PRICES_METADATA=void 0;var a,r=e("react"),o=e("react-redux"),s=e("../../../../shared/constants/time"),i=(a=e("../../../../shared/lib/fetch-with-cache"))&&a.__esModule?a:{default:a},l=e("../../../selectors"),c=e("../../../selectors/assets"),u=e("../util"),d=e("../../../store/actions"),m=e("../../../../shared/lib/trace"),p=e("../../../../shared/lib/asset-utils");const f=n.DEFAULT_USE_HISTORICAL_PRICES_METADATA={minPricePoint:{x:-Infinity,y:-Infinity},maxPricePoint:{x:Infinity,y:Infinity},xMin:Infinity,xMax:-Infinity,yMin:Infinity,yMax:-Infinity},g=e=>{const t=Math.min(...e.map(e=>e.x)),n=Math.max(...e.map(e=>e.x)),a=Math.min(...e.map(e=>e.y)),r=Math.max(...e.map(e=>e.y));return{minPricePoint:e.find(e=>e.y===a)??f.minPricePoint,maxPricePoint:e.find(e=>e.y===r)??f.maxPricePoint,xMin:t,xMax:n,yMin:a,yMax:r}};n.useHistoricalPrices=({chainId:e,address:t,currency:n,timeRange:a})=>{const h=(0,p.isEvmChainId)(e),y=(({chainId:e,address:t,currency:n,timeRange:a})=>{const c=(0,p.isEvmChainId)(e),d=(0,o.useSelector)(l.getShouldShowFiat),[h,y]=(0,r.useState)(!1),[v,k]=(0,r.useState)([]),[b,T]=(0,r.useState)(f);return(0,r.useEffect)(()=>{if(!c)return;if(!d||!(0,u.chainSupportsPricing)(e))return;const r=performance.now(),o=(0,m.trace)({name:m.TraceName.GetAssetHistoricalPrices,startTime:r});(0,m.trace)({name:m.TraceName.GetAssetHistoricalPrices,startTime:r,parentContext:o}),y(!0);const l=(0,u.fromIso8601DurationToPriceApiTimePeriod)(a);(0,i.default)({url:`https://price.api.cx.metamask.io/v1/chains/${e}/historical-prices/${t}?vsCurrency=${n}&timePeriod=${l}`,cacheOptions:{cacheRefreshTime:5*s.MINUTE},functionName:"GetAssetHistoricalPrices",fetchOptions:{headers:{"X-Client-Id":"extension"}}}).catch(()=>({})).then(e=>{var t;const n=(null==e||null===(t=e.prices)||void 0===t?void 0:t.map(e=>({x:null==e?void 0:e[0],y:null==e?void 0:e[1]})))??[];k(n)}).finally(()=>{(0,m.endTrace)({name:m.TraceName.GetAssetHistoricalPrices,timestamp:performance.timeOrigin+r}),y(!1)})},[c,e,t,n,a,d]),(0,r.useEffect)(()=>{if(!c)return;const e=g(v);T(e)},[c,v]),{loading:h,data:{prices:v,metadata:b}}})({chainId:e,address:t,currency:n,timeRange:a}),v=(({chainId:e,address:t,currency:n,timeRange:a})=>{const s=(0,p.isEvmChainId)(e),[i,l]=(0,r.useState)(!1),[u,m]=(0,r.useState)([]),[h,y]=(0,r.useState)(f),v=(0,o.useSelector)(c.getHistoricalPrices),k=(0,o.useDispatch)();return(0,r.useEffect)(()=>{if(s)return()=>{};const n=async()=>{l(!0);try{await k((0,d.fetchHistoricalPricesForAsset)(t))}catch(n){console.error("Error fetching historical prices for %s on %s",t,e,n)}finally{l(!1)}};n();const a=setInterval(n,6e4);return()=>clearInterval(a)},[s,e,t,k]),(0,r.useEffect)(()=>{var e;if(s)return;const r=((null==v||null===(e=v[t])||void 0===e||null===(e=e[n])||void 0===e?void 0:e.intervals[a])??[]).map(([e,t])=>({x:e,y:Number(t)}));m(r)},[s,v,t,n,a]),(0,r.useEffect)(()=>{if(s)return;const e=g(u);y(e)},[s,u]),{loading:i,data:{prices:u,metadata:h}}})({chainId:e,address:t,currency:n,timeRange:a});return h?y:v}}}},{package:"$root$",file:"ui/pages/asset/hooks/useHistoricalPrices.ts"}],[6640,{"./asset":6624},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./asset"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/asset/index.js"}],[6641,{"@metamask/assets-controllers":1076,"@metamask/utils":2632,luxon:4373},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.localizeLargeNumber=n.loadingOpacity=n.getShortDateFormatterV2=n.getShortDateFormatter=n.getPricePrecision=n.fromIso8601DurationToPriceApiTimePeriod=n.findAssetByAddress=n.chainSupportsPricing=void 0;var a=e("@metamask/assets-controllers"),r=e("@metamask/utils"),o=e("luxon");n.getShortDateFormatter=()=>Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"});n.getShortDateFormatterV2=()=>Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric"});n.localizeLargeNumber=(e,t)=>t>=1e12?`${(t/1e12).toFixed(2)}${e("trillionAbbreviation")}`:t>=1e9?`${(t/1e9).toFixed(2)}${e("billionAbbreviation")}`:t>=1e6?`${(t/1e6).toFixed(2)}${e("millionAbbreviation")}`:t.toFixed(2);n.getPricePrecision=e=>{if(0===e)return 1;let t=2;for(let n=Math.abs(e);n<1;t++)n*=10;return t};n.chainSupportsPricing=e=>a.SUPPORTED_CHAIN_IDS.includes(e);n.loadingOpacity=.2;n.findAssetByAddress=(e,t,n)=>{if(!n)return console.error("Chain ID is required."),null;const a=e[n];return a?t?a.find(e=>e.address&&e.address.toLowerCase()===t.toLowerCase()):a.find(e=>!e.address):(console.warn(`No tokens found for chainId: ${n}`),null)};n.fromIso8601DurationToPriceApiTimePeriod=e=>{(0,r.assert)(o.Duration.fromISO(e,{locale:"en"}).isValid,`Invalid ISO 8601 duration: ${e}`);const t={P1D:"1D",P7D:"7D",P1W:"7D",P1M:"1M",P3M:"3M",P1Y:"1Y",P1000Y:"1000Y"}[e];if(!t)throw new Error(`No Price API timePeriod matching the ISO 8601 duration: ${e}`);return t}}}},{package:"$root$",file:"ui/pages/asset/util.ts"}],[6642,{"../../../components/component-library":5919,"../../../contexts/i18n":6416,"../../../helpers/constants/routes":6463,react:4789,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-router-dom"),o=e("../../../helpers/constants/routes"),s=e("../../../components/component-library"),i=e("../../../contexts/i18n");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,a.useContext)(i.I18nContext),t=(0,r.useHistory)();return a.default.createElement(s.Button,{onClick:()=>{t.push(`${o.CROSS_CHAIN_SWAP_ROUTE}${o.PREPARE_SWAP_ROUTE}`)}},e("cancel"))}}}},{package:"$root$",file:"ui/pages/bridge/awaiting-signatures/awaiting-signatures-cancel-button.tsx"}],[6643,{"../../../../shared/constants/metametrics":5259,"../../../components/component-library":5919,"../../../components/ui/pulse-loader":6375,"../../../contexts/metametrics":6421,"../../../ducks/bridge/selectors":6435,"../../../helpers/constants/design-system":6458,"../../../hooks/useI18nContext":6583,"../../../selectors/selectors":7361,"lodash/isEqual":4349,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e;const t=(0,p.useI18nContext)(),{activeQuote:n}=(0,r.useSelector)(m.getBridgeQuotes,r.shallowEqual),f=null==n||null===(e=n.sentAmount)||void 0===e?void 0:e.amount,g=(0,r.useSelector)(m.getFromToken,o.default),h=(0,r.useSelector)(m.getToToken,o.default),y=(0,r.useSelector)(m.getFromChain,o.default),v=(0,r.useSelector)(m.getToChain,o.default),k=(0,r.useSelector)(s.isHardwareWallet),b=(0,r.useSelector)(s.getHardwareWalletType),T=Boolean(null==n?void 0:n.approval),x=(0,a.useContext)(c.MetaMetricsContext);return(0,a.useEffect)(()=>{var e,t;x({event:"Awaiting Signature(s) on a HW wallet",category:u.MetaMetricsEventCategory.Swaps,properties:{needs_two_confirmations:T,token_from:(null==g?void 0:g.symbol)??"",token_to:(null==h?void 0:h.symbol)??"",is_hardware_wallet:k,hardware_wallet_type:b??""},sensitiveProperties:{token_from_amount:(null==n||null===(e=n.quote)||void 0===e?void 0:e.srcTokenAmount)??"",token_to_amount:(null==n||null===(t=n.quote)||void 0===t?void 0:t.destTokenAmount)??""}})},[]),a.default.createElement("div",{className:"awaiting-bridge-signatures"},a.default.createElement(d.Box,{paddingLeft:6,paddingRight:6,height:l.BlockSize.Full,justifyContent:l.JustifyContent.center,display:l.Display.Flex,flexDirection:l.FlexDirection.Column},a.default.createElement(d.Box,{marginTop:3,marginBottom:4},a.default.createElement(i.default,null)),!T&&a.default.createElement(d.Text,{color:l.TextColor.textDefault,variant:l.TextVariant.headingMd,as:"h3"},t("swapConfirmWithHwWallet")),T&&a.default.createElement(a.default.Fragment,null,a.default.createElement(d.Text,{variant:l.TextVariant.bodyMdBold,marginTop:2},t("bridgeConfirmTwoTransactions")),a.default.createElement("ul",{className:"awaiting-bridge-signatures__steps"},a.default.createElement("li",null,a.default.createElement(d.AvatarBase,{size:d.AvatarBaseSize.Sm,backgroundColor:l.BackgroundColor.primaryMuted,color:l.TextColor.primaryDefault,marginRight:2},"1"),t("bridgeAllowSwappingOf",[a.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"allowAmount"},f),a.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"allowToken"},null==g?void 0:g.symbol),a.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"allowNetwork"},null==y?void 0:y.name)])),a.default.createElement("li",null,a.default.createElement(d.AvatarBase,{size:d.AvatarBaseSize.Sm,backgroundColor:l.BackgroundColor.primaryMuted,color:l.TextColor.primaryDefault,marginRight:2},"2"),t("bridgeFromTo",[a.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"fromAmount"},f),a.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"fromToken"},null==g?void 0:g.symbol),a.default.createElement(d.Text,{as:"span",variant:l.TextVariant.bodyMd,key:"toNetwork"},null==v?void 0:v.name)]))),a.default.createElement(d.Text,{variant:l.TextVariant.bodyXs},t("bridgeGasFeesSplit")))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=f(e("lodash/isEqual")),s=e("../../../selectors/selectors"),i=f(e("../../../components/ui/pulse-loader")),l=e("../../../helpers/constants/design-system"),c=e("../../../contexts/metametrics"),u=e("../../../../shared/constants/metametrics"),d=e("../../../components/component-library"),m=e("../../../ducks/bridge/selectors"),p=e("../../../hooks/useI18nContext");function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/bridge/awaiting-signatures/awaiting-signatures.tsx"}],[6644,{"../../../../shared/constants/transaction":5279,"../../../ducks/bridge-status/selectors":6432,"../../../hooks/useTokenFiatAmount":6614,"@metamask/transaction-controller":2587,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBridgeTokenDisplayData=function(e){var t,n;const{primaryTransaction:l}=e,c=(0,a.useSelector)(e=>(0,i.selectBridgeHistoryItemForTxMetaId)(e,l.id)),u=(0,a.useSelector)(e=>(0,i.selectBridgeHistoryForApprovalTxId)(e,l.id)),d=c??u,m=(0,o.useTokenFiatAmount)((null==d?void 0:d.quote.srcAsset.address)??l.sourceTokenAddress,(null==d||null===(t=d.pricingData)||void 0===t?void 0:t.amountSent)??l.sourceTokenAmount,(null==d?void 0:d.quote.srcAsset.symbol)??l.sourceTokenSymbol,{},!0,l.chainId);return{category:l.type===r.TransactionType.bridge?s.TransactionGroupCategory.bridge:s.TransactionGroupCategory.swap,displayCurrencyAmount:m,sourceTokenSymbol:(null==d?void 0:d.quote.srcAsset.symbol)??l.sourceTokenSymbol,sourceTokenAmountSent:(null==d||null===(n=d.pricingData)||void 0===n?void 0:n.amountSent)??l.sourceTokenAmount,destinationTokenSymbol:(null==d?void 0:d.quote.destAsset.symbol)??l.destinationTokenSymbol}};var a=e("react-redux"),r=e("@metamask/transaction-controller"),o=e("../../../hooks/useTokenFiatAmount"),s=e("../../../../shared/constants/transaction"),i=e("../../../ducks/bridge-status/selectors")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useBridgeTokenDisplayData.ts"}],[6645,{"../../../ducks/bridge/selectors":6435,"../../../selectors/multichain-accounts/account-tree":7349,"@metamask/bridge-controller":1147,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDestinationAccount=void 0;var a=e("react-redux"),r=e("react"),o=e("@metamask/bridge-controller"),s=e("../../../ducks/bridge/selectors"),i=e("../../../selectors/multichain-accounts/account-tree");n.useDestinationAccount=()=>{const[e,t]=(0,r.useState)(null),[n,l]=(0,r.useState)(!1),c=(0,a.useSelector)(s.getToChain),u=(0,a.useSelector)(e=>null!=c&&c.chainId?(0,i.getInternalAccountBySelectedAccountGroupAndCaip)(e,(0,o.formatChainIdToCaip)(c.chainId)):null),d=(0,a.useSelector)(e=>(0,s.getAccountGroupNameByInternalAccount)(e,u));return(0,r.useEffect)(()=>{t(u?{...u,isExternal:!1,displayName:d??""}:null)},[u,d]),{selectedDestinationAccount:e,setSelectedDestinationAccount:t,isDestinationAccountPickerOpen:n,setIsDestinationAccountPickerOpen:l}}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useDestinationAccount.ts"}],[6646,{"../../../../app/scripts/lib/multichain/address":166,"../../../../shared/lib/multichain/accounts":5330,"../../../ducks/domains":6439,"../../../hooks/useI18nContext":6583,"../../../selectors/selectors":7361,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useExternalAccountResolution=void 0;var a=e("react"),r=e("react-redux"),o=e("../../../../app/scripts/lib/multichain/address"),s=e("../../../ducks/domains"),i=e("../../../../shared/lib/multichain/accounts"),l=e("../../../selectors/selectors"),c=e("../../../hooks/useI18nContext");n.useExternalAccountResolution=({searchQuery:e,isDestinationSolana:t})=>{var n;const u=(0,r.useDispatch)(),d=(0,c.useI18nContext)(),m=(0,r.useSelector)(s.getDomainResolutions),p=e.trim(),f=(0,a.useMemo)(()=>p&&(t?(0,i.isSolanaAddress)(p):(0,o.isEthAddress)(p))?p:null,[p,t]),g=!t&&p.endsWith(".eth")?p:null;(0,a.useEffect)(()=>{g&&(u((0,s.initializeDomainSlice)()),u((0,s.lookupDomainName)(g)))},[g]);const h=f??(null==m||null===(n=m[0])||void 0===n?void 0:n.resolvedAddress),y=(0,r.useSelector)(e=>(0,l.getInternalAccountByAddress)(e,h));return(0,a.useMemo)(()=>!h||y?null:{address:h,isExternal:!0,type:"any:account",displayName:g??d("externalAccount")},[g,h,y])}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useExternalAccountResolution.ts"}],[6647,{"../../../../shared/lib/deep-links/routes/swap":5304,"../../../../shared/modules/selectors/networks":5371,"../../../ducks/bridge/selectors":6435,"../../../selectors/multichain":7354,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsMultichainSwap=void 0;var a=e("react-redux"),r=e("react-router-dom"),o=e("react"),s=e("../../../ducks/bridge/selectors"),i=e("../../../selectors/multichain"),l=e("../../../../shared/modules/selectors/networks"),c=e("../../../../shared/lib/deep-links/routes/swap");n.useIsMultichainSwap=()=>{const{search:e,pathname:t}=(0,r.useLocation)(),n=(0,r.useHistory)(),u=(0,a.useSelector)(i.getMultichainIsSolana),d=(0,a.useSelector)(l.getCurrentChainId),m=(0,a.useSelector)(e=>(0,s.getIsUnifiedUIEnabled)(e,d)),p=(0,a.useSelector)(s.getIsSwap);(0,o.useEffect)(()=>{const a=new URLSearchParams(e),r="true"===a.get(c.BridgeQueryParams.SWAPS);p&&(u||m)&&!r&&(a.set(c.BridgeQueryParams.SWAPS,"true"),n.replace({pathname:t,search:a.toString()}))},[p,u,m,n,e,t]);return(0,o.useMemo)(()=>"true"===new URLSearchParams(e).get(c.BridgeQueryParams.SWAPS)&&(u||m),[u,m,e])}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useIsMultichainSwap.tsx"}],[6648,{"../../../../shared/lib/sentry":5336,"../../../../shared/modules/selectors":5370,"../../../ducks/bridge-status/actions":6431,"../../../ducks/bridge/actions":6433,"../../../ducks/bridge/selectors":6435,"../../../helpers/constants/routes":6463,"../../../store/actions":7369,"@metamask/bridge-controller":1147,"@metamask/utils":2632,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,r.useHistory)(),t=(0,a.useDispatch)(),n=(0,a.useSelector)(d.isHardwareWallet),o=(0,a.useSelector)(m.getFromChain),h=(0,a.useSelector)(e=>(0,d.getIsSmartTransaction)(e,null==o?void 0:o.chainId));return{submitBridgeTransaction:async a=>{n&&e.push(`${i.CROSS_CHAIN_SWAP_ROUTE}${i.AWAITING_SIGNATURES_ROUTE}`);try{if((0,s.isSolanaChainId)(a.quote.srcChainId))return await t((0,l.setDefaultHomeActiveTabName)("activity")),e.push({pathname:i.DEFAULT_ROUTE,state:{stayOnHomePage:!0}}),void await t((0,c.submitBridgeTx)(a,!1));await t(await(0,c.submitBridgeTx)(a,!(0,s.isSolanaChainId)(a.quote.srcChainId)&&h))}catch(a){return f("Bridge transaction failed",a),(0,p.captureException)(a),void(n&&g(a)?(t((0,u.setWasTxDeclined)(!0)),e.push(`${i.CROSS_CHAIN_SWAP_ROUTE}${i.PREPARE_SWAP_ROUTE}`)):(await t((0,l.setDefaultHomeActiveTabName)("activity")),e.push(i.DEFAULT_ROUTE)))}await t((0,l.setDefaultHomeActiveTabName)("activity")),e.push({pathname:i.DEFAULT_ROUTE,state:{stayOnHomePage:!0}})}}},n.isApprovalTxError=n.isAllowanceResetError=void 0;var a=e("react-redux"),r=e("react-router-dom"),o=e("@metamask/utils"),s=e("@metamask/bridge-controller"),i=e("../../../helpers/constants/routes"),l=e("../../../store/actions"),c=e("../../../ducks/bridge-status/actions"),u=e("../../../ducks/bridge/actions"),d=e("../../../../shared/modules/selectors"),m=e("../../../ducks/bridge/selectors"),p=e("../../../../shared/lib/sentry");const f=(0,o.createProjectLogger)("bridge");n.isAllowanceResetError=e=>(e.message??"").includes("Eth USDT allowance reset failed");n.isApprovalTxError=e=>(e.message??"").includes("Approve transaction failed");const g=e=>{var t;const n=(null===(t=e.message)||void 0===t?void 0:t.toLowerCase())??"";return n.includes("ledger")&&(n.includes("rejected")||n.includes("denied")||n.includes("error while signing"))||n.includes("trezor")&&(n.includes("cancelled")||n.includes("rejected"))||n.includes("lattice")&&n.includes("rejected")||n.includes("user rejected")||n.includes("user cancelled")}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useSubmitBridgeTransaction.ts"}],[6649,{"../../../shared/modules/selectors/networks":5371,"../../components/component-library":5919,"../../components/multichain/pages/page":6237,"../../contexts/i18n":6416,"../../ducks/bridge/actions":6433,"../../ducks/bridge/selectors":6435,"../../ducks/swaps/swaps":6454,"../../helpers/constants/design-system":6458,"../../helpers/constants/routes":6463,"../../hooks/bridge/useBridgeExchangeRates":6520,"../../hooks/bridge/useBridging":6523,"../../hooks/bridge/useQuoteFetchEvents":6526,"../../hooks/bridge/useTxAlerts":6530,"../../hooks/useGasFeeEstimates":6580,"../../selectors/multichain":7354,"../../store/actions":7369,"../swaps/hooks/useSwapsFeatureFlags":7286,"./awaiting-signatures/awaiting-signatures":6643,"./awaiting-signatures/awaiting-signatures-cancel-button":6642,"./hooks/useIsMultichainSwap":6647,"./prepare/bridge-transaction-settings-modal":6657,"./prepare/prepare-bridge-page":6662,"@metamask/bridge-controller":1147,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("@metamask/bridge-controller"),i=e("../../contexts/i18n"),l=e("../../ducks/swaps/swaps"),c=e("../../helpers/constants/routes"),u=e("../../store/actions"),d=e("../../components/component-library"),m=e("../../../shared/modules/selectors/networks"),p=e("../../selectors/multichain"),f=M(e("../../hooks/bridge/useBridging")),g=e("../../components/multichain/pages/page"),h=e("../swaps/hooks/useSwapsFeatureFlags"),y=e("../../ducks/bridge/actions"),v=e("../../hooks/useGasFeeEstimates"),k=e("../../hooks/bridge/useBridgeExchangeRates"),b=e("../../hooks/bridge/useQuoteFetchEvents"),T=e("../../helpers/constants/design-system"),x=e("../../hooks/bridge/useTxAlerts"),C=e("../../ducks/bridge/selectors"),S=M(e("./prepare/prepare-bridge-page")),w=M(e("./awaiting-signatures/awaiting-signatures-cancel-button")),E=M(e("./awaiting-signatures/awaiting-signatures")),_=e("./prepare/bridge-transaction-settings-modal"),I=e("./hooks/useIsMultichainSwap");function M(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,a.useContext)(i.I18nContext);(0,h.useSwapsFeatureFlags)(),(0,f.default)();const t=(0,o.useHistory)(),n=(0,r.useDispatch)(),M=(0,r.useSelector)(m.getSelectedNetworkClientId),A=async()=>{await n((0,y.resetBridgeState)())},P=(0,I.useIsMultichainSwap)(),O=(0,r.useSelector)(p.getMultichainCurrentChainId),D=(0,r.useSelector)(e=>(0,C.getIsUnifiedUIEnabled)(e,O));(0,a.useEffect)(()=>(n((0,y.trackUnifiedSwapBridgeEvent)(s.UnifiedSwapBridgeEventName.PageViewed,{})),window.addEventListener("beforeunload",A),()=>{window.removeEventListener("beforeunload",A),A()}),[]),(0,v.useGasFeeEstimates)(M),(0,k.useBridgeExchangeRates)(),(0,b.useQuoteFetchEvents)(),(0,x.useTxAlerts)();const[N,B]=(0,a.useState)(!1);return a.default.createElement(g.Page,{className:"bridge__container"},a.default.createElement(g.Header,{textProps:{variant:T.TextVariant.headingSm},startAccessory:a.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowLeft,size:d.ButtonIconSize.Sm,ariaLabel:e("back"),onClick:async()=>{await A(),t.push({pathname:c.DEFAULT_ROUTE,state:{stayOnHomePage:!0}}),n((0,l.clearSwapsState)()),await n((0,u.resetBackgroundSwapsState)())}}),endAccessory:a.default.createElement(d.ButtonIcon,{iconName:d.IconName.Setting,size:d.ButtonIconSize.Sm,ariaLabel:e("settings"),onClick:()=>{B(!0)}})},e(P||D?"swap":"bridge")),a.default.createElement(g.Content,{padding:0},a.default.createElement(o.Switch,null,a.default.createElement(o.Route,{path:c.CROSS_CHAIN_SWAP_ROUTE+c.PREPARE_SWAP_ROUTE},a.default.createElement(_.BridgeTransactionSettingsModal,{isOpen:N,onClose:()=>{B(!1)}}),a.default.createElement(S.default,{onOpenSettings:()=>B(!0)})),a.default.createElement(o.Route,{path:c.CROSS_CHAIN_SWAP_ROUTE+c.AWAITING_SIGNATURES_ROUTE},a.default.createElement(g.Content,null,a.default.createElement(E.default,null)),a.default.createElement(g.Footer,null,a.default.createElement(w.default,null))))))}}}},{package:"$root$",file:"ui/pages/bridge/index.tsx"}],[6650,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(null,arguments)}n.default=e=>r.default.createElement(o.Container,i({display:s.Display.Flex,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full},e))}}},{package:"$root$",file:"ui/pages/bridge/layout/column.tsx"}],[6651,{"./column":6650,"./row":6652,"./tooltip":6653},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Column",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"Row",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"Tooltip",{enumerable:!0,get:function(){return o.default}});var a=s(e("./column")),r=s(e("./row")),o=s(e("./tooltip"));function s(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/layout/index.tsx"}],[6652,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(null,arguments)}n.default=e=>r.default.createElement(o.Container,i({display:s.Display.Flex,flexDirection:s.FlexDirection.Row,justifyContent:s.JustifyContent.spaceBetween,flexWrap:s.FlexWrap.NoWrap,alignItems:s.AlignItems.center},e))}}},{package:"$root$",file:"ui/pages/bridge/layout/row.tsx"}],[6653,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,"./column":6650,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),i=(a=e("./column"))&&a.__esModule?a:{default:a};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(null,arguments)}const u=r.default.forwardRef(({children:e,title:t,triggerElement:n,disabled:a=!1,onClose:l,iconName:u,style:d,...m},p)=>{const[f,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(null),v=()=>g(!1);return r.default.createElement(o.Box,{ref:p},r.default.createElement(o.Box,{ref:e=>y(e),onMouseEnter:()=>g(!0),onMouseLeave:v,display:s.Display.Flex},n??(u&&r.default.createElement(o.Icon,{color:s.IconColor.iconAlternativeSoft,name:u,size:o.IconSize.Sm}))??r.default.createElement(o.Icon,{name:o.IconName.Info,color:s.IconColor.iconAlternativeSoft,size:o.IconSize.Sm})),!a&&r.default.createElement(o.Popover,c({position:o.PopoverPosition.Auto,referenceElement:h,isOpen:f,onClickOutside:v,style:{maxWidth:"240px",backgroundColor:"var(--color-text-default)",paddingInline:"16px",paddingTop:"8px",paddingBottom:"8px",transitionTimingFunction:"linear",display:"inherit",...d},preventOverflow:!0,flip:!0,hasArrow:!0,isPortal:!0},m),r.default.createElement(i.default,{gap:4},t&&r.default.createElement(o.PopoverHeader,{color:s.TextColor.infoInverse,textAlign:s.TextAlign.Center,justifyContent:l?s.JustifyContent.spaceBetween:s.JustifyContent.center,onClose:l,childrenWrapperProps:{style:{whiteSpace:"nowrap"}}},t),r.default.createElement(o.Text,{justifyContent:s.JustifyContent.center,color:s.TextColor.infoInverse},e))))});n.default=u}}},{package:"$root$",file:"ui/pages/bridge/layout/tooltip.tsx"}],[6654,{"../../../components/component-library":5919,"../../../ducks/bridge/selectors":6435,"../../../helpers/constants/design-system":6458,"../../../hooks/bridge/useIsTxSubmittable":6525,"../../../hooks/useI18nContext":6583,"../hooks/useSubmitBridgeTransaction":6648,"../layout":6651,"@metamask/bridge-controller":1147,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeCTAButton=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=e("@metamask/bridge-controller"),i=e("../../../components/component-library"),l=e("../../../ducks/bridge/selectors"),c=e("../../../hooks/useI18nContext"),u=(a=e("../hooks/useSubmitBridgeTransaction"))&&a.__esModule?a:{default:a},d=e("../../../helpers/constants/design-system"),m=e("../../../hooks/bridge/useIsTxSubmittable"),p=e("../layout");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.BridgeCTAButton=({onFetchNewQuotes:e,needsDestinationAddress:t=!1})=>{const n=(0,c.useI18nContext)(),a=(0,o.useSelector)(l.getToToken),f=(0,o.useSelector)(l.getFromAmount),{isLoading:g,activeQuote:h}=(0,o.useSelector)(l.getBridgeQuotes),y=(0,o.useSelector)(e=>(0,l.getIsQuoteExpired)(e,Date.now())),{submitBridgeTransaction:v}=(0,u.default)(),[k,b]=(0,r.useState)(!1),{isNoQuotesAvailable:T,isInsufficientBalance:x,isInsufficientGasBalance:C,isInsufficientGasForQuote:S,isTxAlertPresent:w}=(0,o.useSelector)(l.getValidationErrors),E=(0,o.useSelector)(l.getWasTxDeclined),_=(0,m.useIsTxSubmittable)(),I=(0,r.useMemo)(()=>E?"youDeclinedTheTransaction":y&&!g?"bridgeQuoteExpired":!g||_||h?C||T?undefined:x||S?"alertReasonInsufficientBalance":f?t?"bridgeSelectDestinationAccount":_||w?h&&(0,s.isCrossChain)(h.quote.srcChainId,h.quote.destChainId)?"bridge":"swap":"swapSelectToken":a?t?"bridgeEnterAmountAndSelectAccount":"bridgeEnterAmount":t?"bridgeSelectTokenAmountAndAccount":"bridgeSelectTokenAndAmount":undefined,[g,w,f,a,_,x,C,S,E,y,t,h,T]),M=(0,r.useMemo)(()=>E||y?"bridgeFetchNewQuotes":undefined,[E,y]);return h&&!M?r.default.createElement(i.Button,{width:d.BlockSize.Full,size:h?i.ButtonSize.Md:i.ButtonSize.Lg,variant:i.ButtonVariant.Primary,"data-testid":"bridge-cta-button",style:{boxShadow:"none"},onClick:async()=>{if(h&&_&&!k)try{b(!0),await v(h)}finally{b(!1)}},loading:k,disabled:!_||w||y||k||t},I?n(I):""):r.default.createElement(p.Row,{alignItems:d.AlignItems.center,justifyContent:d.JustifyContent.center,gap:1},r.default.createElement(i.Text,{variant:d.TextVariant.bodyMd,textAlign:d.TextAlign.Center,color:d.TextColor.textAlternativeSoft},I?n(I):""),M&&r.default.createElement(i.ButtonLink,{as:"a",variant:d.TextVariant.bodyMd,style:{whiteSpace:"nowrap"},onClick:e},n(M)))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-cta-button.tsx"}],[6655,{"../../../components/component-library":5919,"../../../ducks/bridge/selectors":6435,"../../../helpers/constants/design-system":6458,"../../../helpers/utils/hardware":6492,"../../../hooks/useI18nContext":6583,"../../../selectors/selectors":7361,"../layout":6651,"@metamask/bridge-controller":1147,"bignumber.js":3481,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeCTAInfoText=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("react-redux"),s=e("@metamask/bridge-controller"),i=e("bignumber.js"),l=e("../../../components/component-library"),c=e("../../../ducks/bridge/selectors"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/constants/design-system"),m=e("../layout"),p=e("../../../selectors/selectors"),f=e("../../../helpers/utils/hardware");n.BridgeCTAInfoText=()=>{const e=(0,u.useI18nContext)(),{activeQuote:t}=(0,o.useSelector)(c.getBridgeQuotes),n=(0,o.useSelector)(e=>(0,c.getIsQuoteExpired)(e,Date.now())),a=(0,o.useSelector)(p.getCurrentKeyring),g=(0,f.isHardwareKeyring)(null==a?void 0:a.type),h=new i.BigNumber((null==t?void 0:t.quote.feeData.metabridge.amount)??"0").gt(0),y=null==t?void 0:t.approval;return t&&(h||y)?n?null:h||y?r.default.createElement(m.Row,{gap:1,justifyContent:d.JustifyContent.center},r.default.createElement(l.Text,{variant:d.TextVariant.bodyXs,color:d.TextColor.textAlternativeSoft},[h?e("rateIncludesMMFee",[s.BRIDGE_MM_FEE_RATE]):null,y&&((0,s.isCrossChain)(t.quote.srcChainId,t.quote.destChainId)?e("willApproveAmountForBridging"):e("willApproveAmountForSwapping"))].filter(Boolean).join(" ")),y?r.default.createElement(m.Tooltip,{display:d.Display.InlineBlock,position:l.PopoverPosition.Top,offset:[-48,8],title:e("grantExactAccess")},e(g?"bridgeApprovalWarningForHardware":"bridgeApprovalWarning",[t.sentAmount.amount,t.quote.srcAsset.symbol])):null):null:null}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-cta-info-text.tsx"}],[6656,{"../../../../shared/constants/multichain/networks":5261,"../../../../shared/constants/time":5277,"../../../../shared/lib/multichain/networks":5331,"../../../components/component-library":5919,"../../../components/multichain/asset-picker-amount/asset-picker":6081,"../../../components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs":6076,"../../../ducks/bridge/selectors":6435,"../../../ducks/locale/locale":6444,"../../../ducks/metamask/metamask":6445,"../../../helpers/constants/design-system":6458,"../../../helpers/utils/util":6514,"../../../hooks/useCopyToClipboard":6571,"../../../hooks/useI18nContext":6583,"../../../selectors/multichain":7354,"../hooks/useIsMultichainSwap":6647,"../layout":6651,"../utils/quote":6676,"./components/bridge-asset-picker-button":6658,"@metamask/bridge-controller":1147,"@metamask/etherscan-link":1827,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeInputGroup=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("@metamask/bridge-controller"),s=e("@metamask/etherscan-link"),i=e("../../../components/component-library"),l=e("../../../components/multichain/asset-picker-amount/asset-picker"),c=e("../../../components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs"),u=e("../../../hooks/useI18nContext"),d=e("../../../ducks/metamask/metamask"),m=e("../utils/quote"),p=e("../layout"),f=e("../../../helpers/constants/design-system"),g=e("../../../ducks/bridge/selectors"),h=e("../../../helpers/utils/util"),y=e("../../../hooks/useCopyToClipboard"),v=e("../../../../shared/constants/time"),k=e("../../../ducks/locale/locale"),b=e("../hooks/useIsMultichainSwap"),T=e("../../../../shared/constants/multichain/networks"),x=e("../../../../shared/lib/multichain/networks"),C=e("../../../selectors/multichain"),S=e("./components/bridge-asset-picker-button");function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},E.apply(null,arguments)}const _=e=>e.replace(/[^\d.]+/gu,"").split(".",2).join(".");n.BridgeInputGroup=({header:e,token:t,onAssetChange:n,onAmountChange:w,networkProps:I,isTokenListLoading:M,customTokenListGenerator:A,amountFieldProps:P,amountInFiat:O,onMaxButtonClick:D,isMultiselectEnabled:N,onBlockExplorerClick:B,buttonProps:R,containerProps:F={}})=>{var j;const L=(0,u.useI18nContext)(),{isLoading:$}=(0,r.useSelector)(g.getBridgeQuotes),{isInsufficientBalance:W,isEstimatedReturnLow:q}=(0,r.useSelector)(g.getValidationErrors),U=(0,r.useSelector)(d.getCurrentCurrency),G=(0,r.useSelector)(k.getIntlLocale),H=(0,r.useSelector)(C.getMultichainCurrentChainId),V=(null==I||null===(j=I.network)||void 0===j?void 0:j.chainId)??H,[,z]=(0,y.useCopyToClipboard)(v.MINUTE),Q=(0,a.useRef)(null),Y=(0,r.useSelector)(g.getFromTokenBalance),K=(null==P?void 0:P.readOnly)||(null==P?void 0:P.disabled);(0,a.useEffect)(()=>{var e;!K&&Q.current&&(Q.current.value=(null==P||null===(e=P.value)||void 0===e?void 0:e.toString())??"",Q.current.focus())},[null==P?void 0:P.value,K,t]),(0,a.useEffect)(()=>()=>{Q.current=null},[]);const J=(0,b.useIsMultichainSwap)();return a.default.createElement(p.Column,E({gap:1},F),a.default.createElement(p.Row,{gap:4},a.default.createElement(i.TextField,E({inputProps:{disableStateStyles:!0,textAlign:f.TextAlign.Start,style:{fontWeight:400,fontSize:Math.max(14,9/Math.max(9,((null==P?void 0:P.value)??"").toString().length)*36),transition:"font-size 0.1s",padding:0}},style:{minWidth:96,maxWidth:190,opacity:K&&null!=P&&P.value?1:undefined},display:f.Display.Flex,inputRef:Q,type:i.TextFieldType.Text,className:"amount-input",placeholder:"0",onKeyPress:e=>{var t;e&&("."===e.key&&null!==(t=P.value)&&void 0!==t&&t.toString().includes(".")?e.preventDefault():/^[\d.]{1}$/u.test(e.key)||e.preventDefault())},onPaste:e=>{e.preventDefault();const t=_(e.clipboardData.getData("text"));null==w||w(t??"")},onChange:e=>{e.preventDefault(),e.stopPropagation();const t=_(e.target.value);null==w||w(t??"")}},P)),a.default.createElement(l.AssetPicker,{header:e,visibleTabs:[c.TabName.TOKENS],asset:t??undefined,onAssetChange:n,networkProps:I,customTokenListGenerator:A,isTokenListLoading:M,isMultiselectEnabled:N},(e,n)=>K&&!t?a.default.createElement(i.Button,{"data-testid":R.testId,onClick:e,size:i.ButtonSize.Lg,paddingLeft:6,paddingRight:6,fontWeight:f.FontWeight.Normal,style:{whiteSpace:"nowrap"}},L(J?"swapSwapTo":"bridgeTo")):a.default.createElement(S.BridgeAssetPickerButton,{onClick:e,networkImageSrc:n,asset:t??undefined,networkProps:I,"data-testid":R.testId}))),a.default.createElement(p.Row,{justifyContent:f.JustifyContent.spaceBetween,style:{height:24}},a.default.createElement(i.Text,{variant:f.TextVariant.bodyMd,fontWeight:f.FontWeight.Normal,color:K&&q?f.TextColor.warningDefault:f.TextColor.textAlternativeSoft,textAlign:f.TextAlign.End,ellipsis:!0},K&&$&&"0"===P.value?L("bridgeCalculatingAmount"):undefined,O&&(0,m.formatCurrencyAmount)(O,U,2)),!K&&Y&&t&&a.default.createElement(i.Text,{display:f.Display.Flex,gap:1,variant:f.TextVariant.bodyMd,color:W?f.TextColor.errorDefault:f.TextColor.textAlternativeSoft,style:{cursor:"default",textDecoration:"none"}},(0,m.formatTokenAmount)(G,Y,t.symbol),D&&a.default.createElement(i.ButtonLink,{variant:f.TextVariant.bodyMd,onClick:()=>D(Y)},L("max"))),K&&t&&V&&!(0,o.isNativeAddress)(t.address)&&a.default.createElement(i.Text,{display:f.Display.Flex,gap:1,variant:f.TextVariant.bodyMd,color:f.TextColor.textAlternativeSoft,onClick:()=>{(()=>{if(t&&V){const a=(0,o.formatChainIdToCaip)(V);let r="";if(a===T.MultichainNetworks.SOLANA){const e=T.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[a];e&&(r=(0,x.formatBlockExplorerAddressUrl)(e,t.address))}else{var e,n;const a=null==I||null===(e=I.network)||void 0===e||null===(e=e.blockExplorerUrls)||void 0===e?void 0:e[(null==I||null===(n=I.network)||void 0===n?void 0:n.defaultBlockExplorerUrlIndex)??0];a&&(r=(0,s.getAccountLink)(t.address,V,{blockExplorerUrl:a},undefined))}r&&(z(r),null==B||B(t))}})()},as:"a",style:{cursor:K?"pointer":"default",textDecoration:K?"underline":"none"}},(0,h.shortenString)(t.address,{truncatedCharLimit:11,truncatedStartChars:4,truncatedEndChars:4,skipCharacterInEnd:!1}))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-input-group.tsx"}],[6657,{"../../../components/component-library":5919,"../../../ducks/bridge/actions":6433,"../../../ducks/bridge/selectors":6435,"../../../helpers/constants/design-system":6458,"../../../hooks/useI18nContext":6583,"../layout":6651,"@metamask/bridge-controller":1147,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeTransactionSettingsModal=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../hooks/useI18nContext"),l=e("../../../helpers/constants/design-system"),c=e("../../../ducks/bridge/selectors"),u=e("../../../ducks/bridge/actions"),d=e("../layout");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const p=[o.BRIDGE_DEFAULT_SLIPPAGE,2];n.BridgeTransactionSettingsModal=({onClose:e,isOpen:t})=>{const n=(0,i.useI18nContext)(),m=(0,r.useDispatch)(),f=(0,r.useSelector)(c.getIsSolanaSwap),g=(0,r.useSelector)(c.getSlippage),h=f,[y,v]=(0,a.useState)(undefined),[k,b]=(0,a.useState)(undefined),[T,x]=(0,a.useState)(!0),[C,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&(h&&g===undefined?(S(!0),v(undefined),b(undefined)):(S(!1),g&&0!==g?p.includes(g)?(v(g),b(undefined)):(v(undefined),b(g.toString())):(v(o.BRIDGE_DEFAULT_SLIPPAGE),b(undefined))))},[g,h,t]);const w=(()=>{if(!k)return null;const e=Number(k.replace(",","."));return e<.5?{severity:l.SEVERITIES.WARNING,text:n("swapSlippageLowDescription",[e]),title:n("swapSlippageLowTitle")}:null})();return a.default.createElement(s.Modal,{isOpen:t,onClose:e,className:"bridge-settings-modal"},a.default.createElement(s.ModalOverlay,null),a.default.createElement(s.ModalContent,null,a.default.createElement(s.ModalHeader,{onClose:e},n("transactionSettings")),a.default.createElement(d.Column,{gap:3,padding:4},a.default.createElement(d.Row,{gap:1,justifyContent:l.JustifyContent.flexStart},a.default.createElement(s.Text,null,n("swapsMaxSlippage")),a.default.createElement(d.Tooltip,{position:s.PopoverPosition.Top,style:{zIndex:1051}},n("swapSlippageTooltip"))),a.default.createElement(d.Row,{gap:2,justifyContent:l.JustifyContent.flexStart},h&&a.default.createElement(s.Button,{size:s.ButtonSize.Sm,onClick:e=>{e.preventDefault(),e.stopPropagation(),v(undefined),b(undefined),S(!0)},variant:s.ButtonVariant.Secondary,borderColor:C?l.BorderColor.primaryDefault:l.BorderColor.borderDefault,borderWidth:C?2:1,backgroundColor:C?l.BackgroundColor.primaryMuted:l.BackgroundColor.backgroundDefault},a.default.createElement(s.Text,{color:C?l.TextColor.primaryDefault:l.TextColor.textDefault},n("swapSlippageAutoDescription"))),p.map(e=>{const t=!C&&y===e;return a.default.createElement(s.Button,{key:e,size:s.ButtonSize.Sm,onClick:t=>{t.preventDefault(),t.stopPropagation(),v(e),b(undefined),S(!1)},variant:s.ButtonVariant.Secondary,borderColor:t?l.BorderColor.primaryDefault:l.BorderColor.borderDefault,borderWidth:t?2:1,backgroundColor:t?l.BackgroundColor.primaryMuted:l.BackgroundColor.backgroundDefault},a.default.createElement(s.Text,{color:t?l.TextColor.primaryDefault:l.TextColor.textDefault},e,"%"))}),T&&a.default.createElement(s.Button,{size:s.ButtonSize.Sm,variant:s.ButtonVariant.Secondary,borderColor:k===undefined?l.BorderColor.borderDefault:l.BorderColor.primaryDefault,borderWidth:k===undefined?1:2,backgroundColor:k===undefined?l.BackgroundColor.backgroundDefault:l.BackgroundColor.primaryMuted,onClick:e=>{e.preventDefault(),e.stopPropagation(),x(!1),S(!1)}},a.default.createElement(s.Text,{color:k===undefined?l.TextColor.textDefault:l.TextColor.primaryDefault},k===undefined?n("customSlippage"):`${k}%`)),!T&&a.default.createElement(s.TextField,{borderColor:l.BorderColor.primaryDefault,borderWidth:2,borderRadius:l.BorderRadius.pill,type:s.TextFieldType.Text,value:k,onChange:e=>{const{value:t}=e.target;(""===t||/^\d*[.,]?\d*$/u.test(t))&&(v(undefined),b(t),S(!1))},autoFocus:!0,onBlur:()=>{x(!0)},onFocus:()=>{x(!1)},endAccessory:a.default.createElement(s.Text,{variant:l.TextVariant.bodyMd},"%")})),w&&a.default.createElement(s.Box,{marginTop:5},a.default.createElement(s.BannerAlert,{severity:w.severity,title:w.title,titleProps:{"data-testid":"swaps-banner-title"}},a.default.createElement(s.Text,null,w.text)))),a.default.createElement(s.ModalFooter,null,a.default.createElement(s.ButtonPrimary,{width:l.BlockSize.Full,size:s.ButtonPrimarySize.Md,variant:l.TextVariant.bodyMd,disabled:(C?undefined:y??(k?Number(k.replace(",",".")):undefined))===g,onClick:()=>{const t=C?undefined:y??Number(null==k?void 0:k.replace(",","."));t!==g&&(m((0,u.setSlippage)(t)),e())}},n("submit")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx"}],[6658,{"../../../../components/component-library":5919,"../../../../components/component-library/select-button/select-button.types":5956,"../../../../helpers/constants/design-system":6458,"../../../../helpers/utils/nfts":6501,"../../../../hooks/useI18nContext":6583,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeAssetPickerButton=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../../components/component-library/select-button/select-button.types"),s=e("../../../../components/component-library"),i=e("../../../../helpers/constants/design-system"),l=e("../../../../hooks/useI18nContext"),c=e("../../../../helpers/utils/nfts");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(null,arguments)}n.BridgeAssetPickerButton=({asset:e,networkProps:t,networkImageSrc:n,...a})=>{var d;const m=(0,l.useI18nContext)();return r.default.createElement(s.SelectButton,u({borderRadius:i.BorderRadius.pill,backgroundColor:i.BackgroundColor.backgroundDefault,borderColor:i.BorderColor.borderMuted,style:{padding:8,paddingRight:11,paddingInline:e?undefined:24,minWidth:"fit-content"},gap:0,size:o.SelectButtonSize.Lg,alignItems:i.AlignItems.center,descriptionProps:{variant:i.TextVariant.bodyMd,overflowWrap:i.OverflowWrap.BreakWord,ellipsis:!1},caretIconProps:{name:s.IconName.Arrow2Down,style:{display:i.Display.None}},label:r.default.createElement(s.Text,{variant:i.TextVariant.bodyLgMedium,ellipsis:!0},(null==e?void 0:e.symbol)??m("bridgeTo")),startAccessory:e?r.default.createElement(s.BadgeWrapper,{marginRight:2,badge:e?r.default.createElement(s.AvatarNetwork,{name:(null==t||null===(d=t.network)||void 0===d?void 0:d.name)??"",src:n,size:s.AvatarNetworkSize.Xs}):undefined},e?r.default.createElement(s.AvatarToken,{src:(0,c.getNftImage)(e.image)||undefined,backgroundColor:i.BackgroundColor.backgroundHover,name:e.symbol}):undefined):undefined},a))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/bridge-asset-picker-button.tsx"}],[6659,{"../../../../../app/scripts/lib/multichain/address":166,"../../../../../shared/constants/network":5262,"../../../../components/app/preferred-avatar":5645,"../../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component":5839,"../../../../components/component-library":5919,"../../../../ducks/bridge/selectors":6435,"../../../../helpers/constants/common":6456,"../../../../helpers/constants/design-system":6458,"../../../../helpers/utils/util":6514,"../../../../hooks/useAccountTotalCrossChainFiatBalance":6563,"../../../../hooks/useGetFormattedTokensPerChain":6582,"../../../../hooks/useI18nContext":6583,"../../../../hooks/useMultichainBalances":6591,"../../../../selectors":7345,"../../layout":6651,"@metamask/bridge-controller":1147,"@metamask/design-system-react":1577,"@metamask/keyring-api":1914,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=C(e("react")),r=e("react-redux"),o=e("@metamask/bridge-controller"),s=e("@metamask/design-system-react"),i=e("@metamask/keyring-api"),l=e("../../../../helpers/utils/util"),c=e("../../../../components/component-library"),u=e("../../../../helpers/constants/design-system"),d=e("../../../../selectors"),m=e("../../../../../app/scripts/lib/multichain/address"),p=e("../../../../hooks/useGetFormattedTokensPerChain"),f=e("../../../../hooks/useAccountTotalCrossChainFiatBalance"),g=C(e("../../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component")),h=e("../../../../helpers/constants/common"),y=e("../../../../components/app/preferred-avatar"),v=e("../../layout"),k=e("../../../../hooks/useI18nContext"),b=e("../../../../../shared/constants/network"),T=e("../../../../ducks/bridge/selectors"),x=e("../../../../hooks/useMultichainBalances");function C(e){return e&&e.__esModule?e:{default:e}}const S=({account:e,selected:t=!1,onClick:n,isExternal:C=!1})=>{const S=(0,r.useSelector)(d.getShouldHideZeroBalanceTokens),w=(0,r.useSelector)(d.getIsTokenNetworkFilterEqualCurrentNetwork),E=(0,r.useSelector)(d.getChainIdsToPoll),_=(0,i.isEvmAccountType)(e.type),I=(0,r.useSelector)(T.getToChain),{balanceByChainId:M}=(0,x.useMultichainBalances)("id"in e?e.id:undefined),{formattedTokensWithBalancesPerChain:A}=(0,p.useGetFormattedTokensPerChain)(e,S,w,E),{totalFiatBalance:P}=(0,f.useAccountTotalCrossChainFiatBalance)(e,A);let O;if(_)O=P;else{var D;const e=(null==I?void 0:I.chainId)&&((0,o.isSolanaChainId)(null==I?void 0:I.chainId)?I.chainId:(0,o.formatChainIdToHex)(null==I?void 0:I.chainId));O=e?null===(D=M[e])||void 0===D?void 0:D.toString():"0"}const N=(0,k.useI18nContext)();return a.default.createElement(v.Row,{gap:4,padding:2,paddingInline:4,onClick:n,className:t?"multichain-account-list-item--selected":"multichain-account-list-item"},a.default.createElement(c.Box,{style:{borderRadius:12,borderColor:"#8b99ff",borderWidth:t?2:0,padding:t?1:3,height:38}},a.default.createElement(y.PreferredAvatar,{style:{minWidth:"max-content",borderRadius:8},address:e.address})),a.default.createElement(v.Column,{gap:1,"data-testid":t?"selected-to-account":undefined},a.default.createElement(v.Row,{gap:1,style:{maxWidth:"min-content"}},a.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium,ellipsis:!0},e.displayName),t&&a.default.createElement(s.Icon,{name:s.IconName.CheckBold,size:s.IconSize.Md,color:s.IconColor.PrimaryDefault})),a.default.createElement(c.Text,{variant:u.TextVariant.bodySm,color:u.TextColor.textAlternativeSoft,"data-testid":"account-list-address"},(0,l.shortenAddress)((0,m.normalizeSafeAddress)(e.address)))),C?a.default.createElement(c.Tag,{label:N("externalAccount"),labelProps:{variant:u.TextVariant.bodyXs},style:{whiteSpace:"nowrap"}}):a.default.createElement(v.Column,{alignItems:u.AlignItems.flexEnd,width:u.BlockSize.Max,gap:1},a.default.createElement(g.default,{ethNumberOfDecimals:3,value:O,type:h.PRIMARY,showFiat:!0,isAggregatedFiatOverviewBalance:!0,hideLabel:!0,"data-testid":"first-currency-display"}),a.default.createElement(c.AvatarNetwork,{src:b.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null!=I&&I.chainId&&!(0,o.isSolanaChainId)(null==I?void 0:I.chainId)?(0,o.formatChainIdToHex)(null==I?void 0:I.chainId):(null==I?void 0:I.chainId)??""],name:(null==I?void 0:I.name)??"",size:c.AvatarNetworkSize.Xs})))};n.default=a.default.memo(S)}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-account-list-item.tsx"}],[6660,{"../../../../../shared/lib/translate":5347,"../../../../components/component-library":5919,"../../../../ducks/bridge/selectors":6435,"../../../../helpers/constants/design-system":6458,"../../hooks/useExternalAccountResolution":6646,"./destination-account-list-item":6659,"@metamask/bridge-controller":1147,"@metamask/design-system-react":1577,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DestinationAccountPickerModal=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=e("@metamask/bridge-controller"),i=e("@metamask/design-system-react"),l=e("../../../../components/component-library"),c=e("../../../../helpers/constants/design-system"),u=e("../../../../../shared/lib/translate"),d=e("../../../../ducks/bridge/selectors"),m=e("../../hooks/useExternalAccountResolution"),p=(a=e("./destination-account-list-item"))&&a.__esModule?a:{default:a};function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.DestinationAccountPickerModal=({onAccountSelect:e,selectedAccount:t,isOpen:n,onClose:a})=>{const[f,g]=(0,r.useState)(""),h=(0,o.useSelector)(d.getToAccounts),y=(0,o.useSelector)(d.getToChain),v=!(null==y||!y.chainId)&&(0,s.isSolanaChainId)(y.chainId),k=(0,m.useExternalAccountResolution)({searchQuery:f,isDestinationSolana:v}),b=(0,r.useMemo)(()=>h.filter(e=>{const t=e.displayName.toLowerCase().includes(f.trim().toLowerCase()),n=e.address.toLowerCase().includes(f.trim().toLowerCase());return t||n}),[h,f]),T=(0,o.useSelector)(d.getIsToOrFromSolana);return r.default.createElement(l.Modal,{isOpen:n||T&&!t,onClose:()=>{g(""),a()},"data-testid":"destination-account-picker-modal"},r.default.createElement(l.ModalOverlay,null),r.default.createElement(l.ModalContent,{paddingTop:4,paddingBottom:4,gap:3},r.default.createElement(l.ModalHeader,{onClose:a},(0,u.t)("recipient")),r.default.createElement(l.TextField,{autoFocus:!0,"data-testid":"destination-account-picker-modal-search-input",placeholder:(v?(0,u.t)("destinationAccountPickerSearchPlaceholderToSolana"):(0,u.t)("destinationAccountPickerSearchPlaceholderToMainnet"))??undefined,marginInline:4,value:f,onChange:e=>g(e.target.value),backgroundColor:c.BackgroundColor.backgroundSubsection,borderRadius:c.BorderRadius.XL,borderWidth:0,color:c.TextColor.textAlternative,inputProps:{disableStateStyles:!0},style:{minHeight:48,marginBottom:12,outline:"none"},startAccessory:r.default.createElement(i.Icon,{name:i.IconName.Search,size:i.IconSize.Md})}),r.default.createElement(l.ModalBody,{paddingRight:0,paddingLeft:0,"data-testid":"destination-account-picker-modal-body"},b.map(n=>r.default.createElement(p.default,{key:n.id+n.address+n.displayName,account:n,onClick:()=>{e(n)},selected:!!t&&n.address.toLowerCase()===t.address.toLowerCase(),isExternal:!1})),k&&r.default.createElement(p.default,{key:"external-account",account:k,onClick:()=>{e(k)},selected:!!t&&k.address.toLowerCase()===t.address.toLowerCase(),isExternal:!0}),0===b.length&&!k&&r.default.createElement(l.Text,{textAlign:c.TextAlign.Center},f?(0,u.t)("destinationAccountPickerNoMatching"):(0,u.t)("destinationAccountPickerNoEligible")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-account-picker-modal.tsx"}],[6661,{"./bridge-cta-button":6654,"./bridge-cta-info-text":6655,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PrepareBridgePageFooter=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("./bridge-cta-button"),s=e("./bridge-cta-info-text");n.PrepareBridgePageFooter=e=>r.default.createElement("div",{style:{display:"contents"}},r.default.createElement(s.BridgeCTAInfoText,null),r.default.createElement(o.BridgeCTAButton,e))}}},{package:"$root$",file:"ui/pages/bridge/prepare/prepare-bridge-page-footer.tsx"}],[6662,{"../../../../shared/constants/network":5262,"../../../../shared/constants/time":5277,"../../../../shared/lib/asset-utils":5288,"../../../../shared/lib/swaps-utils":5339,"../../../../shared/lib/trace":5342,"../../../../shared/modules/selectors":5370,"../../../../shared/types/security-alerts-api":5380,"../../../components/component-library":5919,"../../../components/multichain":6142,"../../../ducks/bridge/actions":6433,"../../../ducks/bridge/selectors":6435,"../../../ducks/bridge/utils":6436,"../../../ducks/locale/locale":6444,"../../../helpers/constants/design-system":6458,"../../../helpers/utils/hardware":6492,"../../../hooks/bridge/useBridgeQueryParams":6521,"../../../hooks/bridge/useIsTxSubmittable":6525,"../../../hooks/bridge/useSmartSlippage":6527,"../../../hooks/bridge/useTokenAlerts":6528,"../../../hooks/bridge/useTokensWithFiltering":6529,"../../../hooks/ramps/useRamps/useRamps":6552,"../../../hooks/useI18nContext":6583,"../../../hooks/useMultichainSelector":6592,"../../../selectors":7345,"../../../selectors/multichain":7354,"../../../store/controller-actions/network-order-controller":7372,"../../swaps/mascot-background-animation/mascot-background-animation":7295,"../hooks/useDestinationAccount":6645,"../hooks/useIsMultichainSwap":6647,"../layout":6651,"../quotes/multichain-bridge-quote-card":6664,"../utils/quote":6676,"./bridge-input-group":6656,"./components/destination-account-picker-modal":6660,"./prepare-bridge-page-footer":6661,"@metamask/bridge-controller":1147,"@metamask/utils":2632,classnames:3623,"ethereumjs-util":3849,lodash:4362,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEnableMissingNetwork=n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=V(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=H(e("classnames")),s=e("lodash"),i=e("ethereumjs-util"),l=e("@metamask/bridge-controller"),c=e("@metamask/utils"),u=e("../../../ducks/bridge/actions"),d=e("../../../ducks/bridge/selectors"),m=e("../../../components/component-library"),p=e("../../../helpers/constants/design-system"),f=e("../../../hooks/useI18nContext"),g=e("../../../hooks/bridge/useTokensWithFiltering"),h=e("../../../../shared/lib/swaps-utils"),y=e("../utils/quote"),v=e("../../../ducks/bridge/utils"),k=H(e("../../swaps/mascot-background-animation/mascot-background-animation")),b=e("../layout"),T=H(e("../../../hooks/ramps/useRamps/useRamps")),x=e("../../../selectors"),C=e("../../../helpers/utils/hardware"),S=e("../../../../shared/constants/time"),w=e("../../../ducks/locale/locale"),E=e("../hooks/useIsMultichainSwap"),_=e("../../../hooks/useMultichainSelector"),I=e("../../../selectors/multichain"),M=e("../quotes/multichain-bridge-quote-card"),A=e("../../../../shared/types/security-alerts-api"),P=e("../../../hooks/bridge/useTokenAlerts"),O=e("../hooks/useDestinationAccount"),D=e("../../../components/multichain"),N=e("../../../hooks/bridge/useIsTxSubmittable"),B=e("../../../../shared/lib/asset-utils"),R=e("../../../../shared/modules/selectors"),F=e("../../../../shared/lib/trace"),j=e("../../../../shared/constants/network"),L=e("../../../hooks/bridge/useBridgeQueryParams"),$=e("../../../hooks/bridge/useSmartSlippage"),W=e("../../../store/controller-actions/network-order-controller"),q=e("./bridge-input-group"),U=e("./prepare-bridge-page-footer"),G=e("./components/destination-account-picker-modal");function H(e){return e&&e.__esModule?e:{default:e}}function V(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(V=function(e){return e?n:t})(e)}const z=()=>{const e=(0,r.useSelector)(x.getEnabledNetworksByNamespace),t=(0,r.useDispatch)();return(0,a.useCallback)(n=>{const a=Object.keys(e??{}),r=(0,l.formatChainIdToCaip)(n),{namespace:o}=(0,c.parseCaipChainId)(r);if(o){if(j.FEATURED_NETWORK_CHAIN_IDS.includes(n)){a.includes(n)||t((0,W.enableAllPopularNetworks)())}}},[t,e])};n.useEnableMissingNetwork=z;n.default=({onOpenSettings:e})=>{var t,n,c,j;const W=(0,r.useDispatch)(),H=z(),V=(0,f.useI18nContext)(),Q=(0,r.useSelector)(d.getFromChain),Y=(0,r.useSelector)(e=>(0,d.getIsUnifiedUIEnabled)(e,null==Q?void 0:Q.chainId)),K=(0,r.useSelector)(d.getIsSwap),J=(0,E.useIsMultichainSwap)(),X=Y?K:J,Z=(0,r.useSelector)(d.getFromToken),ee=(0,r.useSelector)(x.getTokenList),te=(0,r.useSelector)(d.getToToken),ne=(0,r.useSelector)(d.getFromChains),ae=(0,r.useSelector)(d.getToChains),re=(0,r.useSelector)(d.getToChain),oe=(0,a.useMemo)(()=>(!Q||!(0,l.isSolanaChainId)(Q.chainId))&&0===Object.keys(ee).length,[ee,Q]),se=(0,r.useSelector)(d.getFromAmount),ie=(0,r.useSelector)(d.getFromAmountInCurrency),le=(0,r.useSelector)(e=>(0,R.getIsSmartTransaction)(e,null==Q?void 0:Q.chainId)),ce=(0,_.useMultichainSelector)(I.getMultichainProviderConfig),ue=(0,r.useSelector)(d.getSlippage),de=(0,r.useSelector)(d.getQuoteRequest),{isLoading:me,activeQuote:pe,quotesRefreshCount:fe}=(0,r.useSelector)(d.getBridgeQuotes),ge=(0,r.useSelector)(e=>(0,d.getIsQuoteExpired)(e,Date.now())),he=(0,r.useSelector)(d.getWasTxDeclined),ye=(0,y.isQuoteExpiredOrInvalid)({activeQuote:pe,toToken:te,toChain:re,fromChain:Q,isQuoteExpired:ge,insufficientBal:de.insufficientBal})?undefined:pe,ve=(0,r.useSelector)(d.getFromAccount),ke=(0,r.useSelector)(x.getCurrentKeyring),be=(0,C.isHardwareKeyring)(null==ke?void 0:ke.type),Te=(0,r.useSelector)(d.getHardwareWalletName),xe=(0,N.useIsTxSubmittable)(),Ce=(0,r.useSelector)(w.getIntlLocale),Se=(0,_.useMultichainSelector)(I.getMultichainNativeCurrency),{isEstimatedReturnLow:we,isNoQuotesAvailable:Ee,isInsufficientGasForQuote:_e,isInsufficientBalance:Ie}=(0,r.useSelector)(d.getValidationErrors),Me=(0,r.useSelector)(d.getTxAlerts),{openBuyCryptoInPdapp:Ae}=(0,T.default)(),{tokenAlert:Pe}=(0,P.useTokenAlerts)(),{selectedDestinationAccount:Oe,setSelectedDestinationAccount:De,isDestinationAccountPickerOpen:Ne,setIsDestinationAccountPickerOpen:Be}=(0,O.useDestinationAccount)(),{filteredTokenListGenerator:Re,isLoading:Fe}=(0,g.useTokensWithFiltering)((null==re?void 0:re.chainId)??(null==Q?void 0:Q.chainId),(null==Q?void 0:Q.chainId)===(null==re?void 0:re.chainId)&&Z&&Q?(()=>{let e="";if((0,l.isNativeAddress)(Z.address))e="";else if((0,l.isSolanaChainId)(Q.chainId))e=Z.address||"";else{var t;e=(null===(t=Z.address)||void 0===t?void 0:t.toLowerCase())||""}return{...Z,address:e,chainId:(0,l.formatChainIdToCaip)(Q.chainId)}})():null,Oe&&"id"in Oe?Oe.id:undefined),[je,Le]=(0,a.useState)(!1),[$e,We]=(0,a.useState)(!0);(0,a.useEffect)(()=>We(!0),[fe]);const[qe,Ue]=(0,a.useState)(!0);(0,a.useEffect)(()=>Ue(!0),[Pe]);const[Ge,He]=(0,a.useState)(!0);(0,a.useEffect)(()=>He(!0),[null==te?void 0:te.address]);const[Ve,ze]=(0,a.useState)(!1);(0,a.useEffect)(()=>{ze(!0);const e=setTimeout(()=>{ze(!1)},S.SECOND);return()=>{clearTimeout(e)}},[je]);const Qe=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;(we||_e||$e||Pe||Me||be)&&(null===(e=Qe.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"}))},[we,_e,$e,Pe,Me,be]);const Ye=(0,r.useSelector)(d.getIsToOrFromSolana),Ke=(0,a.useMemo)(()=>{var e;return{srcTokenAddress:null==Z?void 0:Z.address,destTokenAddress:null==te?void 0:te.address,srcTokenAmount:se&&null!=Z&&Z.decimals?(0,h.calcTokenValue)(["","."].includes(se)?"0":se,Z.decimals).toFixed().split(".")[0]:undefined,srcChainId:null==Q?void 0:Q.chainId,destChainId:null==re?void 0:re.chainId,insufficientBal:!(null==ce||null===(e=ce.rpcUrl)||void 0===e||!e.includes("localhost"))||undefined,slippage:ue,walletAddress:(null==ve?void 0:ve.address)??"",destWalletAddress:null==Oe?void 0:Oe.address,gasIncluded:le&&X}},[null==Z?void 0:Z.address,null==Z?void 0:Z.decimals,null==te?void 0:te.address,se,null==Q?void 0:Q.chainId,null==re?void 0:re.chainId,ue,null==ve?void 0:ve.address,null==Oe?void 0:Oe.address,null==ce?void 0:ce.rpcUrl,le,X]),Je=(0,a.useCallback)((0,s.debounce)((...e)=>{W((0,u.updateQuoteRequestParams)(...e))},300),[W]);(0,a.useEffect)(()=>()=>{Je.cancel()},[]),(0,a.useEffect)(()=>{W((0,u.setSelectedQuote)(null));const e={stx_enabled:le,token_symbol_source:(null==Z?void 0:Z.symbol)??"",token_symbol_destination:(null==te?void 0:te.symbol)??"",security_warnings:[null==Me?void 0:Me.descriptionId,null==Pe?void 0:Pe.titleId].filter(Boolean)};Je(Ke,e)},[Ke]),(0,$.useSmartSlippage)({fromChain:Q,toChain:re,fromToken:Z,toToken:te,isSwap:X}),(0,a.useEffect)(()=>{if((0,F.endTrace)({name:X?F.TraceName.SwapViewLoaded:F.TraceName.BridgeViewLoaded,timestamp:Date.now()}),ye){const{srcAsset:e,destAsset:t,destChainId:n,srcChainId:a}=ye.quote;e&&t&&n&&(W((0,u.setFromToken)({...e,chainId:a})),W((0,u.setToToken)({...t,chainId:n})))}else W((0,u.resetBridgeState)())},[]),(0,L.useBridgeQueryParams)();const Xe=(null==te?void 0:te.occurrences)??(null==te||null===(t=te.aggregators)||void 0===t?void 0:t.length),Ze=(null==te?void 0:te.address)&&!(0,l.isNativeAddress)(null==te?void 0:te.address),[et,tt]=(0,a.useState)(!1),[nt,at]=(0,a.useState)(null),[rt,ot]=(0,a.useState)(0);return a.default.createElement(a.default.Fragment,null,a.default.createElement(G.DestinationAccountPickerModal,{isOpen:Ne,onAccountSelect:e=>{De(e),Be(!1)},selectedAccount:Oe,onClose:()=>Be(!1)}),a.default.createElement(b.Column,{className:"prepare-bridge-page",gap:4},a.default.createElement(q.BridgeInputGroup,{header:V(Y?"swapSelectToken":X?"swapSwapFrom":"bridgeFrom"),token:Z,onAmountChange:e=>{W((0,u.setFromTokenInputValue)(e))},onAssetChange:e=>{const t={...e,address:e.address??(0,i.zeroAddress)()};W((0,u.setFromToken)(t)),W((0,u.setFromTokenInputValue)(null)),e.address===(null==te?void 0:te.address)&&W((0,u.setToToken)(null))},networkProps:{network:Q,networks:X&&!Y?undefined:ne,onNetworkChange:e=>{!Y&&null!=e&&e.chainId&&e.chainId===(null==re?void 0:re.chainId)&&W((0,u.setToChainId)(null)),(0,v.isNetworkAdded)(e)&&H(e.chainId),W((0,u.setFromChain)({networkConfig:e,selectedAccount:ve}))},header:V("yourNetworks")},isMultiselectEnabled:Y||!X,onMaxButtonClick:(0,l.isNativeAddress)((null==Z?void 0:Z.address)??"")?undefined:e=>{W((0,u.setFromTokenInputValue)(e))},amountInFiat:ie.valueInCurrency.gt(0)?ie.valueInCurrency.toString():undefined,amountFieldProps:{testId:"from-amount",autoFocus:!0,value:se||undefined},containerProps:{paddingInline:4},isTokenListLoading:oe,buttonProps:{testId:"bridge-source-button"},onBlockExplorerClick:e=>{at(e),tt(!0),ot(e=>e+1)}}),a.default.createElement(b.Column,{height:p.BlockSize.Full,padding:4,gap:4,backgroundColor:p.BackgroundColor.backgroundAlternativeSoft,style:{position:"relative"}},a.default.createElement(m.Box,{className:"prepare-bridge-page__switch-tokens",display:p.Display.Flex,backgroundColor:p.BackgroundColor.backgroundAlternativeSoft,style:{position:"absolute",top:"-20px",right:"calc(50% - 20px)",border:"2px solid var(--color-background-default)",borderRadius:"100%",opacity:1,width:40,height:40,justifyContent:p.JustifyContent.center}},a.default.createElement(m.ButtonIcon,{iconProps:{className:(0,o.default)({rotate:je})},style:{alignSelf:"center",borderRadius:"100%",width:"100%",height:"100%"},"data-testid":"switch-tokens",ariaLabel:"switch-tokens",iconName:m.IconName.Arrow2Down,color:p.IconColor.iconAlternativeSoft,disabled:Ve||!(0,l.isValidQuoteRequest)(de,!1)||re&&!(0,v.isNetworkAdded)(re),onClick:()=>{var e;W((0,u.setSelectedQuote)(null)),(null==re?void 0:re.chainId)&&Z&&te&&W((0,u.trackUnifiedSwapBridgeEvent)(l.UnifiedSwapBridgeEventName.InputSourceDestinationFlipped,{token_symbol_source:(null==te?void 0:te.symbol)??null,token_symbol_destination:(null==Z?void 0:Z.symbol)??null,token_address_source:(0,B.toAssetId)(te.address??"",(0,l.formatChainIdToCaip)(te.chainId??""))??(null===(e=(0,l.getNativeAssetForChainId)(re.chainId))||void 0===e?void 0:e.assetId),token_address_destination:(0,B.toAssetId)(Z.address??"",(0,l.formatChainIdToCaip)(Z.chainId??""))??null,chain_id_source:(0,l.formatChainIdToCaip)(re.chainId),chain_id_destination:null!=Q&&Q.chainId?(0,l.formatChainIdToCaip)(null==Q?void 0:Q.chainId):null,security_warnings:[]})),Le(!je);(Y||!X)&&W((0,u.setFromChain)({networkConfig:re,token:te,selectedAccount:ve})),W((0,u.setToToken)(Z))}})),a.default.createElement(q.BridgeInputGroup,{header:V(Y?"swapSelectToken":X?"swapSwapTo":"bridgeTo"),token:te,onAssetChange:e=>{const t={...e,address:e.address??(0,i.zeroAddress)()};W((0,u.setToToken)(t))},networkProps:X&&!Y?undefined:{network:re,networks:ae,onNetworkChange:e=>{(0,v.isNetworkAdded)(e)&&H(e.chainId),W((0,u.setToChainId)(e.chainId))},header:V("yourNetworks"),shouldDisableNetwork:Y?undefined:({chainId:e})=>e===(null==Q?void 0:Q.chainId)},customTokenListGenerator:re&&(J||re.chainId!==(null==Q?void 0:Q.chainId))?Re:undefined,amountInFiat:(null==ye||null===(n=ye.toTokenAmount)||void 0===n?void 0:n.valueInCurrency)||undefined,amountFieldProps:{testId:"to-amount",readOnly:!0,disabled:!0,value:null!=ye&&null!==(c=ye.toTokenAmount)&&void 0!==c&&c.amount?(0,y.formatTokenAmount)(Ce,ye.toTokenAmount.amount):"0",autoFocus:!1,className:null!=ye&&null!==(j=ye.toTokenAmount)&&void 0!==j&&j.amount?"amount-input defined":"amount-input"},isTokenListLoading:Fe,buttonProps:{testId:"bridge-destination-button"},onBlockExplorerClick:e=>{at(e),tt(!0),ot(e=>e+1)}}),a.default.createElement(b.Column,{justifyContent:me&&!pe?p.JustifyContent.center:p.JustifyContent.flexEnd,width:p.BlockSize.Full,height:p.BlockSize.Full,gap:3},!he&&pe&&a.default.createElement(M.MultichainBridgeQuoteCard,{onOpenRecipientModal:()=>Be(!0),onOpenSlippageModal:e,selectedDestinationAccount:Oe}),Ee&&!ge&&a.default.createElement(m.BannerAlert,{severity:m.BannerAlertSeverity.Danger,description:V("noOptionsAvailableMessage"),textAlign:p.TextAlign.Left}),me&&!pe?a.default.createElement(a.default.Fragment,null,a.default.createElement(m.Text,{textAlign:p.TextAlign.Center,color:p.TextColor.textAlternativeSoft},V("swapFetchingQuotes")),a.default.createElement(k.default,{height:"64",width:"64"})):a.default.createElement(U.PrepareBridgePageFooter,{onFetchNewQuotes:()=>{Je(Ke,{stx_enabled:le,token_symbol_source:(null==Z?void 0:Z.symbol)??"",token_symbol_destination:(null==te?void 0:te.symbol)??"",security_warnings:[]})},needsDestinationAddress:Ye&&!Oe})))),a.default.createElement(b.Column,{paddingInline:4,gap:4,backgroundColor:p.BackgroundColor.backgroundAlternativeSoft},be&&xe&&Te&&ye&&a.default.createElement(m.BannerAlert,{title:V("hardwareWalletSubmissionWarningTitle"),textAlign:p.TextAlign.Left},a.default.createElement("ul",{style:{listStyle:"disc"}},a.default.createElement("li",null,a.default.createElement(m.Text,{variant:p.TextVariant.bodyMd},V("hardwareWalletSubmissionWarningStep1",[Te]))),a.default.createElement("li",null,a.default.createElement(m.Text,{variant:p.TextVariant.bodyMd},V("hardwareWalletSubmissionWarningStep2",[Te]))))),Me&&ye&&a.default.createElement(m.BannerAlert,{severity:m.BannerAlertSeverity.Danger,title:V(Me.titleId),description:`${Me.description} ${V(Me.descriptionId)}`,textAlign:p.TextAlign.Left}),Ge&&te&&Ze&&Xe&&Number(Xe)<2&&a.default.createElement(m.BannerAlert,{severity:m.BannerAlertSeverity.Warning,title:V("bridgeTokenCannotVerifyTitle"),description:V("bridgeTokenCannotVerifyDescription"),textAlign:p.TextAlign.Left,onClose:()=>He(!1)}),Pe&&qe&&a.default.createElement(m.BannerAlert,{title:Pe.titleId?V(Pe.titleId):"",severity:Pe.type===A.TokenFeatureType.MALICIOUS?m.BannerAlertSeverity.Danger:m.BannerAlertSeverity.Warning,description:Pe.descriptionId?V(Pe.descriptionId):Pe.description,textAlign:p.TextAlign.Left,onClose:()=>Ue(!1)}),!me&&ye&&!Ie&&_e&&a.default.createElement(m.BannerAlert,{title:V("bridgeValidationInsufficientGasTitle",[Se]),severity:m.BannerAlertSeverity.Danger,description:V("bridgeValidationInsufficientGasMessage",[Se]),textAlign:p.TextAlign.Left,actionButtonLabel:V("buyMoreAsset",[Se]),actionButtonOnClick:()=>Ae()}),we&&$e&&ye&&a.default.createElement(m.BannerAlert,{title:V("lowEstimatedReturnTooltipTitle"),severity:m.BannerAlertSeverity.Warning,description:V("lowEstimatedReturnTooltipMessage",[100*l.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE]),textAlign:p.TextAlign.Left,onClose:()=>We(!1)}),a.default.createElement("div",{ref:Qe})),et&&nt&&a.default.createElement("div",{style:{position:"absolute",bottom:50,left:"50%",transform:"translateX(-50%)",zIndex:1e3,width:"100%",display:"flex",justifyContent:"center"}},a.default.createElement(D.ToastContainer,null,a.default.createElement(D.Toast,{key:rt,text:V("bridgeBlockExplorerLinkCopied"),onClose:()=>tt(!1),autoHideTime:2500,startAdornment:a.default.createElement(m.AvatarFavicon,{name:nt.symbol,size:m.AvatarFaviconSize.Sm,src:nt.image})}))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/prepare-bridge-page.tsx"}],[6663,{"../../../../shared/modules/selectors":5370,"../../../components/component-library":5919,"../../../ducks/bridge/actions":6433,"../../../ducks/bridge/selectors":6435,"../../../ducks/locale/locale":6444,"../../../ducks/metamask/metamask":6445,"../../../helpers/constants/design-system":6458,"../../../hooks/useI18nContext":6583,"../../../hooks/useMultichainSelector":6592,"../../../selectors/multichain":7354,"../layout":6651,"../utils/quote":6676,"@metamask/bridge-controller":1147,"@metamask/snaps-sdk/jsx":2486,"bignumber.js":3481,lodash:4362,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeQuotesModal=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("@metamask/snaps-sdk/jsx"),s=e("react-redux"),i=e("lodash"),l=e("@metamask/bridge-controller"),c=e("bignumber.js"),u=e("../../../components/component-library"),d=e("../../../helpers/constants/design-system"),m=e("../utils/quote"),p=e("../../../hooks/useI18nContext"),f=e("../../../ducks/bridge/actions"),g=e("../../../ducks/bridge/selectors"),h=e("../layout"),y=e("../../../ducks/metamask/metamask"),v=e("../../../ducks/locale/locale"),k=e("../../../selectors/multichain"),b=e("../../../hooks/useMultichainSelector"),T=e("../../../../shared/modules/selectors");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x.apply(null,arguments)}n.BridgeQuotesModal=({onClose:e,...t})=>{const n=(0,p.useI18nContext)(),a=(0,s.useDispatch)(),C=(0,s.useSelector)(g.getFromToken),S=(0,s.useSelector)(g.getToToken),w=(0,s.useSelector)(g.getFromChain),{insufficientBal:E}=(0,s.useSelector)(g.getQuoteRequest),_=(0,s.useSelector)(e=>(0,T.getIsSmartTransaction)(e,null==w?void 0:w.chainId)),{sortedQuotes:I,activeQuote:M,recommendedQuote:A}=(0,s.useSelector)(g.getBridgeQuotes),P=(0,s.useSelector)(g.getBridgeSortOrder),O=(0,s.useSelector)(y.getCurrentCurrency),D=(0,b.useMultichainSelector)(k.getMultichainNativeCurrency),N=(0,s.useSelector)(v.getIntlLocale);return r.default.createElement(u.Modal,x({className:"quotes-modal",onClose:e},t),r.default.createElement(u.ModalOverlay,null),r.default.createElement(u.ModalContent,{modalDialogProps:{padding:0}},r.default.createElement(u.ModalHeader,{onBack:e},r.default.createElement(u.Text,{variant:d.TextVariant.headingSm,textAlign:d.TextAlign.Center},n("swapSelectAQuote"))),r.default.createElement(h.Row,{paddingTop:3,paddingBottom:1,paddingInline:4},[[l.SortOrder.COST_ASC,n("bridgeNetCost"),o.IconName.Arrow2Up],[l.SortOrder.ETA_ASC,n("time"),o.IconName.Arrow2Down]].map(([e,t,n])=>r.default.createElement(u.ButtonLink,{key:t,onClick:()=>{var t,n;a((0,f.setSortOrder)(e)),w&&A&&a((0,f.trackUnifiedSwapBridgeEvent)(l.UnifiedSwapBridgeEventName.AllQuotesSorted,{can_submit:!E,sort_order:P,price_impact:Number((null===(t=A.quote)||void 0===t||null===(t=t.priceData)||void 0===t?void 0:t.priceImpact)??"0"),gas_included:Boolean(null==A||null===(n=A.quote)||void 0===n?void 0:n.gasIncluded),token_symbol_source:(null==C?void 0:C.symbol)??(0,l.getNativeAssetForChainId)(w.chainId).symbol,token_symbol_destination:(null==S?void 0:S.symbol)??null,stx_enabled:_,best_quote_provider:(0,l.formatProviderLabel)(A.quote)}))},startIconName:P===e&&P===l.SortOrder.ETA_ASC?n:undefined,startIconProps:{size:u.IconSize.Xs},endIconName:P===e&&P===l.SortOrder.COST_ASC?n:undefined,endIconProps:{size:u.IconSize.Xs},color:P===e?d.TextColor.primaryDefault:d.TextColor.textAlternativeSoft},r.default.createElement(u.Text,{variant:P===e?d.TextVariant.bodySmMedium:d.TextVariant.bodySm,color:P===e?d.TextColor.primaryDefault:d.TextColor.textAlternativeSoft},t)))),r.default.createElement(h.Column,{style:{overflow:"scroll"}},I.map((t,o)=>{const{totalNetworkFee:s,estimatedProcessingTimeInSeconds:p,toTokenAmount:g,cost:y,sentAmount:v,quote:{destAsset:k,bridges:b,requestId:T,gasIncluded:x}}=t,C=T===(null==M?void 0:M.quote.requestId),S=T===(null==A?void 0:A.quote.requestId);return r.default.createElement(h.Row,{alignItems:d.AlignItems.flexStart,key:o,backgroundColor:C?d.BackgroundColor.primaryMuted:undefined,onClick:()=>{var n,r,o;a((0,f.setSelectedQuote)(t)),a((0,f.trackUnifiedSwapBridgeEvent)(l.UnifiedSwapBridgeEventName.QuoteSelected,{can_submit:!E,is_best_quote:S,best_quote_provider:(0,l.formatProviderLabel)(null==t?void 0:t.quote),usd_quoted_gas:Number((null===(n=t.gasFee)||void 0===n||null===(n=n.effective)||void 0===n?void 0:n.usd)??0),quoted_time_minutes:t.estimatedProcessingTimeInSeconds/60,usd_quoted_return:Number(t.toTokenAmount.usd),provider:(0,l.formatProviderLabel)(t.quote),price_impact:Number((null===(r=t.quote)||void 0===r||null===(r=r.priceData)||void 0===r?void 0:r.priceImpact)??"0"),gas_included:Boolean(null===(o=t.quote)||void 0===o?void 0:o.gasIncluded)})),e()},paddingInline:4,paddingTop:3,paddingBottom:3,style:{position:"relative"}},C&&r.default.createElement(h.Column,{style:{position:"absolute",left:4,top:4,height:"calc(100% - 8px)",width:4,borderRadius:8},backgroundColor:d.BackgroundColor.primaryDefault}),r.default.createElement(h.Column,null,r.default.createElement(u.Text,{variant:d.TextVariant.bodyMd},x?(0,m.formatCurrencyAmount)(new c.BigNumber(v.valueInCurrency??0).minus(g.valueInCurrency??0).toString(),O,2):(0,m.formatCurrencyAmount)(y.valueInCurrency,O,2)),[x&&null!=v&&v.valueInCurrency?n("quotedTotalCost",[(0,m.formatCurrencyAmount)(v.valueInCurrency,O,2)]):undefined,!x&&(null!=s&&s.valueInCurrency&&null!=v&&v.valueInCurrency?n("quotedTotalCost",[(0,m.formatCurrencyAmount)(new c.BigNumber(s.valueInCurrency).plus(v.valueInCurrency).toString(),O,2)]):n("quotedTotalCost",[(0,m.formatTokenAmount)(N,s.amount,D)])),n("quotedReceiveAmount",[(0,m.formatCurrencyAmount)(g.valueInCurrency,O,2)??(0,m.formatTokenAmount)(N,g.amount,k.symbol)])].filter(Boolean).map(e=>r.default.createElement(u.Text,{key:e,variant:d.TextVariant.bodyXsMedium,color:d.TextColor.textAlternative},e))),r.default.createElement(h.Column,{alignItems:d.AlignItems.flexEnd},r.default.createElement(u.Text,{variant:d.TextVariant.bodyMd},n("bridgeTimingMinutes",[(0,l.formatEtaInMinutes)(p)])),r.default.createElement(u.Text,{variant:d.TextVariant.bodyXsMedium,color:d.TextColor.textAlternative},(0,i.startCase)(b[0]))))}))))}}}},{package:"$root$",file:"ui/pages/bridge/quotes/bridge-quotes-modal.tsx"}],[6664,{"../../../../shared/modules/selectors":5370,"../../../components/component-library":5919,"../../../ducks/bridge/actions":6433,"../../../ducks/bridge/selectors":6435,"../../../ducks/locale/locale":6444,"../../../ducks/metamask/metamask":6445,"../../../helpers/constants/design-system":6458,"../../../hooks/bridge/useCountdownTimer":6524,"../../../hooks/useI18nContext":6583,"../layout":6651,"../utils/price-impact":6675,"../utils/quote":6676,"./bridge-quotes-modal":6663,"@metamask/bridge-controller":1147,"bignumber.js":3481,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainBridgeQuoteCard=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("bignumber.js"),s=e("@metamask/bridge-controller"),i=e("../../../components/component-library"),l=e("../../../ducks/bridge/selectors"),c=e("../../../hooks/useI18nContext"),u=e("../utils/quote"),d=e("../../../ducks/metamask/metamask"),m=e("../../../helpers/constants/design-system"),p=e("../layout"),f=e("../../../ducks/bridge/actions"),g=e("../../../ducks/locale/locale"),h=e("../../../../shared/modules/selectors"),y=e("../../../hooks/bridge/useCountdownTimer"),v=e("../utils/price-impact"),k=e("./bridge-quotes-modal");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}n.MultichainBridgeQuoteCard=({onOpenSlippageModal:e,onOpenRecipientModal:t,selectedDestinationAccount:n})=>{var b,T,x,C,S;const w=(0,c.useI18nContext)(),{activeQuote:E,isQuoteGoingToRefresh:_}=(0,r.useSelector)(l.getBridgeQuotes),I=(0,r.useSelector)(d.getCurrentCurrency),{insufficientBal:M}=(0,r.useSelector)(l.getQuoteRequest),A=(0,r.useSelector)(l.getFromChain),P=(0,r.useSelector)(g.getIntlLocale),O=(0,r.useSelector)(e=>(0,h.getIsSmartTransaction)(e,null==A?void 0:A.chainId)),D=(0,r.useSelector)(l.getFromToken),N=(0,r.useSelector)(l.getToToken),B=(0,r.useSelector)(l.getSlippage),R=(0,r.useSelector)(l.getIsSolanaSwap),F=(0,r.useDispatch)(),j=(0,r.useSelector)(l.getIsToOrFromSolana),[L,$]=(0,a.useState)(!1),W=(0,r.useSelector)(l.getPriceImpactThresholds),q=null==E||null===(b=E.quote)||void 0===b||null===(b=b.priceData)||void 0===b?void 0:b.priceImpact,U=(null==E||null===(T=E.quote)||void 0===T?void 0:T.gasIncluded)??!1,G=(0,a.useMemo)(()=>W&&q!==undefined&&null!==q,[W,q]),H=a.default.useMemo(()=>{if(!G)return!1;const e=U?null==W?void 0:W.gasless:null==W?void 0:W.normal;return null!==e&&e!==undefined&&Number(q)>=Number(e)},[U,q,G,W]),V=(0,y.useCountdownTimer)();return E?a.default.createElement(a.default.Fragment,null,a.default.createElement(k.BridgeQuotesModal,{isOpen:L,onClose:()=>$(!1)}),a.default.createElement(p.Column,{gap:2},a.default.createElement(p.Row,{justifyContent:m.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},w("multichainQuoteCardRateLabel")),_&&a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:(z=V,z<=3?m.TextColor.errorDefault:z<=5?m.TextColor.warningDefault:m.TextColor.textAlternative)},`(0:${V<10?"0":""}${V})`),a.default.createElement(p.Tooltip,{title:w("multichainQuoteCardRateLabel"),position:i.PopoverPosition.TopStart,offset:[-16,16]},w("multichainQuoteCardRateExplanation",[new o.BigNumber(E.quote.feeData.metabridge.amount).gt(0)?s.BRIDGE_MM_FEE_RATE:"0"]))),a.default.createElement(p.Row,{gap:1},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},`1 ${E.quote.srcAsset.symbol} = ${(0,u.formatTokenAmount)(P,E.swapRate)} ${E.quote.destAsset.symbol}`),a.default.createElement(i.ButtonIcon,{iconName:i.IconName.ArrowRight,size:i.ButtonIconSize.Sm,color:m.IconColor.iconAlternative,onClick:()=>{var e,t;(null==A?void 0:A.chainId)&&E&&F((0,f.trackUnifiedSwapBridgeEvent)(s.UnifiedSwapBridgeEventName.AllQuotesOpened,{can_submit:!M,stx_enabled:O,token_symbol_source:(null==D?void 0:D.symbol)??(0,s.getNativeAssetForChainId)(A.chainId).symbol,token_symbol_destination:(null==N?void 0:N.symbol)??null,price_impact:Number((null===(e=E.quote)||void 0===e||null===(e=e.priceData)||void 0===e?void 0:e.priceImpact)??"0"),gas_included:Boolean(null===(t=E.quote)||void 0===t?void 0:t.gasIncluded)})),$(!0)},ariaLabel:w("moreQuotes")}))),a.default.createElement(p.Row,{justifyContent:m.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},w("networkFee")),a.default.createElement(p.Tooltip,{title:w("networkFeeExplanationTitle"),position:i.PopoverPosition.TopStart,offset:[-16,16]},w("networkFeeExplanation"))),E.quote.gasIncluded&&a.default.createElement(p.Row,{gap:1,"data-testid":"network-fees-included"},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative,style:{textDecoration:"line-through"}},null!==(x=E.includedTxFees)&&void 0!==x&&x.valueInCurrency?(0,u.formatCurrencyAmount)(E.includedTxFees.valueInCurrency,I,2):(0,u.formatCurrencyAmount)(null===(C=E.totalNetworkFee)||void 0===C?void 0:C.valueInCurrency,I,2)),a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},w("swapGasFeesIncluded"))),!E.quote.gasIncluded&&a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative,"data-testid":"network-fees"},(0,u.formatCurrencyAmount)(null===(S=E.totalNetworkFee)||void 0===S?void 0:S.valueInCurrency,I,2))),a.default.createElement(p.Row,{justifyContent:m.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},w("slippage")),a.default.createElement(p.Tooltip,{title:w("slippage"),position:i.PopoverPosition.TopStart,offset:[-16,16]},w("slippageExplanation"))),a.default.createElement(p.Row,{gap:1},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},B===undefined&&R?w("slippageAuto"):`${B}%`),a.default.createElement(i.ButtonIcon,{iconName:i.IconName.Edit,size:i.ButtonIconSize.Sm,color:m.IconColor.iconAlternative,onClick:e,ariaLabel:w("slippageEditAriaLabel"),"data-testid":"slippage-edit-button"}))),a.default.createElement(p.Row,{justifyContent:m.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},w("minimumReceivedLabel")),a.default.createElement(p.Tooltip,{style:{width:350},title:w("minimumReceivedExplanationTitle"),position:i.PopoverPosition.TopStart,offset:[-48,16]},w("minimumReceivedExplanation"))),a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative,"data-testid":"minimum-received"},(0,u.formatCurrencyAmount)(E.minToTokenAmount.valueInCurrency,I,2))),G&&H&&a.default.createElement(p.Row,{justifyContent:m.JustifyContent.spaceBetween},a.default.createElement(p.Row,{gap:2},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},w("bridgePriceImpact")),a.default.createElement(p.Tooltip,{title:w(H?"bridgePriceImpactWarningTitle":"bridgePriceImpactTooltipTitle"),position:i.PopoverPosition.TopStart,offset:[-16,16]},w("bridgePriceImpactNormalWarning"))),a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:H?m.TextColor.errorDefault:m.TextColor.textAlternative},(0,v.formatPriceImpact)(q))),j&&n&&a.default.createElement(p.Row,{justifyContent:m.JustifyContent.spaceBetween},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},w("recipient")),a.default.createElement(p.Row,{gap:1},a.default.createElement(i.Text,{variant:m.TextVariant.bodySm,color:m.TextColor.textAlternative},n.displayName),a.default.createElement(i.ButtonIcon,{iconName:i.IconName.Edit,size:i.ButtonIconSize.Sm,color:m.IconColor.iconAlternative,onClick:t,ariaLabel:w("recipientEditAriaLabel"),"data-testid":"recipient-edit-button"}))))):null;var z}}}},{package:"$root$",file:"ui/pages/bridge/quotes/multichain-bridge-quote-card.tsx"}],[6665,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,"../../../hooks/useI18nContext":6583,"./segment":6671,"@metamask/bridge-controller":1147,"@metamask/transaction-controller":2587,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeTxHistoryItem:e,transactionGroup:t}){const n=(0,l.useI18nContext)(),{initialTransaction:r}=t,o=m(r),u=p({bridgeTxHistoryItem:e,srcTxStatus:o}),f=d(o);return a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,gap:2},a.default.createElement(s.Text,{color:i.TextColor.textAlternative},n("bridgeTransactionProgress",[f])),a.default.createElement(s.Box,{display:i.Display.Flex,gap:2,width:i.BlockSize.Full},a.default.createElement(c.default,{type:o}),a.default.createElement(c.default,{type:u})))};var a=u(e("react")),r=e("@metamask/transaction-controller"),o=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),c=u(e("./segment"));function u(e){return e&&e.__esModule?e:{default:e}}const d=e=>{if(e===o.StatusTypes.PENDING)return 1;if(e===o.StatusTypes.COMPLETE)return 2;throw new Error("No more possible states for srcTxStatus")},m=e=>e.status===r.TransactionStatus.confirmed?o.StatusTypes.COMPLETE:o.StatusTypes.PENDING,p=({bridgeTxHistoryItem:e,srcTxStatus:t})=>{var n;return t!==o.StatusTypes.COMPLETE?null:null!=e&&null!==(n=e.status.destChain)&&void 0!==n&&n.txHash&&e.status.status===o.StatusTypes.COMPLETE?o.StatusTypes.COMPLETE:o.StatusTypes.PENDING}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-activity-item-tx-segments.tsx"}],[6666,{"../../../../shared/constants/common":5247,"../../../components/component-library":5919,"../../../components/multichain/menu-items/view-explorer-menu-item":6145,"../../../contexts/metametrics":6421,"../../../helpers/constants/design-system":6458,"../../../hooks/useI18nContext":6583,"@metamask/bridge-controller":1147,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({srcChainId:e,destChainId:t,srcBlockExplorerUrl:n,destBlockExplorerUrl:r}){const o=(0,a.useContext)(l.MetaMetricsContext),d=(0,u.useI18nContext)(),f=d("bridgeExplorerLinkViewOn",[m(e,n)]),g=r?d("bridgeExplorerLinkViewOn",[m(t,r)]):undefined;return a.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:4},n&&a.default.createElement(s.ButtonSecondary,{endIconName:s.IconName.Export,onClick:()=>{n&&(0,i.openBlockExplorer)(n,p,o)}},f),r&&a.default.createElement(s.ButtonSecondary,{endIconName:s.IconName.Export,onClick:()=>{r&&(0,i.openBlockExplorer)(r,p,o)}},g))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("@metamask/bridge-controller"),o=e("../../../../shared/constants/common"),s=e("../../../components/component-library"),i=e("../../../components/multichain/menu-items/view-explorer-menu-item"),l=e("../../../contexts/metametrics"),c=e("../../../helpers/constants/design-system"),u=e("../../../hooks/useI18nContext");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const m=(e,t)=>{const n=e&&!(0,r.isSolanaChainId)(e)?(0,r.formatChainIdToHex)(e):undefined,a=n?o.CHAINID_DEFAULT_BLOCK_EXPLORER_HUMAN_READABLE_URL_MAP[n]:undefined;return a||(t?t.split("/")[2]:undefined)},p="Activity Tab"}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-explorer-links.tsx"}],[6667,{"../../../../shared/constants/bridge":5246,"../../../../shared/modules/Numeric":5349,"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,"../../../hooks/useI18nContext":6583,"@metamask/bridge-controller":1147,"@metamask/transaction-controller":2587,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({step:e,time:t,stepStatus:n}){const r=(0,c.useI18nContext)();return a.createElement(s.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,gap:2,className:"bridge-transaction-details__step-grid--desc"},t&&a.createElement(s.Text,{color:l.TextColor.textDefault},t),a.createElement(s.Text,{color:n===o.StatusTypes.PENDING||n===o.StatusTypes.COMPLETE?l.TextColor.textDefault:l.TextColor.textAlternative,fontWeight:n===o.StatusTypes.PENDING?l.FontWeight.Medium:l.FontWeight.Normal},e.action===o.ActionTypes.BRIDGE&&m(r,n,e),e.action===o.ActionTypes.SWAP&&p(r,n,e)))},n.getStepStatus=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("@metamask/transaction-controller"),o=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../../shared/modules/Numeric"),l=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext"),u=e("../../../../shared/constants/bridge");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const m=(e,t,n)=>{var a;const r=n.destChainId?new i.Numeric(n.destChainId,10).toPrefixedHexString():undefined,s=r?u.NETWORK_TO_SHORT_NETWORK_NAME_MAP[r]:"",l=null===(a=n.destAsset)||void 0===a?void 0:a.symbol;return l?t===o.StatusTypes.COMPLETE?e("bridgeStepActionBridgeComplete",[l,s]):e("bridgeStepActionBridgePending",[l,s]):null},p=(e,t,n)=>{var a,r;const s=null===(a=n.srcAsset)||void 0===a?void 0:a.symbol,i=null===(r=n.destAsset)||void 0===r?void 0:r.symbol;return s&&i?t===o.StatusTypes.COMPLETE?e("bridgeStepActionSwapComplete",[s,i]):e("bridgeStepActionSwapPending",[s,i]):null};n.getStepStatus=({bridgeHistoryItem:e,step:t,srcChainTxMeta:n})=>e?t.action===o.ActionTypes.SWAP?((e,t,n)=>{const a=t.srcChainId===t.destChainId,s=t.srcChainId===e.quote.srcChainId;if(a&&s)return(null==n?void 0:n.status)===r.TransactionStatus.confirmed?o.StatusTypes.COMPLETE:o.StatusTypes.PENDING;return(null==n?void 0:n.status)===r.TransactionStatus.confirmed&&e.status?e.status.status:null})(e,t,n):t.action===o.ActionTypes.BRIDGE?(e=>e.status?e.status.status:null)(e):o.StatusTypes.UNKNOWN:o.StatusTypes.UNKNOWN}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-step-description.tsx"}],[6668,{"../../../components/component-library":5919,"../../../helpers/utils/util":6514,"./bridge-step-description":6667,"./step-progress-bar-item":6672,"@metamask/bridge-controller":1147,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeHistoryItem:e,srcChainTxMeta:t}){const n=(null==e?void 0:e.quote.steps)||[],c=n.map(n=>(0,i.getStepStatus)({bridgeHistoryItem:e,step:n,srcChainTxMeta:t}));return a.default.createElement(o.Box,{className:"bridge-transaction-details__step-grid"},n.map((o,u)=>{const m=u>0?c[u-1]:null,p=c[u],f=u<c.length-1?c[u+1]:null,g=p===r.StatusTypes.COMPLETE&&(f===r.StatusTypes.PENDING||f===r.StatusTypes.COMPLETE),h=m===r.StatusTypes.PENDING&&p===r.StatusTypes.PENDING?null:p,y=(0,s.formatDate)(d(u,u===n.length-1,(null==e?void 0:e.startTime)||(null==t?void 0:t.time),(null==e?void 0:e.estimatedProcessingTimeInSeconds)||0),"hh:mm a");return a.default.createElement(l.default,{key:`progress-${o.action}-${o.srcChainId}-${o.destChainId}`,stepStatus:h,isLastItem:u===n.length-1,isEdgeComplete:g},a.default.createElement(i.default,{step:o,stepStatus:h,time:y}))}))};var a=u(e("react")),r=e("@metamask/bridge-controller"),o=e("../../../components/component-library"),s=e("../../../helpers/utils/util"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("./bridge-step-description")),l=u(e("./step-progress-bar-item"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}const d=(e,t,n,a)=>0===e?n:t&&n&&a?n+1e3*a:undefined}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-step-list.tsx"}],[6669,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,classnames:3623,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=(a=e("classnames"))&&a.__esModule?a:{default:a},s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const c=r.forwardRef(({size:e=s.IconSize.Md,color:t,className:n="",style:a},l)=>r.createElement(s.Box,{className:(0,o.default)(n,"mm-icon",`mm-icon--size-${e}`),ref:l,as:"span",display:i.Display.InlineBlock,style:{height:"12px",width:"12px",border:`1px solid var(--color-${t})`,borderRadius:"50%",backgroundColor:`var(--color-${i.BackgroundColor.backgroundDefault})`,zIndex:1,...a}}));n.default=c}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/hollow-circle.tsx"}],[6670,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,"./hollow-circle":6669,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({iconSize:e,color:t}){return a.default.createElement(r.Box,{style:{position:"relative"}},a.default.createElement(r.Box,{className:"bridge-transaction-details__icon-loading",backgroundColor:o.BackgroundColor.primaryMuted,display:o.Display.Flex,justifyContent:o.JustifyContent.center,alignItems:o.AlignItems.center,borderRadius:o.BorderRadius.full,style:{width:"2rem",height:"2rem"}}),a.default.createElement(s.default,{size:e,color:t,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderWidth:"2px"}}))};var a=i(e("react")),r=e("../../../components/component-library"),o=e("../../../helpers/constants/design-system"),s=i(e("./hollow-circle"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/pulsing-circle.tsx"}],[6671,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,"@metamask/bridge-controller":1147,classnames:3623,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({type:e}){return a.default.createElement(s.Box,{width:i.BlockSize.Full,backgroundColor:i.BackgroundColor.backgroundAlternative,borderRadius:i.BorderRadius.pill},a.default.createElement(s.Box,{width:i.BlockSize.Full,backgroundColor:i.BackgroundColor.primaryDefault,borderRadius:i.BorderRadius.pill,className:(0,r.default)({"bridge-transaction-details__segment":!0,"bridge-transaction-details__segment--pending":e===o.StatusTypes.PENDING,"bridge-transaction-details__segment--complete":e===o.StatusTypes.COMPLETE})}))};var a=l(e("react")),r=l(e("classnames")),o=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system");function l(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/segment.tsx"}],[6672,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,"./hollow-circle":6669,"./pulsing-circle":6670,"@metamask/bridge-controller":1147,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({stepStatus:e,isLastItem:t,isEdgeComplete:n,children:c}){return a.default.createElement(a.default.Fragment,null,(null===e||e===r.StatusTypes.UNKNOWN)&&a.default.createElement(i.default,{size:u,color:s.IconColor.iconMuted}),e===r.StatusTypes.PENDING&&a.default.createElement(l.default,{iconSize:u,color:s.IconColor.primaryDefault}),e===r.StatusTypes.COMPLETE&&a.default.createElement(o.Icon,{name:o.IconName.FullCircle,color:s.IconColor.primaryDefault,size:u}),c,!t&&a.default.createElement(d,{color:n?s.IconColor.primaryDefault:s.IconColor.iconMuted}),!t&&a.default.createElement("div",null))};var a=c(e("react")),r=e("@metamask/bridge-controller"),o=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),i=c(e("./hollow-circle")),l=c(e("./pulsing-circle"));function c(e){return e&&e.__esModule?e:{default:e}}const u=o.IconSize.Xs,d=({color:e})=>a.default.createElement("div",{style:{height:"60px",marginTop:"-1rem",marginBottom:"-1rem",width:"1px",backgroundColor:`var(--color-${e})`,zIndex:.1}})}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/step-progress-bar-item.tsx"}],[6673,{"../../../components/component-library":5919,"../../../helpers/constants/design-system":6458,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({title:e,value:t}){return r.default.createElement(o.Box,{display:s.Display.Flex,justifyContent:s.JustifyContent.spaceBetween,"data-testid":"transaction-detail-row",width:s.BlockSize.Full},r.default.createElement(o.Text,{minWidth:s.BlockSize.Max,paddingRight:1,variant:s.TextVariant.bodyMd},e),t)};var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system")}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/transaction-detail-row.tsx"}],[6674,{"../../../../shared/constants/bridge":5246,"../../../../shared/constants/metametrics":5259,"../../../../shared/modules/Numeric":5349,"../../../../shared/modules/conversion.utils":5354,"../../../components/app/confirm/info/row":5485,"../../../components/app/transaction-activity-log":5811,"../../../components/app/transaction-breakdown/transaction-breakdown-utils":5821,"../../../components/component-library":5919,"../../../components/multichain/pages/page":6237,"../../../contexts/metametrics":6421,"../../../ducks/bridge-status/selectors":6432,"../../../ducks/locale/locale":6444,"../../../helpers/constants/common":6456,"../../../helpers/constants/design-system":6458,"../../../helpers/utils/util":6514,"../../../hooks/bridge/useBridgeChainInfo":6519,"../../../hooks/useI18nContext":6583,"../../../selectors":7345,"../../../selectors/multichain":7354,"../utils/quote":6676,"../utils/tx-details":6679,"./bridge-explorer-links":6666,"./bridge-step-list":6668,"./transaction-detail-row":6673,"@metamask/bridge-controller":1147,"@metamask/transaction-controller":2587,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("@metamask/transaction-controller"),i=e("@metamask/bridge-controller"),l=e("../../../components/component-library"),c=e("../../../components/multichain/pages/page"),u=e("../../../ducks/bridge-status/selectors"),d=O(e("../../../hooks/bridge/useBridgeChainInfo")),m=e("../../../components/app/transaction-breakdown/transaction-breakdown-utils"),p=e("../../../../shared/modules/conversion.utils"),f=e("../../../helpers/constants/common"),g=e("../../../helpers/constants/design-system"),h=e("../../../helpers/utils/util"),y=e("../../../components/app/confirm/info/row"),v=e("../../../hooks/useI18nContext"),k=e("../../../selectors"),b=e("../../../../shared/constants/metametrics"),T=e("../../../contexts/metametrics"),x=e("../../../ducks/locale/locale"),C=O(e("../../../components/app/transaction-activity-log")),S=e("../../../../shared/constants/bridge"),w=e("../../../../shared/modules/Numeric"),E=e("../../../selectors/multichain"),_=e("../utils/quote"),I=e("../utils/tx-details"),M=O(e("./transaction-detail-row")),A=O(e("./bridge-explorer-links")),P=O(e("./bridge-step-list"));function O(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}n.default=()=>{var e,t,n;const O=(0,v.useI18nContext)(),D=(0,r.useSelector)(x.getIntlLocale),N=(0,a.useContext)(T.MetaMetricsContext),B=(0,r.useSelector)(e=>e),R=(0,o.useHistory)(),F=(0,o.useLocation)(),{srcTxMetaId:j}=(0,o.useParams)(),L=(0,r.useSelector)(k.selectedAddressTxListSelectorAllChain),$=(null===(e=F.state)||void 0===e?void 0:e.transactionGroup)||null,W=(null===(t=F.state)||void 0===t?void 0:t.isEarliestNonce)||null,q=L.find(e=>e.id===j),U=(0,r.useSelector)(e=>(0,u.selectBridgeHistoryItemForTxMetaId)(e,j)),G=L.find(e=>e.id===(null==U?void 0:U.approvalTxId)),{srcNetwork:H,destNetwork:V}=(0,d.default)({bridgeHistoryItem:U,srcTxMeta:q}),z=null==q?void 0:q.hash,Q=(0,I.getBlockExplorerUrl)(H,z),Y=null==U||null===(n=U.status.destChain)||void 0===n?void 0:n.txHash,K=(0,I.getBlockExplorerUrl)(V,Y),J=U?null==U?void 0:U.status.status:i.StatusTypes.PENDING,X=(null==q?void 0:q.type)===s.TransactionType.bridge?J:null==q?void 0:q.status,Z=H?(0,E.getImageForChainId)(H.isEvm?(0,i.formatChainIdToHex)(H.chainId):H.chainId):undefined,ee=V?(0,E.getImageForChainId)(V.isEvm?(0,i.formatChainIdToHex)(V.chainId):V.chainId):undefined,te=S.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==H?void 0:H.chainId],ne=S.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==V?void 0:V.chainId],ae=q?(0,m.getTransactionBreakdownData)({state:B,transaction:q,isTokenApprove:!1}):undefined,re=(0,I.getBridgeAmountSentFormatted)({bridgeHistoryItem:U,txMeta:q}),oe=(0,r.useSelector)(e=>(0,u.selectReceivedSwapsTokenAmountFromTxMeta)(e,null==U?void 0:U.txMetaId,q,G)),se=(null==q?void 0:q.type)===s.TransactionType.swap&&oe||(0,I.getBridgeAmountReceivedFormatted)({locale:D,bridgeHistoryItem:U,txMeta:q}),ie=(null==q?void 0:q.type)===s.TransactionType.bridge&&(0,I.getIsDelayed)(J,U),le=(0,k.getNativeTokenInfo)(B,(null==q?void 0:q.chainId)??""),ce=a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center},H&&a.default.createElement(l.AvatarNetwork,{size:l.AvatarNetworkSize.Xs,src:Z,name:null==H?void 0:H.name}),te),ue=a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center},V&&a.default.createElement(l.AvatarNetwork,{size:l.AvatarNetworkSize.Xs,src:ee,name:null==V?void 0:V.name}),ne);return a.default.createElement("div",{className:"bridge__container"},a.default.createElement(c.Header,{className:"bridge__header",startAccessory:a.default.createElement(l.ButtonIcon,{iconName:l.IconName.ArrowLeft,size:l.ButtonIconSize.Sm,ariaLabel:O("back"),onClick:()=>R.goBack()})},O((null==q?void 0:q.type)===s.TransactionType.bridge?"bridgeDetailsTitle":"swapDetailsTitle")),a.default.createElement(c.Content,{className:"bridge-transaction-details__content"},a.default.createElement(l.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:4},ie&&a.default.createElement(l.BannerAlert,{title:O("bridgeTxDetailsDelayedTitle"),severity:l.BannerAlertSeverity.Warning},a.default.createElement(l.Text,{display:g.Display.Flex,alignItems:g.AlignItems.center},O("bridgeTxDetailsDelayedDescription"),"",a.default.createElement(l.ButtonLink,{externalLink:!0,href:f.SUPPORT_REQUEST_LINK,onClick:()=>{N({category:b.MetaMetricsEventCategory.Home,event:b.MetaMetricsEventName.SupportLinkClicked,properties:{url:f.SUPPORT_REQUEST_LINK,location:"Bridge Tx Details"}},{contextPropsIntoEventProperties:[b.MetaMetricsContextProp.PageTitle]})}},O("bridgeTxDetailsDelayedDescriptionSupport")),".")),X!==i.StatusTypes.COMPLETE&&(U||q)&&a.default.createElement(P.default,{bridgeHistoryItem:U,srcChainTxMeta:q}),a.default.createElement(A.default,{srcChainId:null==H?void 0:H.chainId,destChainId:null==V?void 0:V.chainId,srcBlockExplorerUrl:Q,destBlockExplorerUrl:K}),a.default.createElement(y.ConfirmInfoRowDivider,null),a.default.createElement(l.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:2},a.default.createElement(M.default,{title:O("bridgeTxDetailsStatus"),value:a.default.createElement(l.Text,{textTransform:g.TextTransform.Capitalize,color:X?I.STATUS_TO_COLOR_MAP[X]:undefined},null==X?void 0:X.toLowerCase())}),(null==q?void 0:q.type)===s.TransactionType.bridge&&a.default.createElement(M.default,{title:O(X===i.StatusTypes.COMPLETE?"bridgeTxDetailsBridged":"bridgeTxDetailsBridging"),value:a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center,flexWrap:g.FlexWrap.Wrap,justifyContent:g.JustifyContent.flexEnd},ce,a.default.createElement(l.Icon,{name:l.IconName.Arrow2Right,size:l.IconSize.Sm}),ue)}),(null==q?void 0:q.type)===s.TransactionType.swap&&a.default.createElement(M.default,{title:O((null==q?void 0:q.status)===s.TransactionStatus.confirmed?"bridgeTxDetailsSwapped":"bridgeTxDetailsSwapping"),value:a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center,flexWrap:g.FlexWrap.Wrap,justifyContent:g.JustifyContent.flexEnd},U&&a.default.createElement(l.AvatarToken,{size:l.AvatarTokenSize.Xs,src:(null==U?void 0:U.quote.srcAsset.iconUrl)??undefined,name:null==U?void 0:U.quote.srcAsset.symbol}),null==U?void 0:U.quote.srcAsset.symbol,a.default.createElement(l.Icon,{name:l.IconName.Arrow2Right,size:l.IconSize.Sm}),U&&a.default.createElement(l.AvatarToken,{size:l.AvatarTokenSize.Xs,src:(null==U?void 0:U.quote.destAsset.iconUrl)??undefined,name:null==U?void 0:U.quote.destAsset.symbol}),null==U?void 0:U.quote.destAsset.symbol)}),a.default.createElement(M.default,{title:O("bridgeTxDetailsTimestamp"),value:O("bridgeTxDetailsTimestampValue",[(0,h.formatDate)(null==q?void 0:q.time,"MMM d, yyyy"),(0,h.formatDate)(null==q?void 0:q.time,"hh:mm a")])})),a.default.createElement(y.ConfirmInfoRowDivider,null),a.default.createElement(l.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:2},a.default.createElement(M.default,{title:O("bridgeTxDetailsYouSent"),value:a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center,flexWrap:g.FlexWrap.Wrap,justifyContent:g.JustifyContent.flexEnd},O("bridgeTxDetailsTokenAmountOnChain",[re??"",(null==U?void 0:U.quote.srcAsset.symbol)??""]),ce)}),se&&(null==U?void 0:U.quote.destAsset.symbol)&&a.default.createElement(M.default,{title:O("bridgeTxDetailsYouReceived"),value:a.default.createElement(l.Box,{display:g.Display.Flex,gap:1,alignItems:g.AlignItems.center,flexWrap:g.FlexWrap.Wrap,justifyContent:g.JustifyContent.flexEnd},O("bridgeTxDetailsTokenAmountOnChain",[se,null==U?void 0:U.quote.destAsset.symbol]),ue)}),a.default.createElement(M.default,{title:O("bridgeTxDetailsTotalGasFee"),value:a.default.createElement(a.default.Fragment,null,(null==ae?void 0:ae.hexGasTotal)&&(null==le?void 0:le.decimals)&&(null==le?void 0:le.symbol)&&(0,_.formatTokenAmount)(D,new w.Numeric(ae.hexGasTotal,16).toBase(10).shiftedBy(le.decimals??0).toString(),null==le?void 0:le.symbol))})),a.default.createElement(y.ConfirmInfoRowDivider,null),a.default.createElement(l.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:2},a.default.createElement(M.default,{title:O("bridgeTxDetailsNonce"),value:null!=q&&q.txParams.nonce?(0,p.hexToDecimal)(null==q?void 0:q.txParams.nonce):undefined}),$&&void 0!==W&&a.default.createElement(C.default,{transactionGroup:$,className:"transaction-list-item-details__transaction-activity-log",isEarliestNonce:W})))))}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/transaction-details.tsx"}],[6675,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatPriceImpact=function(e){if(e===undefined||null===e)return"0%";const t=Number(e);if(isNaN(t)||!t)return"0%";const n=100*t;if(n>0&&n<.01)return"<0.01%";if(n<0&&n>-.01)return"<-0.01%";if(Math.abs(n)<1)return`${n.toFixed(2)}%`;if(Math.abs(n)<10)return`${n.toFixed(1)}%`;return`${Math.round(n)}%`}}}},{package:"$root$",file:"ui/pages/bridge/utils/price-impact.ts"}],[6676,{"../../../helpers/utils/confirm-tx.util":6486,"../../../hooks/useCurrencyDisplay":6572,"../../confirmations/components/simulation-details/formatAmount":6884,"@metamask/bridge-controller":1147,"bignumber.js":3481},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isQuoteExpiredOrInvalid=n.formatTokenAmount=n.formatProviderLabel=n.formatCurrencyAmount=void 0;var a=e("bignumber.js"),r=e("@metamask/bridge-controller"),o=e("../../../helpers/utils/confirm-tx.util"),s=e("../../../hooks/useCurrencyDisplay"),i=e("../../confirmations/components/simulation-details/formatAmount");n.formatTokenAmount=(e,t,n="")=>[(0,i.formatAmount)(e,new a.BigNumber(t)),n].join(" ").trim();n.formatCurrencyAmount=(e,t,n=s.DEFAULT_PRECISION)=>{if(!e)return undefined;const r=new a.BigNumber(e);if(0===n){if(r.lt(.01))return"<$0.01";if(r.lt(1))return(0,o.formatCurrency)(r.toString(),t,2)}return(0,o.formatCurrency)(r.toString(),t,n)};n.formatProviderLabel=e=>`${null==e?void 0:e.bridgeId}_${null==e?void 0:e.bridges[0]}`;n.isQuoteExpiredOrInvalid=({activeQuote:e,toToken:t,toChain:n,fromChain:a,isQuoteExpired:o,insufficientBal:s})=>{if(o&&(!s||a&&(0,r.isSolanaChainId)(a.chainId)))return!0;if(e&&t){var i,l,c;const a=(null===(i=e.quote)||void 0===i||null===(i=i.destAsset)||void 0===i||null===(i=i.address)||void 0===i?void 0:i.toLowerCase())||"",o=(null===(l=t.address)||void 0===l?void 0:l.toLowerCase())||"",s=null!==(c=e.quote)&&void 0!==c&&c.destChainId?(0,r.formatChainIdToCaip)(e.quote.destChainId):"",u=null!=n&&n.chainId?(0,r.formatChainIdToCaip)(n.chainId):"";return!((a===o||(0,r.isNativeAddress)(a)&&(0,r.isNativeAddress)(o))&&s===u)}return!1}}}},{package:"$root$",file:"ui/pages/bridge/utils/quote.ts"}],[6677,{"./stablecoins":6678,"@metamask/bridge-controller":1147},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SlippageValue=void 0,n.calculateSlippage=function(e){const{fromChain:t,toChain:n,fromToken:r,toToken:s,isSwap:l}=e;if(null==t||!t.chainId||null==n||!n.chainId)return o.BridgeDefault;if(!l||t.chainId!==n.chainId)return o.BridgeDefault;if((0,a.isSolanaChainId)(t.chainId))return undefined;if(i(t.chainId,r,s))return o.EvmStablecoin;return o.EvmDefault},n.getSlippageReason=function(e){const{fromChain:t,toChain:n,fromToken:r,toToken:o,isSwap:s}=e;if(null==t||!t.chainId||null==n||!n.chainId)return"Incomplete chain setup - using bridge default";if(!s||t.chainId!==n.chainId)return"Cross-chain transaction";if((0,a.isSolanaChainId)(t.chainId))return"Solana swap (AUTO mode)";if(i(t.chainId,r,o))return"EVM stablecoin pair";return"EVM token swap"};var a=e("@metamask/bridge-controller"),r=e("./stablecoins");let o=n.SlippageValue=function(e){return e[e.EvmStablecoin=.5]="EvmStablecoin",e[e.EvmDefault=2]="EvmDefault",e[e.BridgeDefault=.5]="BridgeDefault",e}({});function s(e,t){if(!t)return!1;const n=r.STABLECOINS_BY_CHAIN_ID[e];return!!n&&n.has(t.toLowerCase())}function i(e,t,n){return!(!t||!n)&&(s(e,t.address)&&s(e,n.address))}}}},{package:"$root$",file:"ui/pages/bridge/utils/slippage-service.ts"}],[6678,{"../../../../shared/constants/network":5262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.STABLECOINS_BY_CHAIN_ID=void 0;var a=e("../../../../shared/constants/network");n.STABLECOINS_BY_CHAIN_ID={[a.CHAIN_IDS.MAINNET]:new Set(["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0xdac17f958d2ee523a2206206994597c13d831ec7"]),[a.CHAIN_IDS.LINEA_MAINNET]:new Set(["0x176211869cA2b568f2A7D4EE941E073a821EE1ff","0xA219439258ca9da29E9Cc4cE5596924745e12B93"]),[a.CHAIN_IDS.POLYGON]:new Set(["0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359","0x2791bca1f2de4661ed88a30c99a7a9449aa84174","0xc2132d05d31c914a87c6611c10748aeb04b58e8f"]),[a.CHAIN_IDS.ARBITRUM]:new Set(["0xaf88d065e77c8cC2239327C5EDb3A432268e5831","0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8","0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9"]),[a.CHAIN_IDS.BASE]:new Set(["0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"]),[a.CHAIN_IDS.OPTIMISM]:new Set(["0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85","0x7F5c764cBc14f9669B88837ca1490cCa17c31607","0x94b008aA00579c1307B0EF2c499aD98a8ce58e58"]),[a.CHAIN_IDS.BSC]:new Set(["0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d","0x55d398326f99059ff775485246999027b3197955"]),[a.CHAIN_IDS.AVALANCHE]:new Set(["0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e","0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0xc7198437980c041c805a1edcba50c1ce5db95118"]),[a.CHAIN_IDS.ZKSYNC_ERA]:new Set(["0x1d17CBcF0D6D143135aE902365D2E5e2A16538D4","0x3355df6D4c9C3035724Fd0e3914dE96A5a83aaf4","0x493257fD37EDB34451f62EDf8D2a0C418852bA4C"]),[a.CHAIN_IDS.SEI]:new Set(["0x3894085Ef7Ff0f0aeDf52E2A2704928d1Ec074F1"])}}}},{package:"$root$",file:"ui/pages/bridge/utils/stablecoins.ts"}],[6679,{"../../../../shared/constants/time":5277,"../../../helpers/constants/design-system":6458,"../../confirmations/components/simulation-details/formatAmount":6884,"@metamask/bridge-controller":1147,"@metamask/transaction-controller":2587,"bignumber.js":3481},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIsDelayed=n.getBridgeAmountSentFormatted=n.getBridgeAmountReceivedFormatted=n.getBlockExplorerUrl=n.STATUS_TO_COLOR_MAP=void 0;var a=e("@metamask/transaction-controller"),r=e("bignumber.js"),o=e("@metamask/bridge-controller"),s=e("../../../../shared/constants/time"),i=e("../../../helpers/constants/design-system"),l=e("../../confirmations/components/simulation-details/formatAmount");const c=(e,t)=>e&&t?`${e}/tx/${t}`:undefined;n.getBlockExplorerUrl=(e,t)=>{var n;if(!e||!t)return undefined;if(!e.isEvm)return c(e.blockExplorerUrl,t);const a=e.defaultBlockExplorerUrlIndex;if(a===undefined)return undefined;const r=null===(n=e.blockExplorerUrls[a])||void 0===n?void 0:n.replace(/\/$/u,"");return c(r,t)};n.getBridgeAmountSentFormatted=({bridgeHistoryItem:e,txMeta:t})=>{var n;if(!t)return undefined;const a=null==e||null===(n=e.pricingData)||void 0===n?void 0:n.amountSent,r=null==e?void 0:e.quote.srcAsset.decimals;return a&&r?a:undefined};n.getBridgeAmountReceivedFormatted=({locale:e,bridgeHistoryItem:t,txMeta:n})=>{var s,i,c;if(!n)return undefined;if(!(n.type===a.TransactionType.bridge&&t?t.status.status===o.StatusTypes.COMPLETE:n.status===a.TransactionStatus.confirmed))return undefined;const u=(null===(s=n.swapMetaData)||void 0===s?void 0:s.token_to_amount)??(null==t||null===(i=t.status.destChain)||void 0===i?void 0:i.amount)??(null==t?void 0:t.quote.destTokenAmount),d=(null===(c=n.swapMetaData)||void 0===c?void 0:c.token_to_decimals)??n.destinationTokenDecimals??(null==t?void 0:t.quote.destAsset.decimals);return u&&d?(0,l.formatAmount)(e,new r.BigNumber(u).dividedBy(10**d)):undefined};n.getIsDelayed=(e,t)=>{const n=10*s.MINUTE;return Boolean(e===o.StatusTypes.PENDING&&(null==t?void 0:t.startTime)&&Date.now()>t.startTime+n+1e3*t.estimatedProcessingTimeInSeconds)};n.STATUS_TO_COLOR_MAP={[o.StatusTypes.PENDING]:i.TextColor.warningDefault,[o.StatusTypes.COMPLETE]:i.TextColor.successDefault,[o.StatusTypes.FAILED]:i.TextColor.errorDefault,[o.StatusTypes.UNKNOWN]:i.TextColor.errorDefault,[a.TransactionStatus.unapproved]:i.TextColor.warningDefault,[a.TransactionStatus.confirmed]:i.TextColor.successDefault,[a.TransactionStatus.rejected]:i.TextColor.errorDefault,[a.TransactionStatus.cancelled]:i.TextColor.errorDefault,[a.TransactionStatus.failed]:i.TextColor.errorDefault,[a.TransactionStatus.submitted]:i.TextColor.warningDefault,[a.TransactionStatus.approved]:i.TextColor.warningDefault,[a.TransactionStatus.signed]:i.TextColor.warningDefault,[a.TransactionStatus.dropped]:i.TextColor.errorDefault}}}},{package:"$root$",file:"ui/pages/bridge/utils/tx-details.ts"}],[6680,{"../../../shared/constants/metametrics":5259,"../../../shared/constants/network":5262,"../../../shared/constants/transaction":5279,"../../../shared/modules/selectors/networks":5371,"../../../shared/modules/string-utils":5375,"../../components/app/assets/nfts/nft-default-image/nft-default-image":5435,"../../components/app/network-account-balance-header/network-account-balance-header":5623,"../../components/component-library":5919,"../../components/ui/page-container":6367,"../../components/ui/site-origin/site-origin":6385,"../../contexts/i18n":6416,"../../contexts/metametrics":6421,"../../ducks/history/history":6442,"../../helpers/constants/common":6456,"../../helpers/constants/design-system":6458,"../../helpers/utils/util":6514,"../../hooks/useCurrencyDisplay":6572,"../../hooks/useOriginMetadata":6599,"../../hooks/useUserPreferencedCurrency":6621,"../../selectors":7345,"../../store/actions":7369,"../confirmations/components/confirm/nav":6808,"../routes/utils":7197,"@metamask/etherscan-link":1827,"@metamask/rpc-errors":2224,classnames:3623,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("@metamask/rpc-errors"),i=e("@metamask/etherscan-link"),l=O(e("classnames")),c=e("../../components/ui/page-container"),u=e("../../contexts/i18n"),d=e("../../contexts/metametrics"),m=e("../../ducks/history/history"),p=e("../../store/actions"),f=e("../../../shared/constants/metametrics"),g=e("../../../shared/constants/transaction"),h=e("../../components/component-library"),y=e("../../../shared/modules/selectors/networks"),v=e("../../selectors"),k=O(e("../../components/app/assets/nfts/nft-default-image/nft-default-image")),b=e("../../helpers/utils/util"),T=e("../../helpers/constants/design-system"),x=O(e("../../components/app/network-account-balance-header/network-account-balance-header")),C=e("../../../shared/constants/network"),S=O(e("../../components/ui/site-origin/site-origin")),w=e("../../helpers/constants/common"),E=e("../../hooks/useUserPreferencedCurrency"),_=e("../../hooks/useCurrencyDisplay"),I=e("../../hooks/useOriginMetadata"),M=e("../../../shared/modules/string-utils"),A=e("../confirmations/components/confirm/nav"),P=e("../routes/utils");function O(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}n.default=()=>{var e,t;const n=(0,a.useContext)(u.I18nContext),O=(0,r.useDispatch)(),D=(0,o.useHistory)(),N=(0,o.useLocation)(),B=null==N||!N.pathname||!(0,P.hideAppHeader)({location:N}),R=(0,l.default)("confirm-add-suggested-nft page-container",{"confirm-add-suggested-nft--has-app-header-multichain":B}),F=(0,r.useSelector)(m.getMostRecentOverviewPage),j=(0,r.useSelector)(v.getSuggestedNfts).sort((e,t)=>e.requestData.asset.tokenId-t.requestData.asset.tokenId),L=(0,r.useSelector)(v.getRpcPrefsForCurrentProvider),$=(0,r.useSelector)(y.getCurrentChainId),W=(0,r.useSelector)(v.getIpfsGateway),q=(0,a.useContext)(d.MetaMetricsContext),U=(0,r.useSelector)(v.getNetworkIdentifier),{address:G}=(0,r.useSelector)(v.getSelectedInternalAccount),H=(0,r.useSelector)(v.getSelectedAccountCachedBalance),V=(0,r.useSelector)(e=>(0,v.getAddressBookEntryOrAccountName)(e,G)),[z,Q]=(0,a.useState)([]),Y=C.NETWORK_TO_NAME_MAP[$]||U,{currency:K,numberOfDecimals:J}=(0,E.useUserPreferencedCurrency)(w.PRIMARY,{ethNumberOfDecimals:4}),[X]=(0,_.useCurrencyDisplay)(H,{numberOfDecimals:J,currency:K}),Z=(0,I.useOriginMetadata)(null===(e=j[0])||void 0===e?void 0:e.origin)||{},ee=null===(t=j[0])||void 0===t?void 0:t.id,te=(0,a.useCallback)(async()=>{await Promise.all(j.map(async({requestData:{asset:e},id:t})=>{await O((0,p.resolvePendingApproval)(t,null)),q({event:f.MetaMetricsEventName.NftAdded,category:f.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e.address,token_symbol:e.symbol,token_id:e.tokenId,token_standard:e.standard,asset_type:g.AssetType.NFT,source:f.MetaMetricsTokenEventSource.Dapp}})})),D.push(F)},[O,D,q,F,j]),ne=(0,a.useCallback)(async()=>{await Promise.all(j.map(async({id:e})=>O((0,p.rejectPendingApproval)(e,(0,s.serializeError)(s.providerErrors.userRejectedRequest()))))),D.push(F)},[O,D,F,j]);let ae,re;if((0,a.useEffect)(()=>{j.length||D.push(F)},[D,F,j]),j.length)try{const e=new URL(j[0].origin);ae=e.host,re=e.href}catch{ae="dapp"}return(0,a.useEffect)(()=>{(async()=>{const e=await Promise.all(j.map(async e=>{const t=await(0,b.getAssetImageURL)(e.requestData.asset.image,W);return{...e,requestData:{...e.requestData,asset:{...e.requestData.asset,assetImageUrl:t}}}}));Q(e)})()},[j]),a.default.createElement(h.Box,{className:R,height:T.BlockSize.Full,width:T.BlockSize.Full,display:T.Display.Flex,flexDirection:T.FlexDirection.Column},a.default.createElement(A.Nav,{confirmationId:ee}),a.default.createElement(h.Box,{paddingBottom:2,className:"confirm-add-suggested-nft__header"},a.default.createElement(x.default,{accountName:V,accountBalance:X,accountAddress:G,networkName:Y,chainId:$}),a.default.createElement(h.Box,{paddingTop:4,paddingRight:4,paddingLeft:4,display:T.Display.Flex,justifyContent:T.JustifyContent.center},a.default.createElement(S.default,{chip:!0,siteOrigin:Z.origin,title:Z.origin,iconSrc:Z.iconUrl,iconName:Z.hostname})),a.default.createElement(h.Text,{variant:T.TextVariant.headingLg,textAlign:T.TextAlign.Center,margin:2},n("addSuggestedNFTs")),a.default.createElement(h.Text,{variant:T.TextVariant.bodyMd,textAlign:T.TextAlign.Center},n("wantsToAddThisAsset",["dapp"===ae?a.default.createElement(h.Text,{key:ae,variant:T.TextVariant.bodyMd,fontWeight:"bold"},ae):a.default.createElement(h.ButtonLink,{key:ae,size:h.BUTTON_SIZES.INHERIT,href:re,target:"_blank"},ae)]))),a.default.createElement(h.Box,{className:"page-container__content confirm-add-suggested-nft__content"},a.default.createElement(h.Box,{className:"confirm-add-suggested-nft__card",padding:2,borderRadius:T.BorderRadius.MD},a.default.createElement(h.Box,{className:(0,l.default)({"confirm-add-suggested-nft__nft-list":j.length>1})},j.map(({id:e,requestData:{asset:{address:t,tokenId:n,symbol:r,name:o}}})=>{const l=z.find(e=>e.requestData.asset.tokenId===n&&(0,M.isEqualCaseInsensitive)(e.requestData.asset.address,t)),c=l?l.requestData.asset.assetImageUrl:"",u=(0,i.getTokenTrackerLink)(t,$,null,null,{blockExplorerUrl:(null==L?void 0:L.blockExplorerUrl)??null});return 1===j.length?a.default.createElement(h.Box,{className:"confirm-add-suggested-nft__nft-single",key:`confirm-add-suggested-nft__nft-single-${e}`,borderRadius:T.BorderRadius.MD,margin:0,padding:0},c?a.default.createElement("img",{className:"confirm-add-suggested-nft__nft-single-image",src:c,alt:o||n}):a.default.createElement(k.default,{className:"confirm-add-suggested-nft__nft-single-image-default",tokenId:n,name:o||r||(0,b.shortenAddress)(t)}),a.default.createElement(h.Box,{padding:1,display:T.Display.Flex,flexDirection:T.FlexDirection.Row,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.Center},a.default.createElement(h.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Column,justifyContent:T.JustifyContent.spaceEvenly,flexWrap:T.FlexWrap.NoWrap,width:T.BlockSize.Full,className:"confirm-add-suggested-nft__nft-single-sub-details"},L.blockExplorerUrl?a.default.createElement(h.ButtonLink,{className:"confirm-add-suggested-nft__nft-name",href:u,title:t,target:"_blank",size:h.BUTTON_SIZES.INHERIT},o||r||(0,b.shortenAddress)(t)):a.default.createElement(h.Text,{variant:T.TextVariant.bodyMd,className:"confirm-add-suggested-nft__nft-name",title:t},o||r||(0,b.shortenAddress)(t)),a.default.createElement(h.Text,{variant:T.TextVariant.bodyMd,color:T.TextColor.textAlternative,className:"confirm-add-suggested-nft__nft-tokenId"},"#",n)))):a.default.createElement(h.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Row,flexWrap:T.FlexWrap.NoWrap,alignItems:T.AlignItems.Center,justifyContent:T.JustifyContent.spaceBetween,marginBottom:4,className:"confirm-add-suggested-nft__nft-list-item",key:`${t}-${n}`},a.default.createElement(h.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Row,flexWrap:T.FlexWrap.NoWrap,alignItems:T.AlignItems.Center,justifyContent:T.JustifyContent.spaceBetween},c?a.default.createElement("img",{className:"confirm-add-suggested-nft__nft-image",src:c,alt:o||n}):a.default.createElement(k.default,{className:"confirm-add-suggested-nft__nft-image-default"}),a.default.createElement(h.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Column,justifyContent:T.JustifyContent.spaceEvenly,flexWrap:T.FlexWrap.NoWrap,width:T.BlockSize.Full,className:"confirm-add-suggested-nft__nft-sub-details"},L.blockExplorerUrl?a.default.createElement(h.ButtonLink,{className:"confirm-add-suggested-nft__nft-name",href:u,title:t,target:"_blank",size:h.BUTTON_SIZES.INHERIT},o||r||(0,b.shortenAddress)(t)):a.default.createElement(h.Text,{variant:T.TextVariant.bodySm,className:"confirm-add-suggested-nft__nft-name",title:t},o||r||(0,b.shortenAddress)(t)),a.default.createElement(h.Text,{variant:T.TextVariant.bodySm,color:T.TextColor.textAlternative,className:"confirm-add-suggested-nft__nft-tokenId"},"#",n))),a.default.createElement(h.ButtonIcon,{className:"confirm-add-suggested-nft__nft-remove","data-testid":`confirm-add-suggested-nft__nft-remove-${e}`,iconName:h.IconName.Close,size:h.ButtonIconSize.Sm,color:T.IconColor.iconMuted,onClick:t=>{t.preventDefault(),t.stopPropagation(),O((0,p.rejectPendingApproval)(e,(0,s.serializeError)(s.providerErrors.userRejectedRequest())))}}))})))),a.default.createElement(c.PageContainerFooter,{cancelText:n("cancel"),submitText:1===j.length?n("addNft"):n("addNfts"),onCancel:ne,onSubmit:te}))}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-nft/confirm-add-suggested-nft.js"}],[6681,{"./confirm-add-suggested-nft":6680},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-add-suggested-nft"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-nft/index.js"}],[6682,{"../../../shared/constants/metametrics":5259,"../../../shared/constants/transaction":5279,"../../../shared/modules/string-utils":5375,"../../components/component-library":5919,"../../components/ui/identicon":6342,"../../components/ui/page-container":6367,"../../components/ui/token-balance":6400,"../../contexts/i18n":6416,"../../contexts/metametrics":6421,"../../ducks/history/history":6442,"../../ducks/metamask/metamask":6445,"../../helpers/constants/design-system":6458,"../../helpers/constants/zendesk-url":6470,"../../selectors":7345,"../../store/actions":7369,"../confirmations/components/confirm/nav":6808,"../routes/utils":7197,"@metamask/rpc-errors":2224,classnames:3623,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=w(e("classnames")),i=e("@metamask/rpc-errors"),l=e("../../components/component-library"),c=e("../../helpers/constants/design-system"),u=w(e("../../components/ui/identicon")),d=w(e("../../components/ui/token-balance")),m=e("../../components/ui/page-container"),p=e("../../contexts/i18n"),f=e("../../contexts/metametrics"),g=e("../../ducks/history/history"),h=e("../../ducks/metamask/metamask"),y=w(e("../../helpers/constants/zendesk-url")),v=e("../../../shared/modules/string-utils"),k=e("../../store/actions"),b=e("../../../shared/constants/metametrics"),T=e("../../../shared/constants/transaction"),x=e("../../selectors"),C=e("../confirmations/components/confirm/nav"),S=e("../routes/utils");function w(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}n.default=()=>{var e;const t=(0,a.useContext)(p.I18nContext),n=(0,r.useDispatch)(),w=(0,o.useHistory)(),E=(0,o.useLocation)(),_=null==E||!E.pathname||!(0,S.hideAppHeader)({location:E}),I=(0,s.default)("confirm-add-suggested-token page-container",{"confirm-add-suggested-token--has-app-header-multichain":_}),M=(0,r.useSelector)(g.getMostRecentOverviewPage),A=(0,r.useSelector)(x.getSuggestedTokens),P=(0,r.useSelector)(h.getTokens),O=(0,a.useContext)(f.MetaMetricsContext),D=null===(e=A[0])||void 0===e?void 0:e.id,N=(0,a.useMemo)(()=>function(e,t){const n=e.find(({requestData:{asset:e}})=>{const n=t.find(({address:t})=>(0,v.isEqualCaseInsensitive)(t,null==e?void 0:e.address));return Boolean(n)});return Boolean(n)}(A,P)&&a.default.createElement(l.BannerAlert,{severity:c.Severity.Warning,marginTop:4},t("knownTokenWarning",[a.default.createElement(l.Button,{variant:l.ButtonVariant.Link,key:"confirm-add-suggested-token-duplicate-warning",className:"confirm-add-suggested-token__link",externalLink:!0,size:l.ButtonLinkSize.Inherit,href:y.default.TOKEN_SAFETY_PRACTICES},t("learnScamRisk"))])),[A,P,t]),B=(0,a.useMemo)(()=>function(e,t){const n=e.find(({requestData:{asset:e}})=>{const n=t.find(t=>(0,v.isEqualCaseInsensitive)(t.symbol,null==e?void 0:e.symbol)&&!(0,v.isEqualCaseInsensitive)(t.address,null==e?void 0:e.address));return Boolean(n)});return Boolean(n)}(A,P)&&a.default.createElement(l.BannerAlert,{marginTop:4,severity:c.Severity.Warning,description:t("reusedTokenNameWarning")}),[A,P,t]),R=(0,a.useCallback)(async()=>{await Promise.all(A.map(async({requestData:{asset:e},id:t})=>{await n((0,k.resolvePendingApproval)(t,null)),O({event:b.MetaMetricsEventName.TokenAdded,category:b.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_symbol:e.symbol,token_contract_address:e.address,token_decimal_precision:e.decimals,unlisted:e.unlisted,source:b.MetaMetricsTokenEventSource.Dapp,token_standard:T.TokenStandard.ERC20,asset_type:T.AssetType.token}})})),w.push(M)},[n,w,O,M,A]),F=(0,a.useCallback)(async()=>{await Promise.all(A.map(({id:e})=>n((0,k.rejectPendingApproval)(e,(0,i.serializeError)(i.providerErrors.userRejectedRequest()))))),w.push(M)},[n,w,M,A]);return(0,a.useEffect)(()=>{A.length||w.push(M)},[]),a.default.createElement("div",{className:I},a.default.createElement(C.Nav,{confirmationId:D}),a.default.createElement("div",{className:"page-container__header"},a.default.createElement("div",{className:"page-container__title"},t("addSuggestedTokens")),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,textAlign:c.TextAlign.Center},t("likeToImportTokens")),N,B),a.default.createElement("div",{className:"page-container__content"},a.default.createElement("div",{className:"confirm-add-suggested-token__header"},a.default.createElement("div",{className:"confirm-add-suggested-token__token"},t("token")),a.default.createElement("div",{className:"confirm-add-suggested-token__balance"},t("balance"))),a.default.createElement("div",{className:"confirm-add-suggested-token__token-list"},A.map(({requestData:{asset:e}})=>{return a.default.createElement("div",{className:"confirm-add-suggested-token__token-list-item",key:e.address},a.default.createElement("div",{className:"confirm-add-suggested-token__token confirm-add-suggested-token__data"},a.default.createElement(u.default,{className:"confirm-add-suggested-token__token-icon",diameter:48,address:e.address,image:e.image}),a.default.createElement("div",{className:"confirm-add-suggested-token__name"},(t=e.name,n=e.symbol,t===undefined?n:`${t} (${n})`))),a.default.createElement("div",{className:"confirm-add-suggested-token__balance"},a.default.createElement(d.default,{token:e})));var t,n}))),a.default.createElement(m.PageContainerFooter,{cancelText:t("cancel"),submitText:t("addToken"),onCancel:F,onSubmit:R,disabled:0===A.length}))}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-token/confirm-add-suggested-token.js"}],[6683,{"./confirm-add-suggested-token":6682},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-add-suggested-token"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-token/index.js"}],[6684,{"../../../shared/constants/common":5247,"../../../shared/constants/copy":5248,"../../../shared/constants/metametrics":5259,"../../../shared/constants/time":5277,"../../../shared/modules/Numeric":5349,"../../components/app/account-list-item":5384,"../../components/component-library":5919,"../../components/ui/page-container":6367,"../../components/ui/tooltip":6402,"../../contexts/metametrics":6421,"../../ducks/confirm-transaction/confirm-transaction.duck":6438,"../../ducks/history/history":6442,"../../ducks/metamask/metamask":6445,"../../helpers/constants/design-system":6458,"../../hooks/useI18nContext":6583,"../../hooks/useScrollRequired":6603,"../../selectors":7345,"../../store/actions":7369,"../confirmations/components/confirm/nav":6808,classnames:3623,"copy-to-clipboard":3659,lodash:4362,loglevel:4370,"prop-types":4605,react:4789,"react-redux":4733,"react-router-dom":4757},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=A(e("prop-types")),o=A(e("copy-to-clipboard")),s=A(e("classnames")),i=A(e("loglevel")),l=e("react-redux"),c=e("react-router-dom"),u=e("lodash"),d=A(e("../../components/app/account-list-item")),m=A(e("../../components/ui/tooltip")),p=e("../../components/ui/page-container"),f=e("../../ducks/history/history"),g=e("../../ducks/metamask/metamask"),h=e("../../../shared/constants/metametrics"),y=e("../../../shared/constants/time"),v=e("../../../shared/modules/Numeric"),k=e("../../../shared/constants/common"),b=e("../../components/component-library"),T=e("../../../shared/constants/copy"),x=e("../../hooks/useI18nContext"),C=e("../../hooks/useScrollRequired"),S=e("../../contexts/metametrics"),w=e("../../helpers/constants/design-system"),E=e("../../ducks/confirm-transaction/confirm-transaction.duck"),_=e("../../store/actions"),I=e("../../selectors"),M=e("../confirmations/components/confirm/nav");function A(e){return e&&e.__esModule?e:{default:e}}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}const O=({approvalId:e})=>{const t=(0,x.useI18nContext)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(M.Nav,{confirmationId:e}),a.default.createElement("div",{className:"request-decrypt-message__header"},a.default.createElement("div",{className:"request-decrypt-message__header-background"}),a.default.createElement("div",{className:"request-decrypt-message__header__text"},t("decryptRequest")),a.default.createElement("div",{className:"request-decrypt-message__header__tip-container"},a.default.createElement("div",{className:"request-decrypt-message__header__tip"}))))},D=({fromAccount:e,nativeCurrency:t})=>{const n=(0,x.useI18nContext)(),r=new v.Numeric(e.balance,16,k.EtherDenomination.WEI).toDenomination(k.EtherDenomination.ETH).round(6).toBase(10).toString();return a.default.createElement("div",{className:"request-decrypt-message__account-info"},a.default.createElement("div",{className:"request-decrypt-message__account"},a.default.createElement("div",{className:"request-decrypt-message__account-text"},`${n("account")}:`),a.default.createElement("div",{className:"request-decrypt-message__account-item"},a.default.createElement(d.default,{account:e}))),a.default.createElement("div",{className:"request-decrypt-message__balance"},a.default.createElement("div",{className:"request-decrypt-message__balance-text"},`${n("balance")}:`),a.default.createElement("div",{className:"request-decrypt-message__balance-value"},`${r} ${t}`)))};D.propTypes={fromAccount:r.default.shape({balance:r.default.string.isRequired}).isRequired,nativeCurrency:r.default.string.isRequired};const N=({name:e,notice:t,targetSubjectMetadata:n})=>a.default.createElement("div",{className:"request-decrypt-message__visual"},a.default.createElement("section",null,null!=n&&n.iconUrl?a.default.createElement("img",{className:"request-decrypt-message__visual-identicon",src:n.iconUrl,alt:""}):a.default.createElement("i",{className:"request-decrypt-message__visual-identicon--default"},e.charAt(0).toUpperCase()),a.default.createElement("div",{className:"request-decrypt-message__notice"},t)));N.propTypes={name:r.default.string.isRequired,notice:r.default.string.isRequired,targetSubjectMetadata:r.default.shape({iconUrl:r.default.string})};const B=({isScrollable:e,isScrolledToBottom:t,hasDecrypted:n,hasError:r,scrollToBottom:o})=>{const s=(0,x.useI18nContext)();return n&&!r&&e&&!t?a.default.createElement(b.ButtonIcon,{ariaLabel:s("scrollDown"),backgroundColor:w.BackgroundColor.primaryDefault,borderRadius:w.BorderRadius.full,className:"scroll-to-bottom__button",color:w.IconColor.primaryInverse,"data-testid":"scroll-to-bottom",display:w.Display.Flex,iconName:b.IconName.Arrow2Down,onClick:o,size:b.ButtonIconSize.Md}):null};B.propTypes={isScrollable:r.default.bool.isRequired,isScrolledToBottom:r.default.bool.isRequired,hasDecrypted:r.default.bool.isRequired,hasError:r.default.bool.isRequired,scrollToBottom:r.default.func.isRequired};const R=(0,a.forwardRef)(({isScrollable:e,isScrolledToBottom:t,onScroll:n,rawMessage:r,scrollToBottom:i,setRawMessage:c,messageData:u},d)=>{const p=(0,l.useDispatch)(),f=(0,a.useContext)(S.MetaMetricsContext),g=(0,x.useI18nContext)(),[v,k]=(0,a.useState)(!1),[C,E]=(0,a.useState)(!1),[I,M]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[O,D]=(0,a.useState)("");return a.default.createElement("div",{className:"request-decrypt-message__message-container"},a.default.createElement("div",{className:"request-decrypt-message__message"},a.default.createElement("div",{className:"request-decrypt-message__message-text",ref:d,onScroll:n},I||A?r:u.msgParams.data,A?O:""),a.default.createElement("div",{className:(0,s.default)("request-decrypt-message__message-cover",{"request-decrypt-message__message-lock--pressed":I||A})}),a.default.createElement("div",{className:(0,s.default)("request-decrypt-message__message-lock",{"request-decrypt-message__message-lock--pressed":I||A}),"data-testid":"message-lock",onClick:async e=>{e.stopPropagation(e);const t=u.msgParams;t.metamaskId=u.id;const n=await p((0,_.decryptMsgInline)(t));n.error?(P(!0),D(g("decryptInlineError",[n.error]))):(M(!0),c(n.rawSig))}},a.default.createElement("div",{className:"request-decrypt-message__message-lock__container"},a.default.createElement("i",{className:"fa fa-lock fa-lg request-decrypt-message__message-lock__container__icon"}),a.default.createElement("div",{className:"request-decrypt-message__message-lock__container__text"},g("decryptMetamask"))))),a.default.createElement(B,{isScrollable:e,hasError:A,hasDecrypted:I,isScrolledToBottom:t,scrollToBottom:i}),I?a.default.createElement("div",{className:(0,s.default)({"request-decrypt-message__message-copy":!0,"request-decrypt-message__message-copy--pressed":v}),onClick:()=>{(0,o.default)(r,T.COPY_OPTIONS),f({category:h.MetaMetricsEventCategory.Messages,event:"Copy",properties:{action:"Decrypt Message Copy",legacy_event:!0}}),E(!0),setTimeout(()=>E(!1),3*y.SECOND)},onMouseDown:()=>k(!0),onMouseUp:()=>k(!1),"data-testid":"message-copy"},a.default.createElement(m.default,{position:"bottom",title:g(C?"copiedExclamation":"copyToClipboard"),wrapperClassName:"request-decrypt-message__message-copy-tooltip",style:{display:"flex",alignItems:"center"}},a.default.createElement("div",{className:"request-decrypt-message__message-copy-text"},g("decryptCopy")),a.default.createElement(b.Icon,{name:C?b.IconName.CopySuccess:b.IconName.Copy,color:w.IconColor.primaryDefault}))):a.default.createElement("div",null))});R.displayName="MessageBody",R.propTypes={isScrollable:r.default.bool.isRequired,isScrolledToBottom:r.default.bool.isRequired,onScroll:r.default.func.isRequired,rawMessage:r.default.string.isRequired,scrollToBottom:r.default.func.isRequired,setRawMessage:r.default.func.isRequired,messageData:r.default.shape({msgParams:r.default.shape({data:r.default.string.isRequired,from:r.default.string.isRequired,origin:r.default.string.isRequired}).isRequired,id:r.default.string.isRequired}).isRequired};const F=({hasScrolledToBottom:e,isScrollable:t,mostRecentOverviewPage:n,messageData:r})=>{const o=(0,l.useDispatch)(),s=(0,c.useHistory)(),i=(0,x.useI18nContext)(),u=(0,a.useContext)(S.MetaMetricsContext);return a.default.createElement(p.PageContainerFooter,{cancelText:i("cancel"),submitText:i("decrypt"),disabled:t&&!e,onCancel:async e=>{e.stopPropagation(e),await o((0,_.cancelDecryptMsg)(r)),u({category:h.MetaMetricsEventCategory.Messages,event:"Cancel",properties:{action:"Decrypt Message Request",legacy_event:!0}}),o((0,E.clearConfirmTransaction)()),s.push(n)},onSubmit:async e=>{e.stopPropagation(e);const t=r.msgParams;t.metamaskId=r.id,await o((0,_.decryptMsg)(t)),u({category:h.MetaMetricsEventCategory.Messages,event:"Confirm",properties:{action:"Decrypt Message Request",legacy_event:!0}}),o((0,E.clearConfirmTransaction)()),s.push(n)}})};F.propTypes={hasScrolledToBottom:r.default.bool.isRequired,isScrollable:r.default.bool.isRequired,mostRecentOverviewPage:r.default.string.isRequired,messageData:r.default.shape({msgParams:r.default.shape({data:r.default.string.isRequired,from:r.default.string.isRequired,origin:r.default.string.isRequired}).isRequired,id:r.default.string.isRequired}).isRequired};n.default=()=>{const e=(0,x.useI18nContext)(),[t,n]=(0,a.useState)(""),r=(0,l.useSelector)(f.getMostRecentOverviewPage),o=(0,l.useSelector)(g.getNativeCurrency),{id:s}=(0,c.useParams)(),d=(0,l.useSelector)(I.unconfirmedTransactionsListSelector),m=(0,u.cloneDeep)(d.find(e=>e.id===s)),p=(0,l.useSelector)(e=>{var t;return(0,I.getTargetAccountWithSendEtherInfo)(e,null==m||null===(t=m.msgParams)||void 0===t?void 0:t.from)}),h=(0,l.useSelector)(e=>e.metamask.subjectMetadata||{}),{hasScrolledToBottom:y,isScrollable:v,isScrolledToBottom:k,onScroll:b,scrollToBottom:T,ref:S}=(0,C.useScrollRequired)([t],{offsetPxFromBottom:0});if(!m)return i.default.warn("ConfirmDecryptMessage Page: Missing messageData prop."),null;const w=h[m.msgParams.origin],E=(null==w?void 0:w.name)||m.msgParams.origin,_=e("decryptMessageNotice",[m.msgParams.origin]);return a.default.createElement("div",{className:"request-decrypt-message__container"},a.default.createElement(O,{approvalId:s}),a.default.createElement("div",{className:"request-decrypt-message__body"},a.default.createElement(D,{fromAccount:p,nativeCurrency:o}),a.default.createElement(N,{name:E,notice:_,targetSubjectMetadata:w}),a.default.createElement(R,{isScrollable:v,isScrolledToBottom:k,onScroll:b,rawMessage:t,ref:S,scrollToBottom:T,setRawMessage:n,messageData:m})),a.default.createElement(F,{hasScrolledToBottom:y,isScrollable:v,mostRecentOverviewPage:r,messageData:m}))}}}},{package:"$root$",file:"ui/pages/confirm-decrypt-message/confirm-decrypt-message.component.js"}],[6685,{"./confirm-decrypt-message.component":6684},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-decrypt-message.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-decrypt-message/index.js"}],[6686,{"../../../shared/constants/common":5247,"../../../shared/constants/metametrics":5259,"../../../shared/modules/Numeric":5349,"../../components/app/account-list-item":5384,"../../components/app/preferred-avatar":5645,"../../components/ui/page-container":6367,"../../components/ui/site-origin":6384,"../confirmations/components/confirm/nav":6808,"@metamask/design-system-react":1577,loglevel:4370,"prop-types":4605,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=g(e("prop-types")),o=g(e("loglevel")),s=e("@metamask/design-system-react"),i=g(e("../../components/app/account-list-item")),l=e("../../components/app/preferred-avatar"),c=e("../../components/ui/page-container"),u=e("../../../shared/constants/metametrics"),d=g(e("../../components/ui/site-origin")),m=e("../../../shared/modules/Numeric"),p=e("../../../shared/constants/common"),f=e("../confirmations/components/confirm/nav");function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends a.Component{constructor(...e){super(...e),y(this,"renderHeader",()=>{var e;const t=null===(e=this.props.txData)||void 0===e?void 0:e.id;return a.default.createElement(a.default.Fragment,null,a.default.createElement(f.Nav,{confirmationId:t}),a.default.createElement("div",{className:"request-encryption-public-key__header"},a.default.createElement("div",{className:"request-encryption-public-key__header-background"}),a.default.createElement("div",{className:"request-encryption-public-key__header__text"},this.context.t("encryptionPublicKeyRequest")),a.default.createElement("div",{className:"request-encryption-public-key__header__tip-container"},a.default.createElement("div",{className:"request-encryption-public-key__header__tip"}))))}),y(this,"renderAccount",()=>{const{fromAccount:e}=this.props,{t:t}=this.context;return a.default.createElement("div",{className:"request-encryption-public-key__account"},a.default.createElement("div",{className:"request-encryption-public-key__account-text"},`${t("account")}:`),a.default.createElement("div",{className:"request-encryption-public-key__account-item"},a.default.createElement(i.default,{account:e})))}),y(this,"renderBalance",()=>{const{nativeCurrency:e,fromAccount:{balance:t}}=this.props,{t:n}=this.context,r=new m.Numeric(t,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.ETH).round(6).toBase(10).toString();return a.default.createElement("div",{className:"request-encryption-public-key__balance"},a.default.createElement("div",{className:"request-encryption-public-key__balance-text"},`${n("balance")}:`),a.default.createElement("div",{className:"request-encryption-public-key__balance-value"},`${r} ${e}`))}),y(this,"renderRequestIcon",()=>{const{requesterAddress:e}=this.props;return a.default.createElement("div",{className:"request-encryption-public-key__request-icon"},a.default.createElement(l.PreferredAvatar,{size:s.AvatarAccountSize.Lg,address:e}))}),y(this,"renderAccountInfo",()=>a.default.createElement("div",{className:"request-encryption-public-key__account-info"},this.renderAccount(),this.renderRequestIcon(),this.renderBalance())),y(this,"renderBody",()=>{const{subjectMetadata:e,txData:t}=this.props,{t:n}=this.context,r=e[t.origin],o=n("encryptionPublicKeyNotice",[a.default.createElement(d.default,{siteOrigin:t.origin,key:t.origin})]),s=(null==r?void 0:r.hostname)||t.origin;return a.default.createElement("div",{className:"request-encryption-public-key__body"},this.renderAccountInfo(),a.default.createElement("div",{className:"request-encryption-public-key__visual"},a.default.createElement("section",null,null!=r&&r.iconUrl?a.default.createElement("img",{className:"request-encryption-public-key__visual-identicon",src:r.iconUrl,alt:""}):a.default.createElement("i",{className:"request-encryption-public-key__visual-identicon--default"},s.charAt(0).toUpperCase()),a.default.createElement("div",{className:"request-encryption-public-key__notice"},o))))}),y(this,"renderFooter",()=>{const{cancelEncryptionPublicKey:e,clearConfirmTransaction:t,encryptionPublicKey:n,history:r,mostRecentOverviewPage:o,txData:s}=this.props,{t:i,trackEvent:l}=this.context;return a.default.createElement(c.PageContainerFooter,{cancelText:i("cancel"),submitText:i("provide"),onCancel:async n=>{await e(s,n),l({category:u.MetaMetricsEventCategory.Messages,event:"Cancel",properties:{action:"Encryption public key Request",legacy_event:!0}}),t(),r.push(o)},onSubmit:async e=>{await n(s,e),this.context.trackEvent({category:u.MetaMetricsEventCategory.Messages,event:"Confirm",properties:{action:"Encryption public key Request",legacy_event:!0}}),t(),r.push(o)}})}),y(this,"render",()=>this.props.txData?a.default.createElement("div",{className:"request-encryption-public-key__container"},this.renderHeader(),this.renderBody(),this.renderFooter()):(o.default.warn("ConfirmEncryptionPublicKey Page: Missing txData prop."),null))}}n.default=v,y(v,"contextTypes",{t:r.default.func.isRequired,trackEvent:r.default.func.isRequired}),y(v,"propTypes",{fromAccount:r.default.shape({address:r.default.string.isRequired,balance:r.default.string,name:r.default.string}).isRequired,clearConfirmTransaction:r.default.func.isRequired,cancelEncryptionPublicKey:r.default.func.isRequired,encryptionPublicKey:r.default.func.isRequired,history:r.default.object.isRequired,requesterAddress:r.default.string,txData:r.default.object,subjectMetadata:r.default.object,mostRecentOverviewPage:r.default.string.isRequired,nativeCurrency:r.default.string.isRequired})}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/confirm-encryption-public-key.component.js"}],[6687,{"../../ducks/confirm-transaction/confirm-transaction.duck":6438,"../../ducks/history/history":6442,"../../ducks/metamask/metamask":6445,"../../selectors":7345,"../../store/actions":7369,"./confirm-encryption-public-key.component":6686,"react-redux":4733,"react-router-dom":4757,redux:4808},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("react-redux"),o=e("redux"),s=e("react-router-dom"),i=e("../../store/actions"),l=e("../../selectors"),c=e("../../ducks/confirm-transaction/confirm-transaction.duck"),u=e("../../ducks/history/history"),d=e("../../ducks/metamask/metamask"),m=(a=e("./confirm-encryption-public-key.component"))&&a.__esModule?a:{default:a};n.default=(0,o.compose)(s.withRouter,(0,r.connect)(function(e,t){const{metamask:{subjectMetadata:n={}}}=e,a=(0,l.unconfirmedTransactionsListSelector)(e),{match:{params:{id:r}}}=t,o=a.find(e=>e.id===r);return{txData:o,subjectMetadata:n,fromAccount:(0,l.getTargetAccountWithSendEtherInfo)(e,null==o?void 0:o.msgParams),requester:null,requesterAddress:null,mostRecentOverviewPage:(0,u.getMostRecentOverviewPage)(e),nativeCurrency:(0,d.getNativeCurrency)(e)}},function(e){return{goHome:()=>e((0,i.goHome)()),clearConfirmTransaction:()=>e((0,c.clearConfirmTransaction)()),encryptionPublicKey:(t,n)=>{const a={data:t.msgParams,metamaskId:t.id};return n.stopPropagation(),e((0,i.encryptionPublicKeyMsg)(a))},cancelEncryptionPublicKey:(t,n)=>(n.stopPropagation(),e((0,i.cancelEncryptionPublicKeyMsg)(t)))}}))(m.default)}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/confirm-encryption-public-key.container.js"}],[6688,{"./confirm-encryption-public-key.container":6687},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-encryption-public-key.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/index.js"}],[6689,{"../../../../../components/component-library":5919,"../../../../../helpers/constants/design-system":6458,"../../../types/send":7046,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Asset=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../../../components/component-library"),s=e("../../../../../helpers/constants/design-system"),i=e("../../../types/send");const l=({asset:e,onClick:t,isSelected:n})=>{const a=e,{collection:l,name:c,tokenId:u,image:d,standard:m,balance:p}=a;let f=null;return m===i.AssetStandard.ERC1155&&(f=c?`(${null==p?void 0:p.toString()}) ${c} - #${u}`:`(${null==p?void 0:p.toString()}) #${u}`),r.default.createElement(o.Box,{alignItems:s.AlignItems.center,backgroundColor:n?s.BackgroundColor.backgroundHover:s.BackgroundColor.transparent,className:"send-asset","data-testid":"nft-asset",display:s.Display.Flex,onClick:t,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4},r.default.createElement(o.Box,{marginRight:3,style:{minWidth:40}},r.default.createElement(o.BadgeWrapper,{badge:a.chainId?r.default.createElement(o.AvatarNetwork,{size:o.AvatarNetworkSize.Xs,name:a.networkName??"",src:a.networkImage}):null},d||null!=l&&l.imageUrl?r.default.createElement(o.Box,{as:"img",src:d||(null==l?void 0:l.imageUrl),alt:c,style:{width:40,height:40,borderRadius:20,objectFit:"cover"},onError:e=>{var t;const n=e.target;n.style.display="none",null===(t=n.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}):null)),r.default.createElement(o.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,style:{flex:1,overflow:"hidden"}},r.default.createElement(o.Text,{variant:s.TextVariant.bodyMdMedium,color:s.TextColor.textDefault,ellipsis:!0},null==l?void 0:l.name),r.default.createElement(o.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative,ellipsis:!0},m===i.AssetStandard.ERC721&&c,m===i.AssetStandard.ERC1155&&f)))},c=({asset:e,onClick:t,isSelected:n})=>{const a=e,{balanceInSelectedCurrency:i,chainId:l,image:c,name:u,shortenedBalance:d,symbol:m}=a;return r.default.createElement(o.Box,{alignItems:s.AlignItems.center,backgroundColor:n?s.BackgroundColor.backgroundHover:s.BackgroundColor.transparent,className:"send-asset","data-testid":"token-asset",display:s.Display.Flex,onClick:t,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4},r.default.createElement(o.Box,{marginRight:3},r.default.createElement(o.BadgeWrapper,{badge:l?r.default.createElement(o.AvatarNetwork,{size:o.AvatarNetworkSize.Xs,name:a.networkName??"",src:a.networkImage}):null},r.default.createElement(o.AvatarToken,{size:o.AvatarTokenSize.Lg,src:c,name:m,showHalo:!1}))),r.default.createElement(o.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,style:{flex:1,overflow:"hidden"}},r.default.createElement(o.Text,{variant:s.TextVariant.bodyMdMedium,color:s.TextColor.textDefault},u),r.default.createElement(o.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative,ellipsis:!0},m)),r.default.createElement(o.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.flexEnd,marginLeft:2},r.default.createElement(o.Text,{variant:s.TextVariant.bodyMdMedium},i),r.default.createElement(o.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative},d," ",m)))};n.Asset=({asset:e,onClick:t,isSelected:n})=>i.NFT_STANDARDS.includes(e.standard)?r.default.createElement(l,{asset:e,onClick:t,isSelected:n}):r.default.createElement(c,{asset:e,onClick:t,isSelected:n})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/asset/asset.tsx"}],[6690,{"./asset":6689},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./asset");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/asset/index.ts"}],[6691,{"./recipient":6692},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./recipient");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/recipient/index.ts"}],[6692,{"../../../../../components/app/preferred-avatar":5645,"../../../../../components/component-library":5919,"../../../../../helpers/constants/design-system":6458,"../../../../../helpers/utils/util":6514,"@metamask/design-system-react":1577,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Recipient=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("@metamask/design-system-react"),s=e("../../../../../components/app/preferred-avatar"),i=e("../../../../../components/component-library"),l=e("../../../../../helpers/constants/design-system"),c=e("../../../../../helpers/utils/util");n.Recipient=({isAccount:e,isSelected:t,recipient:n,onClick:a})=>{const{address:u}=n,d=e?n.accountGroupName:n.contactName;return r.default.createElement(i.Box,{alignItems:l.AlignItems.center,backgroundColor:t?l.BackgroundColor.backgroundHover:l.BackgroundColor.transparent,className:"send-recipient",display:l.Display.Flex,flexDirection:l.FlexDirection.Row,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4,gap:4,onClick:()=>a(n)},r.default.createElement(s.PreferredAvatar,{address:u,size:o.AvatarAccountSize.Lg,"data-testid":"avatar"}),r.default.createElement(i.Box,null,r.default.createElement(i.Text,{variant:l.TextVariant.bodyMdMedium},d),r.default.createElement(i.Text,{variant:l.TextVariant.bodySmMedium,color:l.TextColor.textAlternative},(0,c.shortenAddress)(u))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/recipient/recipient.tsx"}],[6693,{"./send-hero":6694},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./send-hero");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/send-hero/index.ts"}],[6694,{"../../../../../components/component-library":5919,"../../../../../helpers/constants/design-system":6458,"../../../types/send":7046,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SendHero=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../../../components/component-library"),s=e("../../../types/send"),i=e("../../../../../helpers/constants/design-system");const l=({asset:e})=>{var t;const n=e,{collection:a,name:s,image:l}=n;return r.default.createElement(o.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,marginTop:6,marginBottom:6},r.default.createElement(o.BadgeWrapper,{style:{alignSelf:"center"},badge:n.chainId?r.default.createElement(o.AvatarNetwork,{size:o.AvatarNetworkSize.Sm,name:n.networkName??"",src:n.networkImage}):null},l||null!=a&&a.imageUrl?r.default.createElement(o.Box,{as:"img",src:l||(null==a?void 0:a.imageUrl),alt:s,style:{width:80,height:80,borderRadius:40,objectFit:"cover"},onError:e=>{var t;const n=e.target;n.style.display="none",null===(t=n.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}):null),r.default.createElement(o.Text,{variant:i.TextVariant.bodyLgMedium,color:i.TextColor.textDefault,marginTop:2},e.name||(null===(t=e.collection)||void 0===t?void 0:t.name)))},c=({asset:e})=>{const t=e,{chainId:n,image:a,symbol:s}=t;return r.default.createElement(o.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Row,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,marginTop:6,marginBottom:6},r.default.createElement(o.BadgeWrapper,{badge:n?r.default.createElement(o.AvatarNetwork,{size:o.AvatarNetworkSize.Xs,name:t.networkName??"",src:t.networkImage}):null},r.default.createElement(o.AvatarToken,{size:o.AvatarTokenSize.Xl,src:a,name:s,showHalo:!1})),r.default.createElement(o.Text,{variant:i.TextVariant.bodyLgMedium,color:i.TextColor.textDefault,marginLeft:2},e.symbol))};n.SendHero=({asset:e})=>null!=e&&e.standard&&s.NFT_STANDARDS.includes(e.standard)?r.default.createElement(l,{asset:e}):r.default.createElement(c,{asset:e})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/send-hero/send-hero.tsx"}],[6695,{"../../../../components/ui/form-field":6324,"../../../../contexts/i18n":6416,"../../../../helpers/constants/gas":6460,"prop-types":4605,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=l(e("prop-types")),o=e("../../../../contexts/i18n"),s=l(e("../../../../components/ui/form-field")),i=e("../../../../helpers/constants/gas");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u({onManualChange:e,gasLimit:t,setGasLimit:n,gasPrice:r,setGasPrice:l,gasErrors:c,minimumGasLimit:u}){const d=(0,a.useContext)(o.I18nContext);return a.default.createElement("div",{className:"advanced-gas-controls"},a.default.createElement(s.default,{titleText:d("gasLimit"),error:null!=c&&c.gasLimit?(0,i.getGasFormErrorText)(c.gasLimit,d,{minimumGasLimit:u}):null,onChange:t=>{null==e||e(),n(t)},tooltipText:d("editGasLimitTooltip"),value:t,allowDecimals:!1,numeric:!0}),a.default.createElement(a.default.Fragment,null,a.default.createElement(s.default,{titleText:d("advancedGasPriceTitle"),titleUnit:"(GWEI)",onChange:t=>{null==e||e(),l(t)},tooltipText:d("editGasPriceTooltip"),value:r,numeric:!0,allowDecimals:!0,error:null!=c&&c.gasPrice?(0,i.getGasFormErrorText)(c.gasPrice,d):null})))}u.propTypes={onManualChange:r.default.func,gasLimit:r.default.number,setGasLimit:r.default.func,gasPrice:r.default.string,setGasPrice:r.default.func,minimumGasLimit:r.default.string,gasErrors:r.default.object}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-controls/advanced-gas-controls.component.js"}],[6696,{"../../../../../../shared/constants/gas":5252,"../../../../../../shared/modules/Numeric":5349,"../../../../../components/component-library":5919,"../../../../../contexts/gasFee":6415,"../../../../../helpers/constants/design-system":6458,"../../../../../hooks/useI18nContext":6583,"../../../../../selectors":7345,"../../../../../store/actions":7369,"../../../hooks/useTransactionEventFragment":7028,"../context":6712,lodash:4362,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("lodash"),s=e("../../../hooks/useTransactionEventFragment"),i=e("../../../../../../shared/constants/gas"),l=e("../../../../../helpers/constants/design-system"),c=e("../../../../../selectors"),u=e("../../../../../store/actions"),d=e("../../../../../contexts/gasFee"),m=e("../context"),p=e("../../../../../hooks/useI18nContext"),f=e("../../../../../components/component-library"),g=e("../../../../../../shared/modules/Numeric");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,p.useI18nContext)(),t=(0,r.useDispatch)(),{gasErrors:n,maxBaseFee:h,maxPriorityFeePerGas:y}=(0,m.useAdvancedGasFeePopoverContext)(),v=new g.Numeric(h,10).toString(),k=new g.Numeric(y,10).toString(),b=(0,r.useSelector)(c.getAdvancedGasFeeValues),{updateTransactionEventFragment:T}=(0,s.useTransactionEventFragment)(),{editGasMode:x,transaction:C}=(0,d.useGasFeeContext)(),{chainId:S}=C,w=(0,r.useSelector)(e=>(0,c.selectNetworkIdentifierByChainId)(e,S)),[E,_]=(0,a.useState)(Boolean(b)&&b.maxBaseFee===v&&b.priorityFee===k);(0,a.useEffect)(()=>{_(Boolean(b)&&b.maxBaseFee===v&&b.priorityFee===k)},[b,v,k]);return x===i.EditGasModes.swaps?null:a.default.createElement(f.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Row,marginTop:4,marginLeft:2,marginRight:2,paddingTop:4,paddingBottom:4,className:"advanced-gas-fee-defaults"},a.default.createElement(f.Checkbox,{isChecked:E,onChange:()=>{E?(t((0,u.setAdvancedGasFee)({chainId:S,gasFeePreferences:undefined})),_(!1),T({properties:{advanced_gas_defaults_updated_maxbasefee:null,advanced_gas_defaults_updated_priorityfee:null}})):(t((0,u.setAdvancedGasFee)({chainId:S,gasFeePreferences:{maxBaseFee:v,priorityFee:k}})),T({properties:{advanced_gas_defaults_updated_maxbasefee:v,advanced_gas_defaults_updated_priorityfee:k}}))},isDisabled:n.maxFeePerGas||n.maxPriorityFeePerGas,label:e("advancedGasFeeDefaultOptIn",[(0,o.capitalize)(w)])}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-defaults/advanced-gas-fee-defaults.js"}],[6697,{"./advanced-gas-fee-defaults":6696},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./advanced-gas-fee-defaults"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-defaults/index.js"}],[6698,{"../../../../../../shared/modules/conversion.utils":5354,"../../../../../components/component-library":5919,"../../../../../components/ui/form-field":6324,"../../../../../contexts/gasFee":6415,"../../../../../helpers/constants/design-system":6458,"../../../../../helpers/utils/util":6514,"../../../../../hooks/useI18nContext":6583,"../../../constants":6937,"../../../send-legacy/send.constants":7041,"../context":6712,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../../contexts/gasFee"),s=e("../../../../../helpers/utils/util"),i=e("../../../../../helpers/constants/design-system"),l=e("../../../../../hooks/useI18nContext"),c=e("../../../send-legacy/send.constants"),u=(a=e("../../../../../components/ui/form-field"))&&a.__esModule?a:{default:a},d=e("../context"),m=e("../../../../../components/component-library"),p=e("../../../constants"),f=e("../../../../../../shared/modules/conversion.utils");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,l.useI18nContext)(),{setGasLimit:t,setErrorValue:n}=(0,d.useAdvancedGasFeePopoverContext)(),{gasLimit:a,minimumGasLimitDec:g,transaction:{chainId:h,originalGasEstimate:y}}=(0,o.useGasFeeContext)(),v=y!==undefined&&(0,f.hexToDecimal)(y),[k,b]=(0,r.useState)(v?Math.max(c.MAX_GAS_LIMIT_DEC,v):c.MAX_GAS_LIMIT_DEC),[T,x]=(0,r.useState)(!1),[C,S]=(0,r.useState)(a),[w,E]=(0,r.useState)(),_=e=>{S(e||0)};return(0,r.useEffect)(()=>{if(t(C),p.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(h))return;const e=((e,t,n)=>(0,s.bnLessThan)(e,t)||(0,s.bnGreaterThan)(e,n)?"editGasLimitOutOfBoundsV2":null)(C,g,k);E(e),x(!0===T?T:null!==e),n("gasLimit","editGasLimitOutOfBoundsV2"===e)},[h,C,g,t,n,k,T,e]),(0,r.useEffect)(()=>{v&&b(Math.max(c.MAX_GAS_LIMIT_DEC,v))},[g,v,b]),T?r.default.createElement(u.default,{dataTestId:"gas-limit-input",error:w?e(w,[g-1,k]):"",onChange:_,titleText:e("gasLimitV2"),value:C,allowDecimals:!1,numeric:!0}):r.default.createElement(m.Text,{tag:i.TextVariant.bodyMd,variant:i.TextVariant.bodySm,as:"h6",className:"advanced-gas-fee-gas-limit",marginTop:4,marginLeft:2,marginRight:2},r.default.createElement("strong",null,e("gasLimitV2")),r.default.createElement("span",null,C),r.default.createElement(m.Button,{"data-testid":"advanced-gas-fee-edit",className:"advanced-gas-fee-gas-limit__edit-link",onClick:()=>x(!0),variant:m.ButtonVariant.Link,size:m.ButtonSize.Inherit},e("edit")))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-gas-limit/advanced-gas-fee-gas-limit.js"}],[6699,{"./advanced-gas-fee-gas-limit":6698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./advanced-gas-fee-gas-limit"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-gas-limit/index.js"}],[6700,{"../../../../../components/ui/box":6288,"../../../../../components/ui/loading-heartbeat":6348,"../../../../../contexts/i18n":6416,"../../../../../helpers/utils/gas":6491,"../../../../../helpers/utils/util":6514,classnames:3623,"prop-types":4605,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=d(e("prop-types")),o=d(e("classnames")),s=e("../../../../../helpers/utils/util"),i=e("../../../../../helpers/utils/gas"),l=e("../../../../../contexts/i18n"),c=d(e("../../../../../components/ui/box")),u=d(e("../../../../../components/ui/loading-heartbeat"));function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const p=({latest:e,historical:t,trend:n})=>{const r=(0,a.useContext)(l.I18nContext),d=function(e,t){switch(e){case"up":return{className:"fa-arrow-up advanced-gas-fee-input-subtext__up",color:"var(--color-success-default)",title:t("upArrow")};case"down":return{className:"fa-arrow-down advanced-gas-fee-input-subtext__down",color:"var(--color-error-default)",title:t("downArrow")};case"level":return{className:"fa-arrow-right advanced-gas-fee-input-subtext__level",color:"var(--color-icon-alternative)",title:t("levelArrow")};default:return null}}(n,r);return a.default.createElement(c.default,{display:"flex",alignItems:"center",gap:4,className:"advanced-gas-fee-input-subtext"},(0,s.isNullish)(e)?null:a.default.createElement(c.default,{display:"flex",alignItems:"center","data-testid":"latest"},a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__label"},r("currentTitle")),a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__value"},a.default.createElement(u.default,null),(0,i.formatGasFeeOrFeeRange)(e)),null===d?null:a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__icon"},a.default.createElement("i",{className:(0,o.default)("fa",d.className),style:{color:d.color},title:d.title,"data-testid":"fee-arrow"}))),(0,s.isNullish)(t)?null:a.default.createElement(c.default,null,a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__label","data-testid":"historical"},r("twelveHrTitle")),a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__value"},a.default.createElement(u.default,null),(0,i.formatGasFeeOrFeeRange)(t))))};p.propTypes={latest:r.default.oneOfType([r.default.string,r.default.arrayOf(r.default.string)]),historical:r.default.oneOfType([r.default.string,r.default.arrayOf(r.default.string)]),trend:r.default.oneOf(["up","down","level"])};n.default=p}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-input-subtext/advanced-gas-fee-input-subtext.js"}],[6701,{"./advanced-gas-fee-input-subtext":6700},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./advanced-gas-fee-input-subtext"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-input-subtext/index.js"}],[6702,{"../../../../../components/ui/box":6288,"./base-fee-input":6704,"./priority-fee-input":6706,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(e("react")),r=i(e("../../../../../components/ui/box")),o=i(e("./base-fee-input")),s=i(e("./priority-fee-input"));function i(e){return e&&e.__esModule?e:{default:e}}n.default=()=>a.default.createElement(r.default,{className:"advanced-gas-fee-inputs"},a.default.createElement(o.default,null),a.default.createElement(s.default,null))}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/advanced-gas-fee-inputs.js"}],[6703,{"../../../../../../../shared/constants/gas":5252,"../../../../../../../shared/modules/Numeric":5349,"../../../../../../../shared/modules/conversion.utils":5354,"../../../../../../components/ui/box":6288,"../../../../../../components/ui/form-field":6324,"../../../../../../contexts/gasFee":6415,"../../../../../../helpers/constants/common":6456,"../../../../../../hooks/useCurrencyDisplay":6572,"../../../../../../hooks/useI18nContext":6583,"../../../../../../hooks/useUserPreferencedCurrency":6621,"../../../../../../selectors":7345,"../../../../constants":6937,"../../../../send-legacy/send.constants":7041,"../../advanced-gas-fee-input-subtext":6701,"../../context":6712,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("../../../../send-legacy/send.constants"),s=e("../../../../../../../shared/constants/gas"),i=e("../../../../../../helpers/constants/common"),l=e("../../../../../../selectors"),c=e("../../../../../../contexts/gasFee"),u=e("../../../../../../hooks/useI18nContext"),d=e("../../../../../../hooks/useUserPreferencedCurrency"),m=e("../../../../../../hooks/useCurrencyDisplay"),p=b(e("../../../../../../components/ui/box")),f=b(e("../../../../../../components/ui/form-field")),g=e("../../context"),h=b(e("../../advanced-gas-fee-input-subtext")),y=e("../../../../../../../shared/modules/conversion.utils"),v=e("../../../../../../../shared/modules/Numeric"),k=e("../../../../constants");function b(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,u.useI18nContext)(),{gasFeeEstimates:t,estimateUsed:n,maxFeePerGas:b,editGasMode:T,transaction:{chainId:x}}=(0,c.useGasFeeContext)(),C=new v.Numeric(b,10).toString(),{gasLimit:S,maxPriorityFeePerGas:w,setErrorValue:E,setMaxFeePerGas:_,setMaxBaseFee:I}=(0,g.useAdvancedGasFeePopoverContext)(),{estimatedBaseFee:M,historicalBaseFeeRange:A,baseFeeTrend:P}=t??{},[O,D]=(0,a.useState)(),{currency:N,numberOfDecimals:B}=(0,d.useUserPreferencedCurrency)(i.PRIMARY),R=(0,r.useSelector)(l.getAdvancedGasFeeValues),F=n!==s.PriorityLevels.custom&&null!=R&&R.maxBaseFee&&T!==s.EditGasModes.swaps?R.maxBaseFee:C,[j,L]=(0,a.useState)(F>0?F:undefined);(0,a.useEffect)(()=>{j===undefined&&F>0&&L(F)},[j,F,L]);const[$]=(0,m.useCurrencyDisplay)((0,y.decGWEIToHexWEI)(j*S),{currency:N,numberOfDecimals:B}),W=(0,a.useCallback)(e=>{L(e)},[L]);return(0,a.useEffect)(()=>{_(j);const e=((e,t,n,a)=>{const r=new v.Numeric(e,10);return new v.Numeric(n,10).greaterThan(r)?"editGasMaxBaseFeeGWEIImbalance":null!=t&&t.low&&r.lessThan(t.low.suggestedMaxFeePerGas,10)&&k.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(a)?"editGasMaxBaseFeeLow":null!=t&&t.high&&r.greaterThan(t.high.suggestedMaxFeePerGas*o.HIGH_FEE_WARNING_MULTIPLIER,10)?"editGasMaxBaseFeeHigh":null})(j,t,w,x);D(e),E("maxFeePerGas","editGasMaxBaseFeeGWEIImbalance"===e),I(j)},[j,x,t,w,D,E,_,I]),a.default.createElement(p.default,{className:"base-fee-input",marginLeft:2,marginRight:2},a.default.createElement(f.default,{dataTestId:"base-fee-input",error:O?e(O):"",onChange:W,titleText:e("maxBaseFee"),titleUnit:`(${e("gwei")})`,tooltipText:e("advancedBaseGasFeeToolTip"),value:j,detailText:` ${$}`,allowDecimals:!0,numeric:!0}),a.default.createElement(h.default,{latest:M,historical:A,trend:P}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/base-fee-input/base-fee-input.js"}],[6704,{"./base-fee-input":6703},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./base-fee-input"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/base-fee-input/index.js"}],[6705,{"./advanced-gas-fee-inputs":6702},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./advanced-gas-fee-inputs"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/index.js"}],[6706,{"./priority-fee-input":6707},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./priority-fee-input"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/priority-fee-input/index.js"}],[6707,{"../../../../../../../shared/constants/gas":5252,"../../../../../../../shared/modules/Numeric":5349,"../../../../../../../shared/modules/conversion.utils":5354,"../../../../../../components/ui/box":6288,"../../../../../../components/ui/form-field":6324,"../../../../../../contexts/gasFee":6415,"../../../../../../helpers/constants/common":6456,"../../../../../../hooks/useCurrencyDisplay":6572,"../../../../../../hooks/useI18nContext":6583,"../../../../../../hooks/useUserPreferencedCurrency":6621,"../../../../../../selectors":7345,"../../../../constants":6937,"../../../../send-legacy/send.constants":7041,"../../advanced-gas-fee-input-subtext":6701,"../../context":6712,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),o=e("../../../../send-legacy/send.constants"),s=e("../../../../../../../shared/constants/gas"),i=e("../../../../../../helpers/constants/common"),l=e("../../../../../../selectors"),c=e("../../../../../../hooks/useCurrencyDisplay"),u=e("../../../../../../contexts/gasFee"),d=e("../../../../../../hooks/useI18nContext"),m=e("../../../../../../hooks/useUserPreferencedCurrency"),p=b(e("../../../../../../components/ui/form-field")),f=b(e("../../../../../../components/ui/box")),g=e("../../context"),h=b(e("../../advanced-gas-fee-input-subtext")),y=e("../../../../../../../shared/modules/conversion.utils"),v=e("../../../../../../../shared/modules/Numeric"),k=e("../../../../constants");function b(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,d.useI18nContext)(),t=(0,r.useSelector)(l.getAdvancedGasFeeValues),{gasLimit:n,setErrorValue:b,setMaxPriorityFeePerGas:T}=(0,g.useAdvancedGasFeePopoverContext)(),{editGasMode:x,estimateUsed:C,gasFeeEstimates:S,maxPriorityFeePerGas:w,transaction:{chainId:E}}=(0,u.useGasFeeContext)(),_=new v.Numeric(w,10).toString(),{latestPriorityFeeRange:I,historicalPriorityFeeRange:M,priorityFeeTrend:A}=S??{},[P,O]=(0,a.useState)(),D=C!==s.PriorityLevels.custom&&null!=t&&t.priorityFee&&x!==s.EditGasModes.swaps?t.priorityFee:_,[N,B]=(0,a.useState)(D>0?D:undefined);(0,a.useEffect)(()=>{N===undefined&&D>0&&B(D)},[N,D,B]);const{currency:R,numberOfDecimals:F}=(0,m.useUserPreferencedCurrency)(i.PRIMARY),[j]=(0,c.useCurrencyDisplay)((0,y.decGWEIToHexWEI)(N*n),{currency:R,numberOfDecimals:F});return(0,a.useEffect)(()=>{T(N);const e=((e,t,n)=>{const a=new v.Numeric(e,10);return a.lessThan(0,10)?"editGasMaxPriorityFeeBelowMinimumV2":null!=t&&t.low&&a.lessThan(t.low.suggestedMaxPriorityFeePerGas,10)&&k.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(n)?"editGasMaxPriorityFeeLowV2":null!=t&&t.high&&a.greaterThan(t.high.suggestedMaxPriorityFeePerGas*o.HIGH_FEE_WARNING_MULTIPLIER,10)?"editGasMaxPriorityFeeHighV2":null})(N,S,E);b("maxPriorityFeePerGas","editGasMaxPriorityFeeBelowMinimumV2"===e),O(e)},[E,S,N,b,T,O]),a.default.createElement(f.default,{marginTop:4,marginLeft:2,marginRight:2,className:"priority-fee-input"},a.default.createElement(p.default,{dataTestId:"priority-fee-input",error:P?e(P):"",onChange:e=>{B(e)},titleText:e("priorityFeeProperCase"),titleUnit:`(${e("gwei")})`,tooltipText:e("advancedPriorityFeeToolTip"),value:N,detailText:` ${j}`,allowDecimals:!0,numeric:!0}),a.default.createElement(h.default,{latest:I,historical:M,trend:A}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/priority-fee-input/priority-fee-input.js"}],[6708,{"../../../../components/ui/box":6288,"../../../../components/ui/popover":6373,"../../../../contexts/transaction-modal":6425,"../../../../hooks/useI18nContext":6583,"./advanced-gas-fee-defaults":6697,"./advanced-gas-fee-gas-limit":6699,"./advanced-gas-fee-inputs":6705,"./advanced-gas-fee-save":6710,"./context":6712,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=p(e("react")),r=e("../../../../hooks/useI18nContext"),o=e("../../../../contexts/transaction-modal"),s=p(e("../../../../components/ui/box")),i=p(e("../../../../components/ui/popover")),l=e("./context"),c=p(e("./advanced-gas-fee-inputs")),u=p(e("./advanced-gas-fee-gas-limit")),d=p(e("./advanced-gas-fee-save")),m=p(e("./advanced-gas-fee-defaults"));function p(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{const e=(0,r.useI18nContext)(),{closeAllModals:t,currentModal:n}=(0,o.useTransactionModalContext)();return"advancedGasFee"!==n?null:a.default.createElement(l.AdvancedGasFeePopoverContextProvider,null,a.default.createElement(i.default,{className:"advanced-gas-fee-popover",title:e("advancedGasFeeModalTitle"),onClose:t,footer:a.default.createElement(d.default,null)},a.default.createElement(s.default,{margin:4},a.default.createElement(c.default,null),a.default.createElement(m.default,null),a.default.createElement(u.default,null))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-popover.js"}],[6709,{"../../../../../../shared/constants/gas":5252,"../../../../../../shared/modules/conversion.utils":5354,"../../../../../components/component-library":5919,"../../../../../contexts/gasFee":6415,"../../../../../contexts/transaction-modal":6425,"../../../../../hooks/useI18nContext":6583,"../../../hooks/useTransactionEventFragment":7028,"../context":6712,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=(a=e("react"))&&a.__esModule?a:{default:a},o=e("../../../../../../shared/constants/gas"),s=e("../../../../../../shared/modules/conversion.utils"),i=e("../../../../../contexts/transaction-modal"),l=e("../../../../../contexts/gasFee"),c=e("../../../hooks/useTransactionEventFragment"),u=e("../../../../../hooks/useI18nContext"),d=e("../../../../../components/component-library"),m=e("../context");n.default=()=>{const{closeModal:e}=(0,i.useTransactionModalContext)(),{updateTransactionEventFragment:t}=(0,c.useTransactionEventFragment)(),{updateTransaction:n}=(0,l.useGasFeeContext)(),a=(0,u.useI18nContext)(),{gasLimit:p,hasErrors:f,maxFeePerGas:g,maxPriorityFeePerGas:h}=(0,m.useAdvancedGasFeePopoverContext)();return r.default.createElement(d.Button,{variant:d.ButtonVariant.Primary,disabled:f,onClick:()=>{n({estimateUsed:o.PriorityLevels.custom,maxFeePerGas:(0,s.decGWEIToHexWEI)(g),maxPriorityFeePerGas:(0,s.decGWEIToHexWEI)(h),gasLimit:p}),t({properties:{gas_edit_type:"advanced"}}),e(["advancedGasFee","editGasFee"])},block:!0},a("save"))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-save/advanced-gas-fee-save.js"}],[6710,{"./advanced-gas-fee-save":6709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./advanced-gas-fee-save"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-save/index.js"}],[6711,{"prop-types":4605,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AdvancedGasFeePopoverContextProvider=n.AdvancedGasFeePopoverContext=void 0,n.useAdvancedGasFeePopoverContext=function(){return(0,r.useContext)(i)};var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=(a=e("prop-types"))&&a.__esModule?a:{default:a};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const i=n.AdvancedGasFeePopoverContext=(0,r.createContext)({}),l=({children:e})=>{const[t,n]=(0,r.useState)(),[a,o]=(0,r.useState)(),[s,l]=(0,r.useState)(),[c,u]=(0,r.useState)({maxFeePerGas:!1,maxPriorityFeePerGas:!1,gasLimit:!1}),d=(0,r.useCallback)((e,t)=>{c[e]!==t&&u({...c,[e]:t})},[c,u]),[m,p]=(0,r.useState)();return r.default.createElement(i.Provider,{value:{gasLimit:t,hasErrors:c.maxFeePerGas||c.maxPriorityFeePerGas||c.gasLimit,gasErrors:c,maxFeePerGas:a,maxPriorityFeePerGas:s,setErrorValue:d,maxBaseFee:m,setGasLimit:n,setMaxPriorityFeePerGas:l,setMaxFeePerGas:o,setMaxBaseFee:p}},e)};n.AdvancedGasFeePopoverContextProvider=l,l.propTypes={children:o.default.node.isRequired}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/context/advancedGasFeePopover.js"}],[6712,{"./advancedGasFeePopover":6711},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./advancedGasFeePopover");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/context/index.js"}],[6713,{"./advanced-gas-fee-popover":6708},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./advanced-gas-fee-popover"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/index.js"}],[6714,{"../../../../../../shared/constants/security-provider":5269,"../../../../../components/component-library":5919,"../../../../../components/ui/icon/preloader":6335,"../../../hooks/useCurrentSignatureSecurityAlertResponse":7007,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=l(e("react")),r=l(e("../../../../../components/ui/icon/preloader")),o=e("../../../../../../shared/constants/security-provider"),s=e("../../../../../components/component-library"),i=l(e("../../../hooks/useCurrentSignatureSecurityAlertResponse"));function l(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{const e=(0,i.default)();return(null==e?void 0:e.result_type)!==o.BlockaidResultType.Loading?null:a.default.createElement(s.Box,{marginInline:"auto",marginTop:4},a.default.createElement(r.default,{size:18}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/blockaid-loading-indicator/blockaid-loading-indicator.tsx"}],[6715,{"./blockaid-loading-indicator":6714},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BlockaidLoadingIndicator",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./blockaid-loading-indicator"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/blockaid-loading-indicator/index.ts"}],[6716,{"../../../../../components/app/alert-system/contexts/alertActionHandler":5391,"../../../../../components/app/alert-system/contexts/alertMetricsContext":5392,"../../../hooks/setConfirmationAlerts":6990,"../../../hooks/useConfirmationAlertActions":7e3,"../../../hooks/useConfirmationAlertMetrics":7001,react:4789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=c(e("react")),r=e("../../../../../components/app/alert-system/contexts/alertActionHandler"),o=c(e("../../../hooks/useConfirmationAlertActions")),s=c(e("../../../hooks/setConfirmationAlerts")),i=e("../../../../../components/app/alert-system/contexts/alertMetricsContext"),l=e("../../../hooks/useConfirmationAlertMetrics");function c(e){return e&&e.__esModule?e:{default:e}}n.default=({children:e})=>{const{trackAlertActionClicked:t,trackAlertRender:n,trackInlineAlertClicked:c}=(0,l.useConfirmationAlertMetrics)(),u=(0,o.default)();return(0,s.default)(),a.default.createElement(i.AlertMetricsProvider,{metrics:{trackAlertActionClicked:t,trackAlertRender:n,trackInlineAlertClicked:c}},a.default.createElement(r.AlertActionHandlerProvider,{onProcessAction:u},e))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/confirm-alerts/confirm-alerts.tsx"}],[6717,{"./confirm-alerts":6716},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ConfirmAlerts",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./confirm-alerts"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/confirm-alerts/index.tsx"}],[6718,{"../../../../../../shared/constants/metametrics":5259,"../../../../../../shared/lib/confirmation.utils":5291,"../../../../../components/app/alert-system/confirm-alert-modal":5390,"../../../../../components/component-library":5919,"../../../../../components/multichain/pages/page":6237,"../../../../../ducks/confirm-transaction/confirm-transaction.duck":6438,"../../../../../helpers/constants/design-system":6458,"../../../../../hooks/useAlerts":6566,"../../../../../hooks/useI18nContext":6583,"../../../../../selectors":7345,"../../../../../store/actions":7369,"../../../context/confirm":6939,"../../../hooks/gas/useIsGaslessLoading":6967,"../../../hooks/transactions/useTransactionConfirm":6993,"../../../hooks/useConfirmSendNavigation":6999,"../../../hooks/useOriginThrottling":7022,"../../../utils":7049,"../utils":6834,"./origin-throttle-modal":6720,"@metamask/rpc-errors":2224,react:4789,"react-redux":4733},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/rpc-errors"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=e("../../../../../../shared/constants/metametrics"),i=e("../../../../../../shared/lib/confirmation.utils"),l=e("../../../../../components/app/alert-system/confirm-alert-modal"),c=e("../../../../../components/component-library"),u=e("../../../../../components/multichain/pages/page"),d=e("../../../../../ducks/confirm-transaction/confirm-transaction.duck"),m=e("../../../../../helpers/constants/design-system"),p=w(e("../../../../../hooks/useAlerts")),f=e("../../../../../hooks/useI18nContext"),g=e("../../../../../selectors"),h=e("../../../../../store/actions"),y=e("../../../context/confirm"),v=e("../../../hooks/useConfirmSendNavigation"),k=e("../../../hooks/useOriginThrottling"),b=e("../../../utils"),T=e("../../../hooks/transactions/useTransactionConfirm"),x=e("../../../hooks/gas/useIsGaslessLoading"),C=e("../utils"),S=w(e("./origin-throttle-modal"));function w(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function _(e,t,n){return!!t||!e&&n}const I=({alertOwnerId:e="",disabled:t,onSubmit:n,onCancel:a})=>{const o=(0,f.useI18nContext)(),[s,i]=(0,r.useState)(!1),{alerts:u,hasDangerAlerts:d,hasUnconfirmedDangerAlerts:g,hasUnconfirmedFieldDangerAlerts:h,unconfirmedFieldDangerAlerts:y}=(0,p.default)(e),v=u.some(e=>e.severity===m.Severity.Danger&&e.isBlocking),k=(0,r.useCallback)(()=>{i(!1)},[]),b=(0,r.useCallback)(()=>{i(!0)},[]);return r.default.createElement(r.default.Fragment,null,s&&r.default.createElement(l.ConfirmAlertModal,{ownerId:e,onClose:k,onCancel:a,onSubmit:n}),d?r.default.createElement(c.Button,{block:!0,danger:!0,"data-testid":"confirm-footer-button",disabled:_(g,v,t),onClick:b,size:c.ButtonSize.Lg,startIconName:h?c.IconName.SecuritySearch:c.IconName.Danger},function(e,t){return 1===e.length?t("reviewAlert"):e.length>1?t("reviewAlerts"):t("confirm")}(y,o)):r.default.createElement(c.Button,{block:!0,"data-testid":"confirm-footer-button",disabled:t,onClick:n,size:c.ButtonSize.Lg},o("confirm")))};n.default=()=>{const e=(0,o.useDispatch)(),t=(0,f.useI18nContext)(),{onTransactionConfirm:n}=(0,T.useTransactionConfirm)(),{currentConfirmation:l,isScrollToBottomCompleted:p}=(0,y.useConfirmContext)(),{isGaslessLoading:w}=(0,x.useIsGaslessLoading)(),{navigateBackIfSend:E}=(0,v.useConfirmSendNavigation)(),{from:_}=(0,C.getConfirmationSender)(l),{shouldThrottleOrigin:M}=(0,k.useOriginThrottling)(),[A,P]=(0,r.useState)(!1),{id:O}=l||{},D=(0,o.useSelector)(e=>{if(_){return!!1&&(0,g.doesAddressRequireLedgerHidConnection)(e,_)}return!1}),N=(0,b.isSignatureTransactionType)(l),B=!p&&!N||D||w,R=(0,r.useCallback)(({location:t}={})=>{if(!O)return;const n=a.providerErrors.userRejectedRequest();n.data={location:t};const r=(0,a.serializeError)(n);e((0,h.rejectPendingApproval)(O,r))},[O,e]),F=(0,r.useCallback)(()=>{e((0,h.updateCustomNonce)("")),e((0,h.setNextNonce)("")),e((0,d.clearConfirmTransaction)())},[e]),j=(0,r.useCallback)(({location:e})=>{l&&(E(),R({location:e}),F())},[l,E,R,F]),L=(0,r.useCallback)(()=>{if(!l)return;(0,i.isCorrectDeveloperTransactionType)(null==l?void 0:l.type)?n():e((0,h.resolvePendingApproval)(l.id,undefined)),F()},[l,e,n,F]),$=(0,r.useCallback)(()=>{M?P(!0):j({location:s.MetaMetricsEventLocation.Confirmation})},[j,M]);return r.default.createElement(u.Footer,{className:"confirm-footer_page-footer",flexDirection:m.FlexDirection.Column},r.default.createElement(S.default,{isOpen:A,onConfirmationCancel:j}),r.default.createElement(c.Box,{display:m.Display.Flex,flexDirection:m.FlexDirection.Row,gap:4},r.default.createElement(c.Button,{block:!0,"data-testid":"confirm-footer-cancel-button",onClick:$,size:c.ButtonSize.Lg,variant:c.ButtonVariant.Secondary},t("cancel")),r.default.createElement(I,{alertOwnerId:null==l?void 0:l.id,onSubmit:()=>L(),disabled:B,onCancel:j})))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/footer.tsx"}],[6719,{"./footer":6718},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Footer",{enumerable:!0,get:function(){return r.default}});var a,r=(a=e("./footer"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/index.tsx"}]],[],{});