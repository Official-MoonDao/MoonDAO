From 7e55d061d6d54bde08dc59c5cde87a7c1b9934cd Mon Sep 17 00:00:00 2001
From: jaderiverstokes <jaderiverstokes@gmail.com>
Date: Fri, 26 Sep 2025 09:22:07 -0700
Subject: [PATCH] signers

---
 subscription-contracts/script/MoonDAOTeamSepolia.s.sol   | 3 +--
 subscription-contracts/script/MoonDaoEntity.s.sol        | 3 +--
 subscription-contracts/script/TeamCreator.s.sol          | 4 +---
 subscription-contracts/script/TeamCreatorSepolia.s.sol   | 4 +---
 subscription-contracts/src/MoonDAOTeamCreator.sol        | 5 +----
 subscription-contracts/src/ProjectTeamCreator.sol        | 7 +++++--
 subscription-contracts/test/EntityCreatorTest.t.sol      | 3 +--
 subscription-contracts/test/MissionTest.t.sol            | 3 +--
 subscription-contracts/test/ProjectTeamCreatorTest.t.sol | 2 +-
 subscription-contracts/test/TeamTest.t.sol               | 3 +--
 10 files changed, 14 insertions(+), 23 deletions(-)

diff --git a/subscription-contracts/script/MoonDAOTeamSepolia.s.sol b/subscription-contracts/script/MoonDAOTeamSepolia.s.sol
index 4ce38cb2..6cb80752 100644
--- a/subscription-contracts/script/MoonDAOTeamSepolia.s.sol
+++ b/subscription-contracts/script/MoonDAOTeamSepolia.s.sol
@@ -43,8 +43,7 @@ contract MyScript is Script {
 
         teamTable.setMoonDaoTeam(address(team));
 
-        address[] memory authorizedSigners = new address[](0);
-        MoonDAOTeamCreator creator = new MoonDAOTeamCreator(0x3bc1A0Ad72417f2d411118085256fC53CBdDd137, 0x0a3f85fa597B6a967271286aA0724811acDF5CD9, 0x050079a8fbFCE76818C62481BA015b89567D2d35, address(team), 0x3E5c63644E683549055b9Be8653de26E0B4CD36E, 0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2, address(teamTable), address(whitelist), authorizedSigners);
+        MoonDAOTeamCreator creator = new MoonDAOTeamCreator(0x3bc1A0Ad72417f2d411118085256fC53CBdDd137, 0x0a3f85fa597B6a967271286aA0724811acDF5CD9, 0x050079a8fbFCE76818C62481BA015b89567D2d35, address(team), 0x3E5c63644E683549055b9Be8653de26E0B4CD36E, 0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2, address(teamTable), address(whitelist));
 
         creator.setOpenAccess(true);
 
diff --git a/subscription-contracts/script/MoonDaoEntity.s.sol b/subscription-contracts/script/MoonDaoEntity.s.sol
index 7518d32a..be32a145 100644
--- a/subscription-contracts/script/MoonDaoEntity.s.sol
+++ b/subscription-contracts/script/MoonDaoEntity.s.sol
@@ -40,8 +40,7 @@ contract MyScript is Script {
 
         teamTable.setMoonDaoTeam(address(team));
 
-        address[] memory authorizedSigners = new address[](0);
-        MoonDAOTeamCreator creator = new MoonDAOTeamCreator(0x3bc1A0Ad72417f2d411118085256fC53CBdDd137, 0x0a3f85fa597B6a967271286aA0724811acDF5CD9, 0x050079a8fbFCE76818C62481BA015b89567D2d35, address(team), 0x3E5c63644E683549055b9Be8653de26E0B4CD36E, 0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2, address(teamTable), address(whitelist), authorizedSigners);
+        MoonDAOTeamCreator creator = new MoonDAOTeamCreator(0x3bc1A0Ad72417f2d411118085256fC53CBdDd137, 0x0a3f85fa597B6a967271286aA0724811acDF5CD9, 0x050079a8fbFCE76818C62481BA015b89567D2d35, address(team), 0x3E5c63644E683549055b9Be8653de26E0B4CD36E, 0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2, address(teamTable), address(whitelist));
 
         // creator.setOpenAccess(true);
 
diff --git a/subscription-contracts/script/TeamCreator.s.sol b/subscription-contracts/script/TeamCreator.s.sol
index 0b67cf55..88ed6499 100644
--- a/subscription-contracts/script/TeamCreator.s.sol
+++ b/subscription-contracts/script/TeamCreator.s.sol
@@ -39,10 +39,8 @@ contract TeamCreatorScript is Script {
         IHats hats = IHats(HATS_ADDRESS);
         uint256 moonDaoTeamAdminHatId = 0x0000002a00010000000000000000000000000000000000000000000000000000;
 
-        address[] memory authorizedSigners = new address[](1);
-        authorizedSigners[0] = address(authorizedSignerAddress);   
         
-        MoonDAOTeamCreator creator = new MoonDAOTeamCreator(HATS_ADDRESS, HATS_MODULE_FACTORY_ADDRESS, HATS_PASSTHROUGH_ADDRESS, TEAM_ADDRESS, GNOSIS_SINGLETON_ADDRESS, GNOSIS_SAFE_PROXY_FACTORY_ADDRESS, TEAM_TABLE_ADDRESS, WHITELIST_ADDRESS, authorizedSigners);
+        MoonDAOTeamCreator creator = new MoonDAOTeamCreator(HATS_ADDRESS, HATS_MODULE_FACTORY_ADDRESS, HATS_PASSTHROUGH_ADDRESS, TEAM_ADDRESS, GNOSIS_SINGLETON_ADDRESS, GNOSIS_SAFE_PROXY_FACTORY_ADDRESS, TEAM_TABLE_ADDRESS, WHITELIST_ADDRESS);
 
         creator.setMoonDaoTeamAdminHatId(moonDaoTeamAdminHatId);
 
diff --git a/subscription-contracts/script/TeamCreatorSepolia.s.sol b/subscription-contracts/script/TeamCreatorSepolia.s.sol
index 1748090b..05e3e596 100644
--- a/subscription-contracts/script/TeamCreatorSepolia.s.sol
+++ b/subscription-contracts/script/TeamCreatorSepolia.s.sol
@@ -44,10 +44,8 @@ contract TeamCreatorSepoliaScript is Script {
         IHats hats = IHats(HATS_ADDRESS);
         uint256 moonDaoTeamAdminHatId = 0x0000018200020000000000000000000000000000000000000000000000000000;
 
-        address[] memory authorizedSigners = new address[](1);
-        authorizedSigners[0] = address(authorizedSignerAddress);
 
-        MoonDAOTeamCreator creator = new MoonDAOTeamCreator(HATS_ADDRESS, HATS_MODULE_FACTORY_ADDRESS, HATS_PASSTHROUGH_ADDRESS, TEAM_ADDRESS, GNOSIS_SINGLETON_ADDRESS, GNOSIS_SAFE_PROXY_FACTORY_ADDRESS, TEAM_TABLE_ADDRESS, WHITELIST_ADDRESS, authorizedSigners);
+        MoonDAOTeamCreator creator = new MoonDAOTeamCreator(HATS_ADDRESS, HATS_MODULE_FACTORY_ADDRESS, HATS_PASSTHROUGH_ADDRESS, TEAM_ADDRESS, GNOSIS_SINGLETON_ADDRESS, GNOSIS_SAFE_PROXY_FACTORY_ADDRESS, TEAM_TABLE_ADDRESS, WHITELIST_ADDRESS);
 
         creator.setOpenAccess(true);
         creator.setMoonDaoTeamAdminHatId(moonDaoTeamAdminHatId);
diff --git a/subscription-contracts/src/MoonDAOTeamCreator.sol b/subscription-contracts/src/MoonDAOTeamCreator.sol
index 5c61e055..b6643a28 100644
--- a/subscription-contracts/src/MoonDAOTeamCreator.sol
+++ b/subscription-contracts/src/MoonDAOTeamCreator.sol
@@ -55,7 +55,7 @@ contract MoonDAOTeamCreator is Ownable {
         string formId;
     }
 
-    constructor(address _hats, address _hatsModuleFactory, address _hatsPassthrough, address _moonDAOTeam, address _gnosisSingleton, address _gnosisSafeProxyFactory, address _table, address _whitelist, address[] memory _authorizedSigners) Ownable(msg.sender) {
+    constructor(address _hats, address _hatsModuleFactory, address _hatsPassthrough, address _moonDAOTeam, address _gnosisSingleton, address _gnosisSafeProxyFactory, address _table, address _whitelist) Ownable(msg.sender) {
         hats = IHats(_hats);
         moonDAOTeam = MoonDAOTeam(_moonDAOTeam);
         gnosisSingleton = _gnosisSingleton;
@@ -65,9 +65,6 @@ contract MoonDAOTeamCreator is Ownable {
 
         table = MoonDaoTeamTableland(_table);
         whitelist = Whitelist(_whitelist);
-        for (uint256 i = 0; i < _authorizedSigners.length; i++) {
-            authorizedSigners[_authorizedSigners[i]] = true;
-        }
     }
 
     function setAuthorizedSigner(address _authorizedSigner, bool _authorized) external onlyOwner {
diff --git a/subscription-contracts/src/ProjectTeamCreator.sol b/subscription-contracts/src/ProjectTeamCreator.sol
index 550802c3..ca9545b8 100644
--- a/subscription-contracts/src/ProjectTeamCreator.sol
+++ b/subscription-contracts/src/ProjectTeamCreator.sol
@@ -46,11 +46,14 @@ contract ProjectTeamCreator is Ownable {
         projectTeamAdminHatId = _projectTeamAdminHatId;
     }
 
-    function createProjectTeam(string memory adminHatURI, string memory managerHatURI, string memory memberHatURI, string calldata name, string calldata description, string calldata image, uint256 quarter, uint256 year, uint256 MDP, string calldata proposalIPFS, string calldata proposalLink, string calldata upfrontPayments, address lead, address[] memory members, address[] memory signers) external onlyOwner() returns (uint256 tokenId, uint256 childHatId) {
+    function createProjectTeam(uint256 quarter, uint256 year, uint256 MDP, string calldata proposalIPFS, string calldata proposalLink, string calldata upfrontPayments, address lead, address[] memory members, address[] memory signers) external onlyOwner() returns (uint256 tokenId, uint256 childHatId) {
         bytes memory safeCallData = constructSafeCallData(signers);
         GnosisSafeProxy gnosisSafe = gnosisSafeProxyFactory.createProxy(gnosisSingleton, safeCallData);
 
         //admin hat
+        string memory adminHatURI = "";
+        string memory managerHatURI = "";
+        string memory memberHatURI = "";
         uint256 projectAdminHat = hats.createHat(projectTeamAdminHatId, adminHatURI, 1, address(gnosisSafe), address(gnosisSafe), true, "");
         hats.mintHat(projectAdminHat, address(this));
 
@@ -78,7 +81,7 @@ contract ProjectTeamCreator is Ownable {
         //mint
         tokenId = projectTeam.mintTo(address(gnosisSafe), lead, projectAdminHat, projectManagerHat, projectContributorHat, address(memberPassthroughModule));
 
-        table.insertIntoTable(tokenId, name, description, image, quarter, year, MDP, proposalIPFS, proposalLink, "", "", "", upfrontPayments, 1, 0);
+        table.insertIntoTable(tokenId, "", "", "", quarter, year, MDP, proposalIPFS, proposalLink, "", "", "", upfrontPayments, 1, 0);
     }
 
     function constructSafeCallData(address[] memory signers) internal returns (bytes memory) {
diff --git a/subscription-contracts/test/EntityCreatorTest.t.sol b/subscription-contracts/test/EntityCreatorTest.t.sol
index 5b3fb39f..ff2e7d1e 100644
--- a/subscription-contracts/test/EntityCreatorTest.t.sol
+++ b/subscription-contracts/test/EntityCreatorTest.t.sol
@@ -53,8 +53,7 @@ contract CreatorTest is Test {
         table = new MoonDaoTeamTableland("team");
 
         team = new MoonDAOTeam("erc5369", "ERC5643", user4, address(hats), address(discountList));
-        address[] memory authorizedSigners = new address[](0);
-        creator = new MoonDAOTeamCreator(address(hatsBase), address(hatsFactory), address(passthrough), address(team), gnosisSafeSingleton, address(proxyFactory), address(table), address(whitelist), authorizedSigners);
+        creator = new MoonDAOTeamCreator(address(hatsBase), address(hatsFactory), address(passthrough), address(team), gnosisSafeSingleton, address(proxyFactory), address(table), address(whitelist));
 
         creator.setOpenAccess(true);
 
diff --git a/subscription-contracts/test/MissionTest.t.sol b/subscription-contracts/test/MissionTest.t.sol
index 0eedb883..a1f7c2dd 100644
--- a/subscription-contracts/test/MissionTest.t.sol
+++ b/subscription-contracts/test/MissionTest.t.sol
@@ -73,8 +73,7 @@ contract MissionTest is Test, Config {
 
         moonDAOTeamTable = new MoonDaoTeamTableland("MoonDaoTeamTable");
         moonDAOTeam = new MoonDAOTeam("erc5369", "ERC5643", TREASURY, address(hatsBase), address(teamDiscountList));
-        address[] memory authorizedSigners = new address[](0);
-        moonDAOTeamCreator = new MoonDAOTeamCreator(address(hatsBase), address(hatsFactory), address(passthrough), address(moonDAOTeam), gnosisSafeSingleton, address(proxyFactory), address(moonDAOTeamTable), address(teamWhitelist), authorizedSigners);
+        moonDAOTeamCreator = new MoonDAOTeamCreator(address(hatsBase), address(hatsFactory), address(passthrough), address(moonDAOTeam), gnosisSafeSingleton, address(proxyFactory), address(moonDAOTeamTable), address(teamWhitelist));
         jbDirectory = IJBDirectory(JB_V5_DIRECTORY);
 
 
diff --git a/subscription-contracts/test/ProjectTeamCreatorTest.t.sol b/subscription-contracts/test/ProjectTeamCreatorTest.t.sol
index 27cd367f..c8b17ae7 100644
--- a/subscription-contracts/test/ProjectTeamCreatorTest.t.sol
+++ b/subscription-contracts/test/ProjectTeamCreatorTest.t.sol
@@ -66,7 +66,7 @@ contract CreatorTest is Test {
         address[] memory members = new address[](2);
         members[0] = user2;
         members[1] = user3;
-        (uint256 tokenId, uint256 childHatId) = creator.createProjectTeam(uri, uri, uri, "title","description", "image", 4,2024, 169, "IPFS_HASH", "LINK", "UPFRONT", user1, members, members);
+        (uint256 tokenId, uint256 childHatId) = creator.createProjectTeam(4,2024, 169, "IPFS_HASH", "LINK", "UPFRONT", user1, members, members);
     }
 
     function testMint() public {
diff --git a/subscription-contracts/test/TeamTest.t.sol b/subscription-contracts/test/TeamTest.t.sol
index abbcdad1..225aac79 100644
--- a/subscription-contracts/test/TeamTest.t.sol
+++ b/subscription-contracts/test/TeamTest.t.sol
@@ -52,8 +52,7 @@ contract ERC5643Test is Test {
       table = new MoonDAOTeamTable("MoonDAOTeamTable");
 
       team = new MoonDAOTeam("erc5369", "ERC5643", TREASURY, address(hatsBase), address(discountList));
-      address[] memory authorizedSigners = new address[](0);
-      creator = new MoonDAOTeamCreator(address(hatsBase), address(hatsFactory), address(passthrough), address(team), gnosisSafeSingleton, address(proxyFactory), address(table), address(whitelist), authorizedSigners);
+      creator = new MoonDAOTeamCreator(address(hatsBase), address(hatsFactory), address(passthrough), address(team), gnosisSafeSingleton, address(proxyFactory), address(table), address(whitelist));
 
       creator.setOpenAccess(true);
 
-- 
2.50.1 (Apple Git-155)

